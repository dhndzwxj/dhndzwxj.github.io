<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><!-- hexo injector head_begin start -->
<link rel="stylesheet" href="css/bilicard.css">
<!-- hexo injector head_begin end --><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>博客搭建日志 | 小荷才露尖尖角</title><meta name="author" content="揭晓"><meta name="copyright" content="揭晓"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="🔝重要内容置顶 注意每次备份前，都需要commit一下~（回忆前面讲的内容，如果不commit就只是在本地有缓存，没有上传到缓存区） ➜  dlog git:(master) ✗ git add themes&#x2F;butterfly41 ➜  dlog git:(master) ✗ git add . ➜  dlog git:(master) ✗ git commit -m &#39;211023版本提交">
<meta property="og:type" content="article">
<meta property="og:title" content="博客搭建日志">
<meta property="og:url" content="https://dhndzwxj.github.io/3276806131.html">
<meta property="og:site_name" content="小荷才露尖尖角">
<meta property="og:description" content="🔝重要内容置顶 注意每次备份前，都需要commit一下~（回忆前面讲的内容，如果不commit就只是在本地有缓存，没有上传到缓存区） ➜  dlog git:(master) ✗ git add themes&#x2F;butterfly41 ➜  dlog git:(master) ✗ git add . ➜  dlog git:(master) ✗ git commit -m &#39;211023版本提交">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://dhndzwxj.github.io/private_img/banner2.gif">
<meta property="article:published_time" content="2020-08-25T05:58:05.000Z">
<meta property="article:modified_time" content="2023-03-07T10:32:10.811Z">
<meta property="article:author" content="揭晓">
<meta property="article:tag" content="Hexo">
<meta property="article:tag" content="博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://dhndzwxj.github.io/private_img/banner2.gif"><link rel="shortcut icon" href="/private_img/favicon.png"><link rel="canonical" href="https://dhndzwxj.github.io/3276806131.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":50,"position":"top","messagePrev":"本文上次更新距离今天已经过去","messageNext":"天, 文中内容可能已经过时，望周知。"},
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: false,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '博客搭建日志',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-07 18:32:10'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.loli.net/css2?family=Noto+Serif+SC:wght@400;500;700&display=swap" rel="stylesheet"><link href="https://fonts.loli.net/css2?family=Ma+Shan+Zheng:wght@400;500;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="/css/wave.css?v1"><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="atom.xml" title="小荷才露尖尖角" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/private_img/yuyingnan.jpg" onerror="onerror=null;src='/private_img/404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="archives/"><div class="headline">文章</div><div class="length-num">276</div></a><a href="tags/"><div class="headline">标签</div><div class="length-num">646</div></a><a href="categories/"><div class="headline">分类</div><div class="length-num">73</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="../../"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-laptop-house"></i><span> 结构</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 目录</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/air-conditioner/"><i class="fa-fw fas fa-wind"></i><span> 便携小空调</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/private_img/banner2.gif')"><nav id="nav"><span id="blog-info"><a href="index.html" title="小荷才露尖尖角"><span class="site-name">小荷才露尖尖角</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="../../"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-laptop-house"></i><span> 结构</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 目录</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/air-conditioner/"><i class="fa-fw fas fa-wind"></i><span> 便携小空调</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">博客搭建日志</h1><div id="post-meta"><div class="meta-firstline"><i class="fa-solid fa-user"></i><span class="post-meta-author">揭晓</span><span class="post-meta-date"><span class="post-meta-separator">|</span><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-08-25T05:58:05.000Z" title="发表于 2020-08-25 13:58:05">2020-08-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-07T10:32:10.811Z" title="更新于 2023-03-07 18:32:10">2023-03-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="categories/%E6%9D%82%E6%8A%80/">杂技</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="categories/%E6%9D%82%E6%8A%80/Hexo-HTML/">Hexo&amp;HTML</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">24.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>105分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="博客搭建日志"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>
<p>🔝重要内容置顶</p>
<p>注意每次备份前，都需要commit一下~（<span style='font-family:kaiti'>回忆前面讲的内容，如果不commit就只是在本地有缓存，没有上传到缓存区</span>）</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">➜  dlog git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">git</span> <span class="token function">add</span> themes/butterfly41
➜  dlog git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
➜  dlog git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'211023版本提交'</span>
➜  dlog git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">git</span> push backup_github master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>后面的<code>hexo</code>是远程仓库名，<code>master</code>是<code>hexo</code>这个远程仓库的默认分支名，这些名字都可以自己个性化命名，它们都不是代码中的<b>关键字</b>！</p>
<p>将备份下载到本地的代码：(<span style='font-family:kaiti'>要预先给电脑配置好SSH哦~</span>)</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">➜  dlog git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗git clone https://gitee.com/dhndzwxj/hexo-backup.git hexo-backup<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如何将仓库拷贝到本地？(以Windows版本为例)</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> Desktop
<span class="token function">git</span> clone git@github.com:dhndzwxj/hexo-backup.git juncker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>当然，进行这一切的前提是提前在使用的电脑上设置好SSH key，方法详见本文章3.1节。</p>
<p>下载主题：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone <span class="token parameter variable">-b</span> master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</blockquote>
<p><a href='https://www.jianshu.com/p/af83fc73e525' target='_blank'>【完美解决】Hexo博客出现“Cannot GET/xxx”错误</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> audit fix<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="1-搭建环境"><a class="markdownIt-Anchor" href="#1-搭建环境"></a> 1. 搭建环境</h2>
<p>首先搭建<code>nodejs</code>和<code>git</code>环境。这两个环境相当于博客搭建的基础设施，没有这两个东西的支持，就没法对自己的博客实现结构化管理。虽然这一步看起来非常枯燥无聊，却是实现后续所有功能的关键步骤！经过实验，下载这两个环境的时候，一定要关闭电脑的安全中心当中的“病毒和威胁防护”，否则直接被电脑当病毒杀灭了。</p>
<h3 id="11-windows"><a class="markdownIt-Anchor" href="#11-windows"></a> 1.1 Windows</h3>
<p>第一步，点击<a href='https://nodejs.org/en/download/current/' target='_blank'>nodejs</a>进行下载nodejs。</p>
<table>
  <tr>
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20210726-1.png' height=250px></td>
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20210726-2.png' width=300px></td>
  </tr>
</table>
<p>按照提示一步一步进行安装操作即可(<span style='font-family:kaiti'>时间比较长，请保持耐心~</span>)。下一步是Windows平台配置环境。</p>
<p>高级系统设置——环境变量（<span style='font-family:kaiti'>配置环境变量的目的是，以后<code>git</code>和<code>npm</code>这两个命令可以在任何目录下使用，变成了全局的指令。不配置的话会出错！</span>）</p>
<p>新增系统变量：<br />
变量名填：NODE_PATH<br />
变量值填：（文件路径）</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20210726-3.png' width=500px>
</div>
<p>还需要在Path变量名中修改nodejs文件默认路径</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20210726-4.png' height=350px>
</div>
<p>第二步，git环境搭建</p>
<p>到Git官网下载，<a href='/local_file/Git-2.33.1-64-bit.exe' target='_blank'>下载地址</a>，一步一步进行安装。如下图(仅展示需要提示的部分，基本上选择默认选项即可)：</p>
<table>
  <tr> 
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20210726-5.png' height=200px border=0></td> 
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20210726-6.png' height=200px border=0></td> 
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20210726-7.png' height=200px border=0></td>
  </tr>
</table>
<h3 id="12-mac"><a class="markdownIt-Anchor" href="#12-mac"></a> 1.2 Mac</h3>
<p>苹果电脑上的安装相对比较简单。</p>
<p>下载nodejs：<a href='https://nodejs.org/en/' target='_blank'>node-v16.11.1.pkg</a></p>
<p>下载git：<a href='https://sourceforge.net/projects/git-osx-installer/files/git-2.33.0-intel-universal-mavericks.dmg/download?use_mirror=autoselect' target='_blank'>git-2.33.0-intel.dmg</a></p>
<p>检查安装的版本信息：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 首先检查是否安装了git和node.js，终端输入一下命令，</span>
<span class="token function">node</span> <span class="token parameter variable">-v</span> <span class="token comment">#是否出现安装版本信息，出现说明已经安装了</span>
<span class="token function">git</span> <span class="token parameter variable">--version</span> <span class="token comment">#同上述情况</span>
<span class="token comment"># 如果没有安装，则进行安装,都可以通过直接下载安装测序进行安装，这里不演示了。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果已经安装好了上述的软件，那么可以安装hexo，然后等待安装成功即可。</p>
<h3 id="13-nas"><a class="markdownIt-Anchor" href="#13-nas"></a> 1.3 Nas</h3>
<p>略，可参考<a href='https://blog.csdn.net/bryanwang_3099/article/details/114642267' target='_blank'>基于黑群晖 NAS 搭建 Hexo 博客系统</a>。</p>
<h2 id="2-搭建博客站点"><a class="markdownIt-Anchor" href="#2-搭建博客站点"></a> 2. 搭建博客站点</h2>
<p>因为<code>npm</code>的服务器在海外，所以有时候用这个指令安装东西的话速度比较慢。好在国内有淘宝镜像<code>cnpm</code>，功能和原装的<code>npm</code>一模一样，只需在命令行中输入：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npm.taobao.org
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> cnpm <span class="token parameter variable">--registry</span><span class="token operator">=</span>https://registry.npm.taobao.org <span class="token comment">#（Windows）</span>
<span class="token function">sudo</span> <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> cnpm <span class="token parameter variable">--registry</span><span class="token operator">=</span>https://registry.npm.taobao.org <span class="token comment">#（MacBook）</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>以后直接用cnpm替换npm即可！如有可选更新，cnpm也可以进行升级：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token parameter variable">-g</span> i cnpm <span class="token comment">#更新cnpm</span>
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> npm@<span class="token punctuation">[</span>版本号<span class="token punctuation">]</span> <span class="token comment">#更新npm</span>
<span class="token function">sudo</span> <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> npm@<span class="token punctuation">[</span>版本号<span class="token punctuation">]</span> <span class="token comment">#更新npm（MacBook）</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="21-windows"><a class="markdownIt-Anchor" href="#21-windows"></a> 2.1 Windows</h3>
<p>第一步是安装Hexo环境：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> hexo-cli<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>第二步是新建一个存放博客的专属文件夹，然后在这个文件夹下进行操作：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 在你的家目录下创建一个blog文件夹</span>
<span class="token function">mkdir</span> dlog
<span class="token comment"># 进入目录</span>
<span class="token builtin class-name">cd</span> dlog
<span class="token comment"># 初始化目录</span>
hexo init
<span class="token comment">#开启本地服务 </span>
hexo s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>出现以下信息，说明你可以本地访问博客系统，在浏览器输入<code>http://localhost:4000</code>这个网址，就可以看到博客首页。</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211022-8.png' width=450px>
</div>
<h3 id="22-mac"><a class="markdownIt-Anchor" href="#22-mac"></a> 2.2 Mac</h3>
<p>Mac上的步骤不能说一模一样的，反正也是八九不离十了。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> hexo-cli
<span class="token comment"># 在你的家目录下创建一个blog文件夹</span>
<span class="token function">mkdir</span> blog
<span class="token comment"># 进入目录</span>
<span class="token builtin class-name">cd</span> blog
<span class="token comment"># 初始化目录</span>
hexo init
<span class="token comment">#开启本地服务 </span>
hexo s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="23-部署hexo博客"><a class="markdownIt-Anchor" href="#23-部署hexo博客"></a> 2.3 部署hexo博客</h3>
<p><span style='color:red'>以下步骤对Windows和Mac而言，没有任何区别。</span></p>
<p>首先需要安装<code>hexo-deployer-git</code>插件，这样我们才能把生成的<code>public</code>文件夹部署到Github或者其他代码托管平台。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>下面你需要打开根目录，然后在这个目录下找到<span style='color:red'>站点配置文件</span><code>_config.yml</code>（如下图左）。并且打开这个文件，进行编辑。</p>
<table>
  <tr>
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211025-9.png' height=300px></td>
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211025-10.png' height=300px></td>
  </tr>
</table>
<p>在站点配置文件内（如上图右）找到<code>deploy</code>这一行代码，按照以下的格式修改即可。（<span style='font-family:kaiti'>下面是本人的个性化设置，各个参数是什么意思，容我细细道来</span>）</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">deploy:
  type: <span class="token function">git</span>
  repo: git@github.com:dhndzwxj/dhndzwxj.github.io.git 
  branch: master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>deploy: 部署的意思，一个关键词</li>
<li>type：部署的类型，这里选择的是git，就是上面我们已经安装的那个！</li>
<li>repo：仓库的意思，我们所有的本地文件都要上传到这里！我们要在github上面申请自己的账号，建造自己的仓库~（具体怎么做见后文！）</li>
<li>branch：仓库的分支的意思，一个仓库里面可以有多个分支，就像是一个大院里面有很多间厢房一样。具体的含义后面解释。</li>
</ul>
<h3 id="24-nas"><a class="markdownIt-Anchor" href="#24-nas"></a> 2.4 Nas</h3>
<p>略，可参考<a href='https://blog.csdn.net/bryanwang_3099/article/details/114642267' target='_blank'>基于黑群晖 NAS 搭建 Hexo 博客系统</a>。</p>
<h2 id="3-博客代码部署"><a class="markdownIt-Anchor" href="#3-博客代码部署"></a> 3. 博客代码部署</h2>
<h3 id="31-github"><a class="markdownIt-Anchor" href="#31-github"></a> 3.1 Github</h3>
<p>对我们而言，Github可能只是一个存数据的仓库而已。但对于大多数编程爱好者而言，这是一个巨大的资源宝库，是全球编程爱好者交流思想的平台。它的官方网址是：<a href='https://github.com' target='_blank'>Github</a>。</p>
<p>第一步要在Github上申请一个账号。点击网站右上角的<code>Sign up</code>，然后在下一个页面用自己的邮箱进行注册，输入一个比较复杂的密码，输入自己的个性化用户名，然后选择是否接受更新（输入y表示同意，n表示不同意），然后进行人机验证，最后在邮箱接收验证码。</p>
<table>
  <tr>
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211025-11.jpg' width=600px></td>
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211025-12.jpg' width=600px></td>
  </tr>
</table>
<p>后面就是一些个性化的设置，不关键，此处略去。如果想跳过这些烦人的步骤，直接把网页拉倒最底下，点一下skip personalization即可。</p>
<p>接下来进入github个人首页，如下图所示。</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211025-13.jpg' width=700px>
</div>
<p>下面我们就要建立“仓库”用以储存我们的博客网站了！点击如上图中左边的“create repository”（<span style='font-family:kaiti'>如果你已经有仓库了，那么酒店左上角的“New”，或者点右上角“+”，里面有个“New repository”</span>），进入下面的页面。这个页面里面一些设置要特别注意了！<span style='color:red'>仓库的名字（repository name）一定要和自己的名字(owner)一模一样！而且一定要写成<code>yourname.github.io</code>的格式。不然后面没办法生成相应的github页面。</span></p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211025-14.png' width=600px>
</div>
<p>这样仓库就建好了。每一个仓库都有自己的地址，如下图：</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211026-15.png' width=600px>
</div>
<p>一般而言，最重要的地址是SSH地址，将其复制下来，粘贴到博客站点配置文件<code>blog/_config.yml</code>就可以了。这里解释了上面<code>deploy</code>中<code>repo</code>的参数的含义！</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> git
  <span class="token key atrule">repo</span><span class="token punctuation">:</span> git@github.com<span class="token punctuation">:</span>dhndzwxj/dhndzwxj.github.io.git 
  <span class="token key atrule">branch</span><span class="token punctuation">:</span> master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>下一步要做的呢，就是在本地的文件和github仓库之间建立联系，其实两行代码也就解决了：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">"dhndzwxj"</span>
<span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email dhndzwxj@ruc.edu.cn<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><span style='color:red'>注意啊，上面的user.name和user.email一定替换成自己的githubID和注册的邮箱~</span></p>
<p>接下来还有个问题！我们目的是把本地的文件上传到云端的github，但是每次访问github，它都会要求我们输入密码，否则就没有权限（也是出于安全的目的）。怎么省掉这个麻烦呢？方法就是创建SSH（别问我这是啥，照着下面的说法做就是了）！</p>
<p>（1）检查是否有SSH key</p>
<p>登陆<code>github</code>，点击头像位置处 <code>Settings ——&gt; SSH and GPG keys</code> ，查看是否有<code>SSH keys</code>。如果有，直接跳到第（3）步；如果没有，则继续。</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211026-16.jpg' width=650px>
</div>
<p>（2）新建 SSH key，在CMD中输入如下代码，注意大小写，后面的邮箱替换成自己注册github的邮箱：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-C</span> <span class="token string">"dhndzwxj@ruc.edu.cn"</span>
ssh-keygen <span class="token parameter variable">-t</span> ed25519 <span class="token parameter variable">-C</span> <span class="token string">"dhndzwxj@ruc.edu.cn"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>然后会出现：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Generating public/private rsa key pair.
Enter <span class="token function">file</span> <span class="token keyword">in</span> <span class="token function">which</span> to save the key <span class="token punctuation">(</span>/c/Users/电脑名/.ssh/id_rsa<span class="token punctuation">)</span>:<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>直接回车就可以。然后会出现：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Enter passphrase <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span>:
Enter same passphrase again:<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>要求你输入密码，这个密码会在你提交项目时使用，如果为空的话提交项目时则不用输入。这个设置是防止别人往你的项目里提交内容，<span style='color:blue'>但就我个人的使用体验而言，还是不设置的好，否则的话每次上传都需要输入密码，很麻烦。</span></p>
<p><b>注意：输入密码的时候没有*字样的，直接输入就好</b>。然后会出现：</p>
<pre class="line-numbers language-none"><code class="language-none">BASH
Your identification has been saved in &#x2F;c&#x2F;Users&#x2F;电脑名&#x2F;.ssh&#x2F;id_rsa.
Your public key has been saved in &#x2F;c&#x2F;Users&#x2F;电脑名&#x2F;.ssh&#x2F;id_rsa.pub.
The key fingerprint is:
65:69:······02:4b emailname@email.com
The key&#39;s randomart image is:
+--[ RSA 2048]----+
|                 |
|       .   o .   |
|    . o o &#x3D; o    |
|   . o * &#x3D; o     |
|  E  o + o .     |
| . o.   . .      |
|     ..          |
+-----------------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>至此，密钥已经成功生成。</p>
<p>（3）接下来在github上添加SSH key：</p>
<ul>
<li>打开本地文件：id_rsa.pub（文件路径可以在上一步SSH生成成功后看到路径，比如我的是<code>/Users/电脑名/.ssh/id_rsa.pub</code>），可以将这个文件在编辑器中打开，然后全选复制。
<ul>
<li>这一步需要注意，打开后直接复制可能会损坏原来的字段格式，推荐使用命令行进行复制。mac上可以使用这个代码：<code>cat ~/.ssh/id_rsa.pub</code>。windows电脑就使用这个代码：<code>clip &lt; C:/Users/Administrator/.ssh/id_rsa.pub</code>。</li>
<li>登陆github，点击头像位置处 Settings ——&gt; SSH and GPG keys ——&gt; New SSH key，点击新建SSH key。</li>
</ul>
</li>
<li>将 ① 中复制的内容粘贴在key文本框里，title可以不用填（或者自己起一个名字也可以）。</li>
</ul>
<p>（4）测试设置是否成功：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ssh</span> <span class="token parameter variable">-T</span> git@github.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果出现以下内容：<code>Hi dhndzwxj! You've successfully authenticated, but GitHub does not provide shell access.</code>。或者<code>kex_exchange_identification: Connection closed by remote host</code>。可以尝试访问该网站：<a target="_blank" rel="noopener" href="https://docs.github.com/cn/authentication/troubleshooting-ssh/error-permission-denied-publickey">https://docs.github.com/cn/authentication/troubleshooting-ssh/error-permission-denied-publickey</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> un hexo-deployer-git
<span class="token function">npm</span> i hexojs/hexo-deployer-git
<span class="token function">ssh</span> <span class="token parameter variable">-T</span> GITHUB-dhndzwxj@github.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>（5）然后就可以部署你的博客到github啦。这之后，输入网址<code>yourname.github.io</code>，就能访问自己的网站了。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo cl <span class="token operator">&amp;&amp;</span> hexo g <span class="token operator">&amp;&amp;</span> hexo d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果这一步报错，可能是因为没有安装<code>hexo-deployer-git</code>插件，安装即可：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cnpm <span class="token function">install</span> hexo-deployer-git <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>代码解读：第（6）步实现了三个步骤：</p>
<ul>
<li>
<p><code>hexo cl</code> 是 <code>hexo clean</code>的简写。意思是清除本地的缓存，实际上就是把博客文件夹下的<code>public</code>文件夹删除掉了。这个<code>public</code>是基于本地的文件生成的、用于上传到仓库或者其他网站服务器上的文件夹，可以理解为本地文件上网的中转站、交通工具，删掉了也不影响本地的内容。</p>
</li>
<li>
<p><code>hexo g</code> 是<code>hexo generate</code>的简写，意思是生成public文件夹。</p>
</li>
<li>
<p><code>hexo d</code>是<code>hexo deploy</code>的简写，意思是将生成的public文件夹部署到网上，我们这里是部署到github上面。为了顺利部署，我们前面也提到过，要在站点文件夹下<code>_config.yml</code>文件中修改一些内容，如下：</p>
</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">deploy:
  type: <span class="token function">git</span>
  repo: git@github.com:dhndzwxj/dhndzwxj.github.io.git 
  branch: master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>上面的<code>repo</code>后面要换成自己仓库的SSH，SSH在如下的位置：</p>
<div align='center'>
<img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211026-17.png' width=550px>
</div>
<h3 id="31a-部署意外情况"><a class="markdownIt-Anchor" href="#31a-部署意外情况"></a> 3.1a 部署意外情况</h3>
<p>不过<code>hexo d</code>还可能遇到其他一些情况：<code>Please make sure you have the correct access rights and the repository exists</code> 。解决方法是：</p>
<p>到这里问题就很明确了，是DNS解析出问题了，导致github.com域名被解析成了localhost的ip地址，就自然连不上GitHub了。</p>
<p>Windows下执行<code>ipconfig /flushdns</code> 清楚DNS缓存后也没用，最后修改<code>/etc/hosts</code>文件，增加一条github.com的域名映射搞定。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">140.82</span>.113.4 github.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>设置http proxy</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> http.proxy socks5://127.0.0.1:7890

<span class="token function">git</span> config <span class="token parameter variable">--local</span> http.postBuffer <span class="token number">524288000</span> 
<span class="token comment">#如果是缓存不够，设置500M缓存</span>

<span class="token function">git</span> config <span class="token parameter variable">--global</span> sendpack.sideband <span class="token boolean">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果要取消代理：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--unset</span> http.proxy
<span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--unset</span> httpx.proxy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>client_loop: send disconnect: Broken pipeiB</p>
<p>I solved the same problem by editing the file <code>~/.ssh/config</code> to have:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Host *
    User dhndzwxj@ruc.edu.cn
    Hostname ssh.github.com
    IdentityFile ~/.ssh/id_rsa
    ServerAliveInterval <span class="token number">20</span>
    TCPKeepAlive no
    Port <span class="token number">22</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果还有ip地址问题，就删掉<code>/.ssh/known_hosts</code>。</p>
<p>github 的ip地址为。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ping</span> github.com
PING github.com <span class="token punctuation">(</span><span class="token number">140.82</span>.113.4<span class="token punctuation">)</span>: <span class="token number">56</span> data bytes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>！！！！！！！！！！！！！！！！！！！！</p>
<p>删除.ssh文件夹下的<code>known_hosts</code></p>
<p>git 设置和取消代理</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 设置ss</span>
<span class="token function">git</span> config <span class="token parameter variable">--global</span> http.proxy <span class="token string">'socks5://127.0.0.1:1080'</span>

<span class="token function">git</span> config <span class="token parameter variable">--global</span> https.proxy <span class="token string">'socks5://127.0.0.1:1080'</span>

<span class="token comment"># 设置代理</span>
<span class="token function">git</span> config <span class="token parameter variable">--global</span> https.proxy http://127.0.0.1:1080

<span class="token function">git</span> config <span class="token parameter variable">--global</span> https.proxy https://127.0.0.1:1080

<span class="token comment"># 取消代理</span>
<span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--unset</span> http.proxy

<span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--unset</span> https.proxy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>还可能遇见这种问题：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">On branch master
Changes not staged <span class="token keyword">for</span> commit:   
	<span class="token punctuation">(</span>use <span class="token string">"git add &lt;file>..."</span> to update what will be committed<span class="token punctuation">)</span>
	<span class="token punctuation">(</span>use <span class="token string">"git restore &lt;file>..."</span> to discard changes <span class="token keyword">in</span> working directory<span class="token punctuation">)</span>
  <span class="token punctuation">(</span>commit or discard the untracked or modified content <span class="token keyword">in</span> submodules<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>删掉博客目录下的<code>.git</code>文件夹（一般为隐藏状态）即可。不过值得注意的是，这个文件夹被删掉之后，所有的远程“代号需要重新设置”：</p>
<pre class="line-numbers language-none"><code class="language-none">git remote add [代号] [仓库名]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="32-gitee"><a class="markdownIt-Anchor" href="#32-gitee"></a> 3.2 Gitee</h3>
<p>别名“码云”，服务器在国内。优点是下载速度比Github快了一个数量级，缺点是一旦博客中有某些“敏感词”就无法上线自己的博客。它的官方网址是：<a href='https://gitee.com/' target='_blank'>Gitee</a>。后续的过程基本上重复了上一步在Github中所作的一切，因此不再赘述。</p>
<p>不过gitee的站点发布和github不太一样。需要在最后一步开启网站服务。不过我的博客经常被gitee检查出敏感词汇，因此一直没有上线成功，就不展示了哈~</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20210729-18.jpg' width=500px>
  <p align='center' style='font-family:kaiti'></p>
  <p align='left' style='font-family:fangsong'></p>
</div>
如何将一个项目同时提交到GitHub和Gitee(码云)上？
<p>找到.git下面的config文件，通过vi命令进行修改，笔者起初文件内容如下：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">[</span>core<span class="token punctuation">]</span>
        repositoryformatversion = 0
        filemode = true
        bare = false
        logallrefupdates = true
        ignorecase = true
        precomposeunicode = true
<span class="token punctuation">[</span>remote "origin"<span class="token punctuation">]</span>
        url = git@github.com<span class="token punctuation">:</span>secbr/shiro.git
        fetch = +refs/heads/<span class="token important">*:refs/remotes/origin/*</span>
<span class="token punctuation">[</span>branch "main"<span class="token punctuation">]</span>
        remote = origin
        merge = refs/heads/main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>修改之后变为：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">[</span>core<span class="token punctuation">]</span>
        repositoryformatversion = 0
        filemode = true
        bare = false
        logallrefupdates = true
        ignorecase = true
        precomposeunicode = true
<span class="token punctuation">[</span>remote "origin"<span class="token punctuation">]</span>
        // github的仓库地址
        url = git@github.com<span class="token punctuation">:</span>secbr/shiro.git
        // gitee的仓库地址
        url = git@gitee.com<span class="token punctuation">:</span>secbro/shiro.git
        fetch = +refs/heads/<span class="token important">*:refs/remotes/origin/*</span>
<span class="token punctuation">[</span>branch "main"<span class="token punctuation">]</span>
        remote = origin
        merge = refs/heads/main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="4-撰写博客"><a class="markdownIt-Anchor" href="#4-撰写博客"></a> 4. 撰写博客</h2>
<h3 id="41-博客文件夹"><a class="markdownIt-Anchor" href="#41-博客文件夹"></a> 4.1 博客文件夹</h3>
<p>我们打开自己的博客根目录，跟着我一个个了解里面的这些文件（夹）都是干什么的：</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211026-18.png' width=500px>
</div>
<ul>
<li><code>_config.yml</code>：俗称站点配置文件，很多与博客网站的格式、内容相关的设置都需要在里面改。</li>
<li><code>node_modules</code>:存储Hexo插件的文件，可以实现各种扩展功能。一般不需要管。</li>
<li><code>package.json</code>：别问我，我也不知道干嘛的。</li>
<li><code>scaffolds</code>：模板文件夹，里面的<code>post.md</code>文件可以设置每一篇博客的模板。具体用起来就知道能干嘛了。</li>
<li><code>source</code>：非常重要。所有的个人文件都在里面！</li>
<li><code>themes</code>：主题文件夹，可以从<a href='https://hexo.io/themes/' target='_blank'>Hexo主题官网</a>或者网上大神的Github主页下载各种各样美观的主题，让自己的网站变得逼格高端的关键！</li>
</ul>
<p>接下来重点介绍<code>source</code>文件夹。新建的博客中，<code>source</code>文件夹下默认只有一个子文件夹——<code>_posts</code>。我们写的博客都放在这个子文件夹里面。我们还可以在<code>source</code>里面新建各种子文件夹满足自己的个性化需求，对初学者而言，我们先把精力放在主线任务上，然后再来搞这些细节。</p>
<h3 id="42-新建博客文件"><a class="markdownIt-Anchor" href="#42-新建博客文件"></a> 4.2 新建博客文件</h3>
<p>博客文件格式为<code>.md</code>（Markdown格式文件，建议使用<a href='https://www.typora.io' target='_blank'>typora软件</a>进行编辑）。我们<span style='color:red'>一定</span>要用代码建立新的博客 ：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo n 文件名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211026-19.png' width=750px>
</div>
<p>如上图，左边的是<code>scafford</code>文件夹下的模板文件，右边是我们刚刚新建的markdown文件。我们可以看出模板文件是干嘛用的了吧！之所以要用代码新建博客文件，是因为这种方式生成的文件有前面的头文件(Front Matter)，这些内容对于后面生成网页很有用！默认的模板文件中并没有这么丰富的内容，这些新添加的东西都是我写博客一年来积累的符合个人习惯的设置，不必邯郸学步。</p>
<p>写好内容后，在命令行一键三连：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo cl <span class="token operator">&amp;&amp;</span> hexo g <span class="token operator">&amp;&amp;</span> hexo s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后随便打开一个浏览器，在网址栏输入<code>localhost:4000/</code>，就能发现自己的网站更新了！不过这只是在本地进行了更新，要想部署到网上（Github上），输入如下代码：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后在浏览器地址栏输入<code>https://yourname.github.io</code>，或者<code>yourname.github.io</code>就能在网上浏览自己的博客了！</p>
<p>以上，我们的博客网站1.0版本就搭建完成了，如果没有更多的需求，做到这里基本上就可以了。如果有更多的要求，还需要进一步的精耕细作！</p>
<h3 id="43-typora-markdown语法"><a class="markdownIt-Anchor" href="#43-typora-markdown语法"></a> 4.3 Typora-Markdown语法</h3>
<p>如果想要系统学习相关的编码知识，需要研究以下两套代码：</p>
<p>Markdown语法：<a href='https://www.runoob.com/markdown/md-tutorial.html' target='_blank'>菜鸟教程</a></p>
<p>Markdown是支持html和html5的语法的：<a href='https://www.runoob.com/html/html-tutorial.html' target='_blank'>菜鸟教程</a></p>
<p>不过出于快速上手的目的，下面我分享一些设置和模板，方便新学者能快速投入使用。</p>
<p>首先要对Typora软件进行一些设置。按<code>Ctrl+,</code>打开其设置界面。</p>
<p>（1）由于个人喜欢使用<a href='https://lanlan2017.github.io/blog/83c2e83a/' target='_blank'>LaTeX语法</a>，因此要在<code>Markdown</code>标签中打开内联公式：</p>
<ul>
<li>
<div align='center'>
<img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211026-20.png' width=450px>
</div>
</li>
</ul>
<p>（2）此外如果在Typora中插入图片，我的做法是用QQ截图（或者其他截图工具）然后直接粘贴到Typora里。这样做一般都会成功，生成的图片格式如下：</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url"><span class="token operator">!</span>[<span class="token content">image-20211026101023735</span>](<span class="token url">/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211026101023735.png</span>)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>
<p>插入图片代码的基本格式为<code>![图片描述](图片路径)</code>。其中“图片描述”部分可以省略不写。图片路径是我自己设置过的：打开Typora的设置，在“图像”标签下，自定义的图片插入路径：（<span style='font-family:kaiti'>如果不设置，我都不知道这插入的图片存到我电脑的什么奇怪位置去了！</span>）</p>
</li>
<li>
<p>我的图片和文章的存储结构为：</p>
</li>
<li>
<p>source</p>
<ul>
<li>_posts</li>
<li>images</li>
</ul>
</li>
<li>
<p>下一张图的<code>../images/$&#123;filename&#125;</code>是在macOS系统下设置的。不过在windows系统下这么设置就出现了问题，要改成<code>/../../images/$&#123;filename&#125;</code>。【在相对路径的语法中，<code>.</code>代表文件所在的目录，<code>..</code>代表上一级目录，<code>$&#123;filename&#125;</code>代表文件名。】</p>
<div align='center'>
<img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211026-21.png' width=450px>
</div>
</li>
<li>
<p><code>/../../source/images/$&#123;filename&#125;</code>的含义是，在<code>_post</code>的同目录（<code>source</code>）下，创建一个<code>images</code>子文件夹（如果文件夹已经存在就不另建了），然后在<code>images</code>下，以当前工作的markdown文件名新建子子文件夹，于是这篇博文中的所有图片都保存在这个新的子子文件夹下了。</p>
</li>
<li>
<p>当然，我不推荐用上面的方法插入图片，因为没办法设置图片的大小、位置等信息。我一般用html标签语言插入图片，代码如下：</p>
</li>
</ul>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>center<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>图片路径<span class="token punctuation">'</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>450px</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>center<span class="token punctuation">'</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token value css language-css"><span class="token property">font-size</span><span class="token punctuation">:</span>15px<span class="token punctuation">;</span><span class="token property">font-family</span><span class="token punctuation">:</span>kaiti<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span>red</span><span class="token punctuation">'</span></span></span><span class="token punctuation">></span></span>图片标题 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>
<p><code>&lt;div&gt;&lt;/div&gt;</code>是html中表示代码块的标签，相似的还有<code>&lt;span&gt;&lt;/span&gt;</code>。只不过前者用于行间，后者用于行内。它包裹住所有的内容都会独立出现为一个大模块，里面的<code>align='center'</code>是设置整个模块的位置。</p>
</li>
<li>
<p><code>&lt;img&gt;</code>是设置图片插入的标签（这个标签没有<code>&lt;/img&gt;</code>配合），<code>src</code>写的是图片路径参数，<code>width</code>是图片宽度参数，<code>px</code>是宽度单位。其实还有高度的参数<code>height</code>，只不过我一般宽高只设置一个。还可以加入参数<code>float='left'</code>，效果就像是word里面的“四周环绕型”，不推荐。</p>
</li>
<li>
<p><code>&lt;p&gt;&lt;/p&gt;</code>是图片周边的文字内容。<code>align</code>前面已经介绍，<code>style</code>下可以设置文字的字号(<code>font-size</code>)、字体(<code>font-family</code>)、颜色(<code>color</code>)等，彼此之间用英文的分号间隔。（<span style='font-family:kaiti'>注意：这些属性都是可选的，也可以一个style都不写，那样就随系统默认格式。</span>）</p>
</li>
</ul>
<p>（3）行间文字的设置，和上面介绍的图片周边的文字基本一样，只不过这里一般使用<code>&lt;span&gt;&lt;/span&gt;</code>标签。格式如下：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span>blue<span class="token punctuation">;</span><span class="token property">background</span><span class="token punctuation">:</span>yellow<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>18px<span class="token punctuation">;</span><span class="token property">font-family</span><span class="token punctuation">:</span>hei</span><span class="token punctuation">'</span></span></span><span class="token punctuation">></span></span>测试字体<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>（4）如果要插入代码块，把自己的代码存在文章中，<span style='color:red'>在英文输入法下</span>按三下键盘上的这个键（下图），然后回车，代码环境就出现了：</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211026-22.jpg' width=600px>
</div>
<p>（5）插入表格：<code>段落——表格——插入表格</code>。</p>
<p>（6）无序列表</p>
<p>就是输入减号<code>-</code>然后按下空格，按下回车。如下：</p>
<ul>
<li>一级列表
<ul>
<li>二级列表</li>
</ul>
</li>
</ul>
<p>生成二级列表的方法是按键盘的<code>Tab</code>键，返回上一级列表的方法是按键盘的<code>Shift+Tab</code>键。</p>
<p>（7）有序列表</p>
<p>就是输入1.然后按下空格，按下回车，如下：</p>
<ol>
<li></li>
<li></li>
</ol>
<p>（8）文中尾注</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">马克思[^2]是全世界无产阶级和劳动人民的伟大导师。

<span class="token url-reference url"><span class="token punctuation">[</span><span class="token variable">^2</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 卡尔·马克思，全名卡尔·海因里希·马克思（德语：Karl</span> Heinrich Marx，1818年5月5日－1883年3月14日），马克思主义的创始人之一。……<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意：在typora中写文章，能用html代码就别用markdown语法，否则生成网页的时候非常容易出现问题。比如对于加粗，建议使用标签<code>&lt;b&gt;&lt;/b&gt;</code>。而不是markdown的<code>**内容**</code>。</p>
</blockquote>
<h2 id="5-插件"><a class="markdownIt-Anchor" href="#5-插件"></a> 5. 插件</h2>
<p>使用插件可以让我们的博客功能更为强大，也能满足自己的一些特殊需要。下面列举一些事例，如有其他的要求，可以自行上网搜索、学习。</p>
<h3 id="51-永久链接"><a class="markdownIt-Anchor" href="#51-永久链接"></a> 5.1 永久链接</h3>
<p>在做优化之前，hexo-next文章链接默认的生成规则是：<code>:year/:month/:day/:title</code>，是按照年、月、日、标题来生成的。这样，如果文章标题是中文的话，URL链接是也会是中文，特别容易出现编码错乱的问题。那能不能生成唯一不变的URL链接呢？答案是可以的，已经有人给我们实现了。这就是我们要说的<code>hexo-abbrlink</code>插件：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cnpm <span class="token function">install</span> hexo-abbrlink <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>修改博客站点配置文件_config.yml，将带有<code>permalink:</code>的一行改为：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">permalink</span><span class="token punctuation">:</span> /<span class="token punctuation">:</span>abbrlink.html  <span class="token comment"># 此处可以自己设置</span>
<span class="token key atrule">abbrlink</span><span class="token punctuation">:</span>
    <span class="token key atrule">alg</span><span class="token punctuation">:</span> crc32   <span class="token comment">#算法： crc16(default) and crc32</span>
    <span class="token key atrule">rep</span><span class="token punctuation">:</span> hex     <span class="token comment">#进制： dec(default) and hex</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="52-latex"><a class="markdownIt-Anchor" href="#52-latex"></a> 5.2 LaTeX</h3>
<p>推荐这个插件：<a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo-math">https://github.com/hexojs/hexo-math</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i hexo-math <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p>有几个坑：</p>
<ul>
<li>行间公式的换行，<code>\\</code>是远远不够的，要写成<code>\\\tag\\</code>;</li>
<li>上标符号<code>^</code>后面接了一个内容后要紧接着空格，不然会出错；例如：<code>^\star =</code>, <code>^&#123; \star&#125;</code></li>
<li>下标符号<code>_</code>和后面的内容一定要有间隔，例如：<code>x_ 1</code>,<code>\mathscr&#123;R&#125;_ &#123;++&#125;</code></li>
<li>数学公式中，二阶导数的两个“撇”最好用代码<code>^&#123; \prime\prime&#125;</code>来表示。</li>
<li>数学公式中。减号’-'前后一定不要什么内容都没有，不然会被渲染为markdown语法中的item！</li>
<li>latex中的公式环境eqnarray会在html中自动生成公式的tag，因此最好使用{eqnarray*}环境——或者添加<code>\notag</code></li>
</ul>
</blockquote>
<p>Hexo默认使用<code>marked.js</code>去解析我们写的<code>markdown</code>，比如一些符号，<code>_</code>代表斜体，会被处理为标签，比如<code>x_i</code>在开始被渲染的时候，处理为<code>xi</code>，比如<b>init</b>会被处理成<b>init。</b></p>
<p>因此，我们需要采取<b>更换Markdown引擎</b>的方式。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i hexo-renderer-mathjax <span class="token parameter variable">--save</span>
<span class="token function">npm</span> uninstall hexo-renderer-marked <span class="token parameter variable">--save</span>
<span class="token function">npm</span> <span class="token function">install</span> hexo-renderer-kramed <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面的命令即可，先卸载原来的渲染引擎，再安装新的。</p>
<p>之后，现在站点配置文件下添加如下内容：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># _config.yml</span>
<span class="token key atrule">math</span><span class="token punctuation">:</span>
  <span class="token key atrule">katex</span><span class="token punctuation">:</span>
    <span class="token key atrule">css</span><span class="token punctuation">:</span> <span class="token string">'https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css'</span>
    <span class="token key atrule">options</span><span class="token punctuation">:</span>
      <span class="token key atrule">throwOnError</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">mathjax</span><span class="token punctuation">:</span>
    <span class="token key atrule">css</span><span class="token punctuation">:</span> <span class="token string">'https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css'</span>
    <span class="token key atrule">options</span><span class="token punctuation">:</span>
      <span class="token key atrule">conversion</span><span class="token punctuation">:</span>
        <span class="token key atrule">display</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">tex</span><span class="token punctuation">:</span>
      svg<span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>要在主题配置文件中开启<code>mathjax</code>开关，把<code>mathjax</code>默认的<code>false</code>修改为<code>true</code>，具体如下：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># MathJax Support</span>
<span class="token key atrule">mathjax</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">per_page</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>别着急，这样还不够，还需要在文章的<code>Front-matter</code>里打开<code>mathjax</code>开关，如下：</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token hr punctuation">---</span>
title: index.html
date: 2016-12-28 21:01:30
tags:
<span class="token title important">mathjax: true
<span class="token punctuation">--</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="53-行内公式bug"><a class="markdownIt-Anchor" href="#53-行内公式bug"></a> 5.3 行内公式bug</h3>
<p>对于Typora软件而言，按<code>Crtl+/</code>（macOS按<code>command+/</code>）。可以进入源代码模式，这样就能看清楚那部分代码除了问题了！这样修改效率很高！（如下图）</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211123-23.png' width=600px>
</div>
<h3 id="54-脚注"><a class="markdownIt-Anchor" href="#54-脚注"></a> 5.4 脚注</h3>
<p><code>hexo-renderer-markdown-it-plus</code>插件（目前在使用，这个插件和hexo-renderer-kramed有冲突）</p>
<p>原生的主题是不支持网页脚注的，非常不方便。几经查找、探索，终于找到合适的方法，点击脚注即可实现跳转。</p>
<p>首先卸载原来的 markdown 渲染插件（我这里原来是 marked，这是 Hexo 提供的默认渲染插件），然后把 <code>hexo-renderer-markdown-it-plus</code> 装上：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cnpm un hexo-renderer-marked <span class="token parameter variable">--save</span>
cnpm i hexo-renderer-markdown-it-plus <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>然后在博客站点根目录下的<code>_config.yml</code>中进行相应的配置。<a href='https://github.com/hexojs/hexo-renderer-markdown-it/wiki/Simple-Configuration' target='_blank'>简单的配置方法</a>只包括设置 markdown 格式，这里就不详述了。<a href='https://github.com/hexojs/hexo-renderer-markdown-it/wiki/Advanced-Configuration' target='_blank'>高级的配置方法</a>中包含很多可选项：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">markdown</span><span class="token punctuation">:</span>
  <span class="token comment"># 渲染设置</span>
  <span class="token key atrule">render</span><span class="token punctuation">:</span>
    <span class="token comment"># 置为true时，html内容保持不变；置为false时，html内容将被转义成普通字符串</span>
    <span class="token key atrule">html</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment"># 是否生成与XHTML完全兼容的标签（虽然我不懂是什么意思）</span>
    <span class="token key atrule">xhtmlOut</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token comment"># 置为true时，每个换行符都被渲染成一个&lt;br>（即Hexo的默认表现）；置为false时，只有空行才会被渲染为&lt;br>（GFM的默认表现）</span>
    <span class="token key atrule">breaks</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment"># 是否自动识别链接并把它渲染成链接</span>
    <span class="token key atrule">linkify</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment"># 是否自动识别印刷格式（意思是把(c)渲染为©这样的）</span>
    <span class="token key atrule">typographer</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment"># 如果typographer被设置为true，则该选项用于设置将dumb quotes（""）自动替换为smart quotes</span>
    <span class="token key atrule">quotes</span><span class="token punctuation">:</span> <span class="token string">'“”‘’'</span>
  <span class="token comment"># 设置所需插件</span>
  <span class="token key atrule">plugins</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>abbr
    <span class="token punctuation">-</span> markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>footnote
    <span class="token punctuation">-</span> markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>ins
    <span class="token punctuation">-</span> markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>sub
    <span class="token punctuation">-</span> markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>sup
  <span class="token comment"># 锚点设置（因为我没有尝试相关内容，所以就不翻译相关说明了）</span>
  <span class="token key atrule">anchors</span><span class="token punctuation">:</span>
    <span class="token key atrule">level</span><span class="token punctuation">:</span> <span class="token number">2</span>
    <span class="token key atrule">collisionSuffix</span><span class="token punctuation">:</span> <span class="token string">'v'</span>
    <span class="token key atrule">permalink</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">permalinkClass</span><span class="token punctuation">:</span> header<span class="token punctuation">-</span>anchor
    <span class="token key atrule">permalinkSymbol</span><span class="token punctuation">:</span> § <span class="token comment">#¶</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这里设置了文中章节、脚注等内容的格式。</p>
<h3 id="55-文章加密功能"><a class="markdownIt-Anchor" href="#55-文章加密功能"></a> 5.5 文章加密功能</h3>
<p>有些文章的内容，我们不希望别人能看到，Hexo提供了加密文章的插件：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cnpm <span class="token function">install</span> <span class="token parameter variable">--save</span> hexo-blog-encrypt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后在你的文章的头部(Front Matter)添加上对应的字段，如 password, abstract, message。（<span style='font-family:kaiti'>这时候文章模板<code>blog/scaffod/post.md</code>的作用就体现出来了，这些内容加在模板里，以后生成的每一篇文章都能选择是否进行加密</span>）</p>
<p>如果<code>password:</code>后面空着，就是无密码；我发现如果密码内容加上英文输入法下的引号，引号也不会被算作密码内容。</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token front-matter-block"><span class="token punctuation">---</span>
<span class="token front-matter yaml language-yaml"><span class="token key atrule">title</span><span class="token punctuation">:</span> 文章加密
<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2019-01-04T22:20:13.000Z</span>
<span class="token key atrule">category</span><span class="token punctuation">:</span> 教程
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> 博客
  <span class="token punctuation">-</span> Hexo
<span class="token key atrule">keywords</span><span class="token punctuation">:</span> 博客文章密码		
<span class="token key atrule">password</span><span class="token punctuation">:</span> TloveY				<span class="token comment">#是该博客加密使用的密码</span>
<span class="token key atrule">abstract</span><span class="token punctuation">:</span> 密码：TloveY				<span class="token comment">#是该博客的摘要，会显示在博客的列表页</span>
<span class="token key atrule">message</span><span class="token punctuation">:</span>  输入密码，查看文章			<span class="token comment">#这个是博客查看时，密码输入框上面的描述性文字</span></span>
<span class="token punctuation">---</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>不过加密文件的<code>toc</code>无法上下拉，如果网页目录特别长就很不方便。原因是插件<code>hexo-blog-encrypt</code>给<code>toc</code>添加了<code>display inline</code> (如下图)，导致没办法滚动。</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20221205174756809.png' width=300px>
</div>
<p>未加密的应该是这样的：</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20221205174950598.png' width=300px>
</div>
<p>尝试修改插件：</p>
<p>找到需要修改的文件：<code>node_modules/hexo-blog-encrypt/lib/hbe.js</code>。然后注释这一段代码：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// document.getElementById('hexo-blog-encrypt').style.display = 'inline';</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>把这两句代码中的<code>display = 'inline'</code>，改为<code>display = ''</code>。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// TOC part</span>
<span class="token keyword">var</span> tocDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"toc-div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>tocDiv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  tocDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">var</span> tocDivs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'toc-div-class'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>tocDivs <span class="token operator">&amp;&amp;</span> tocDivs<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> idx <span class="token operator">&lt;</span> tocDivs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> idx<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    tocDivs<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>然后就成功了！</p>
<p>自主修改<code>hbe.js</code>文件完整版：</p>
<details class="toggle" style="border: 1px solid black"><summary class="toggle-button" style="background-color: black;color: white">解决加密文章toc无法滚动的问题</summary><div class="toggle-content"><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//node_modules/hexo-blog-encrypt/lib/hbe.js</span>

<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token string">'use strict'</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> cryptoObj <span class="token operator">=</span> window<span class="token punctuation">.</span>crypto <span class="token operator">||</span> window<span class="token punctuation">.</span>msCrypto<span class="token punctuation">;</span>
  <span class="token keyword">const</span> storage <span class="token operator">=</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">;</span>

  <span class="token keyword">const</span> storageName <span class="token operator">=</span> <span class="token string">'hexo-blog-encrypt:#'</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">;</span>
  <span class="token keyword">const</span> keySalt <span class="token operator">=</span> <span class="token function">textToArray</span><span class="token punctuation">(</span><span class="token string">'hexo-blog-encrypt的作者们都是大帅比!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> ivSalt <span class="token operator">=</span> <span class="token function">textToArray</span><span class="token punctuation">(</span><span class="token string">'hexo-blog-encrypt是地表最强Hexo加密插件!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// As we can't detect the wrong password with AES-CBC,</span>
<span class="token comment">// so adding an empty div and check it when decrption.</span>
<span class="token keyword">const</span> knownPrefix <span class="token operator">=</span> <span class="token string">"&lt;hbe-prefix>&lt;/hbe-prefix>"</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> mainElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'hexo-blog-encrypt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> wrongPassMessage <span class="token operator">=</span> mainElement<span class="token punctuation">.</span>dataset<span class="token punctuation">[</span><span class="token string">'wpm'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> wrongHashMessage <span class="token operator">=</span> mainElement<span class="token punctuation">.</span>dataset<span class="token punctuation">[</span><span class="token string">'whm'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> dataElement <span class="token operator">=</span> mainElement<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'hbeData'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> encryptedData <span class="token operator">=</span> dataElement<span class="token punctuation">.</span>innerText<span class="token punctuation">;</span>
  <span class="token keyword">const</span> HmacDigist <span class="token operator">=</span> dataElement<span class="token punctuation">.</span>dataset<span class="token punctuation">[</span><span class="token string">'hmacdigest'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">hexToArray</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\da-f]&#123;2&#125;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">h</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">function</span> <span class="token function">textToArray</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> i <span class="token operator">=</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ba <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">var</span> c <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">codePointAt</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">&lt;</span> <span class="token number">128</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        ba<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
        j<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">></span> <span class="token number">127</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>c <span class="token operator">&lt;</span> <span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        ba<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>c <span class="token operator">>></span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">192</span><span class="token punctuation">;</span>
        ba<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>c <span class="token operator">&amp;</span> <span class="token number">63</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">128</span><span class="token punctuation">;</span>
        j<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">></span> <span class="token number">2047</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>c <span class="token operator">&lt;</span> <span class="token number">65536</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        ba<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>c <span class="token operator">>></span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">224</span><span class="token punctuation">;</span>
        ba<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">>></span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">63</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">128</span><span class="token punctuation">;</span>
        ba<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>c <span class="token operator">&amp;</span> <span class="token number">63</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">128</span><span class="token punctuation">;</span>
        j<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        ba<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>c <span class="token operator">>></span> <span class="token number">18</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">240</span><span class="token punctuation">;</span>
        ba<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">>></span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">63</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">128</span><span class="token punctuation">;</span>
        ba<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">>></span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">63</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">128</span><span class="token punctuation">;</span>
        ba<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>c <span class="token operator">&amp;</span> <span class="token number">63</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">128</span><span class="token punctuation">;</span>
        j <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>ba<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">function</span> <span class="token function">arrayBufferToHex</span><span class="token punctuation">(</span><span class="token parameter">arrayBuffer</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> arrayBuffer <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> arrayBuffer <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> arrayBuffer<span class="token punctuation">.</span>byteLength <span class="token operator">!==</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'Expected input to be an ArrayBuffer'</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">var</span> view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>arrayBuffer<span class="token punctuation">)</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token keyword">var</span> value

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> view<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      value <span class="token operator">=</span> view<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
      result <span class="token operator">+=</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'0'</span> <span class="token operator">+</span> value <span class="token operator">:</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">return</span> result
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getExecutableScript</span><span class="token punctuation">(</span><span class="token parameter">oldElem</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> out <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> attList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">,</span> <span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'crossorigin'</span><span class="token punctuation">,</span> <span class="token string">'defer'</span><span class="token punctuation">,</span> <span class="token string">'referrerpolicy'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    attList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">att</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>oldElem<span class="token punctuation">[</span>att<span class="token punctuation">]</span><span class="token punctuation">)</span>
        out<span class="token punctuation">[</span>att<span class="token punctuation">]</span> <span class="token operator">=</span> oldElem<span class="token punctuation">[</span>att<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> out<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">convertHTMLToElement</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> out <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    out<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> content<span class="token punctuation">;</span>
    out<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      elem<span class="token punctuation">.</span><span class="token function">replaceWith</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getExecutableScript</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> out<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">function</span> <span class="token function">getKeyMaterial</span><span class="token punctuation">(</span><span class="token parameter">password</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> encoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> cryptoObj<span class="token punctuation">.</span>subtle<span class="token punctuation">.</span><span class="token function">importKey</span><span class="token punctuation">(</span>
      <span class="token string">'raw'</span><span class="token punctuation">,</span>
      encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span>
        <span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token string">'PBKDF2'</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span>
        <span class="token string">'deriveKey'</span><span class="token punctuation">,</span>
        <span class="token string">'deriveBits'</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">function</span> <span class="token function">getHmacKey</span><span class="token punctuation">(</span><span class="token parameter">keyMaterial</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> cryptoObj<span class="token punctuation">.</span>subtle<span class="token punctuation">.</span><span class="token function">deriveKey</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      <span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token string">'PBKDF2'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'hash'</span><span class="token operator">:</span> <span class="token string">'SHA-256'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'salt'</span><span class="token operator">:</span> keySalt<span class="token punctuation">.</span>buffer<span class="token punctuation">,</span>
      <span class="token string-property property">'iterations'</span><span class="token operator">:</span> <span class="token number">1024</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> keyMaterial<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
      <span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token string">'HMAC'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'hash'</span><span class="token operator">:</span> <span class="token string">'SHA-256'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'length'</span><span class="token operator">:</span> <span class="token number">256</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token string">'verify'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">function</span> <span class="token function">getDecryptKey</span><span class="token punctuation">(</span><span class="token parameter">keyMaterial</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> cryptoObj<span class="token punctuation">.</span>subtle<span class="token punctuation">.</span><span class="token function">deriveKey</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      <span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token string">'PBKDF2'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'hash'</span><span class="token operator">:</span> <span class="token string">'SHA-256'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'salt'</span><span class="token operator">:</span> keySalt<span class="token punctuation">.</span>buffer<span class="token punctuation">,</span>
      <span class="token string-property property">'iterations'</span><span class="token operator">:</span> <span class="token number">1024</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> keyMaterial<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
      <span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token string">'AES-CBC'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'length'</span><span class="token operator">:</span> <span class="token number">256</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token string">'decrypt'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">function</span> <span class="token function">getIv</span><span class="token punctuation">(</span><span class="token parameter">keyMaterial</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> cryptoObj<span class="token punctuation">.</span>subtle<span class="token punctuation">.</span><span class="token function">deriveBits</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      <span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token string">'PBKDF2'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'hash'</span><span class="token operator">:</span> <span class="token string">'SHA-256'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'salt'</span><span class="token operator">:</span> ivSalt<span class="token punctuation">.</span>buffer<span class="token punctuation">,</span>
      <span class="token string-property property">'iterations'</span><span class="token operator">:</span> <span class="token number">512</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> keyMaterial<span class="token punctuation">,</span> <span class="token number">16</span> <span class="token operator">*</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">verifyContent</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> encoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> encoded <span class="token operator">=</span> encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> signature <span class="token operator">=</span> <span class="token function">hexToArray</span><span class="token punctuation">(</span>HmacDigist<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> cryptoObj<span class="token punctuation">.</span>subtle<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      <span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token string">'HMAC'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'hash'</span><span class="token operator">:</span> <span class="token string">'SHA-256'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> signature<span class="token punctuation">,</span> encoded<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Verification result: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>result<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>wrongHashMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>wrongHashMessage<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">, got </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> signature<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> but proved wrong.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">decrypt</span><span class="token punctuation">(</span><span class="token parameter">decryptKey<span class="token punctuation">,</span> iv<span class="token punctuation">,</span> hmacKey</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> typedArray <span class="token operator">=</span> <span class="token function">hexToArray</span><span class="token punctuation">(</span>encryptedData<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> cryptoObj<span class="token punctuation">.</span>subtle<span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      <span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token string">'AES-CBC'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'iv'</span><span class="token operator">:</span> iv<span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> decryptKey<span class="token punctuation">,</span> typedArray<span class="token punctuation">.</span>buffer<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> decoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> decoded <span class="token operator">=</span> decoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// check the prefix, if not then we can sure here is wrong password.</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>decoded<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>knownPrefix<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">throw</span> <span class="token string">"Decode successfully but not start with KnownPrefix."</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>

      <span class="token keyword">const</span> hideButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      hideButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Encrypt again'</span><span class="token punctuation">;</span>
      hideButton<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'button'</span><span class="token punctuation">;</span>
      hideButton<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hbe-button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      hideButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>storageName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// document.getElementById('hexo-blog-encrypt').style.display = 'inline';</span>
      document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'hexo-blog-encrypt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'hexo-blog-encrypt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">convertHTMLToElement</span><span class="token punctuation">(</span>decoded<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'hexo-blog-encrypt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>hideButton<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// support html5 lazyload functionality.</span>
      document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"data-src"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>elem<span class="token punctuation">.</span>src<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          elem<span class="token punctuation">.</span>src <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-src'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// support theme-next refresh</span>
      window<span class="token punctuation">.</span>NexT <span class="token operator">&amp;&amp;</span> NexT<span class="token punctuation">.</span>boot <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> NexT<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>refresh <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> NexT<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// TOC part</span>
      <span class="token keyword">var</span> tocDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"toc-div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>tocDiv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        tocDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>

      <span class="token keyword">var</span> tocDivs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'toc-div-class'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>tocDivs <span class="token operator">&amp;&amp;</span> tocDivs<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> idx <span class="token operator">&lt;</span> tocDivs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> idx<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          tocDivs<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span>

      <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">verifyContent</span><span class="token punctuation">(</span>hmacKey<span class="token punctuation">,</span> decoded<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>wrongPassMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> result<span class="token punctuation">;</span>

  <span class="token punctuation">&#125;</span>

  <span class="token keyword">function</span> <span class="token function">hbeLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">const</span> oldStorageData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>storage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>storageName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldStorageData<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Password got from localStorage(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>storageName<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">): </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> oldStorageData<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> sIv <span class="token operator">=</span> <span class="token function">hexToArray</span><span class="token punctuation">(</span>oldStorageData<span class="token punctuation">.</span>iv<span class="token punctuation">)</span><span class="token punctuation">.</span>buffer<span class="token punctuation">;</span>
      <span class="token keyword">const</span> sDk <span class="token operator">=</span> oldStorageData<span class="token punctuation">.</span>dk<span class="token punctuation">;</span>
      <span class="token keyword">const</span> sHmk <span class="token operator">=</span> oldStorageData<span class="token punctuation">.</span>hmk<span class="token punctuation">;</span>

      cryptoObj<span class="token punctuation">.</span>subtle<span class="token punctuation">.</span><span class="token function">importKey</span><span class="token punctuation">(</span><span class="token string">'jwk'</span><span class="token punctuation">,</span> sDk<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
        <span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token string">'AES-CBC'</span><span class="token punctuation">,</span>
        <span class="token string-property property">'length'</span><span class="token operator">:</span> <span class="token number">256</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token string">'decrypt'</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dkCK</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        cryptoObj<span class="token punctuation">.</span>subtle<span class="token punctuation">.</span><span class="token function">importKey</span><span class="token punctuation">(</span><span class="token string">'jwk'</span><span class="token punctuation">,</span> sHmk<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
          <span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token string">'HMAC'</span><span class="token punctuation">,</span>
          <span class="token string-property property">'hash'</span><span class="token operator">:</span> <span class="token string">'SHA-256'</span><span class="token punctuation">,</span>
          <span class="token string-property property">'length'</span><span class="token operator">:</span> <span class="token number">256</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
          <span class="token string">'verify'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">hmkCK</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
          <span class="token function">decrypt</span><span class="token punctuation">(</span>dkCK<span class="token punctuation">,</span> sIv<span class="token punctuation">,</span> hmkCK<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
              storage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>storageName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    mainElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>isComposing <span class="token operator">||</span> event<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">13</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> password <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'hbePass'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        <span class="token keyword">const</span> keyMaterial <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getKeyMaterial</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> hmacKey <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getHmacKey</span><span class="token punctuation">(</span>keyMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> decryptKey <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getDecryptKey</span><span class="token punctuation">(</span>keyMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> iv <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getIv</span><span class="token punctuation">(</span>keyMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">decrypt</span><span class="token punctuation">(</span>decryptKey<span class="token punctuation">,</span> iv<span class="token punctuation">,</span> hmacKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Decrypt result: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>result<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            cryptoObj<span class="token punctuation">.</span>subtle<span class="token punctuation">.</span><span class="token function">exportKey</span><span class="token punctuation">(</span><span class="token string">'jwk'</span><span class="token punctuation">,</span> decryptKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dk</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
              cryptoObj<span class="token punctuation">.</span>subtle<span class="token punctuation">.</span><span class="token function">exportKey</span><span class="token punctuation">(</span><span class="token string">'jwk'</span><span class="token punctuation">,</span> hmacKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">hmk</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">const</span> newStorageData <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
                  <span class="token string-property property">'dk'</span><span class="token operator">:</span> dk<span class="token punctuation">,</span>
                  <span class="token string-property property">'iv'</span><span class="token operator">:</span> <span class="token function">arrayBufferToHex</span><span class="token punctuation">(</span>iv<span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token string-property property">'hmk'</span><span class="token operator">:</span> hmk<span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
                storage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>storageName<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>newStorageData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token function">hbeLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</div></details>
<h3 id="56-上传本地pdf并在线预览"><a class="markdownIt-Anchor" href="#56-上传本地pdf并在线预览"></a> 5.6 上传本地pdf并在线预览</h3>
<p>安装插件</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cnpm i hexo-pdf <span class="token parameter variable">-S</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果是网上的pdf，参考格式：</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% pdf http://www.u.arizona.edu/~compitel/marston.pdf %&#125; <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果直接在想添加的页面中 (md 文件) 添加pdf，就以网页标签的格式写代码：</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>embed</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>700<span class="token punctuation">'</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>650<span class="token punctuation">'</span></span> <span class="token attr-name">fullscreen</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>yes<span class="token punctuation">'</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>http://www.u.arizona.edu/~compitel/marston.pdf<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>点击打开pdf文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>embed</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>对于<span style='color:red'>本地的pdf文件</span>，在搭建好的hexo博客的根目录的<code>blog/source</code>文件夹下新建一个文件夹，如<code>local_file</code>（用来存pdf文件。参考格式：</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% pdf '/local_file/test.pdf' %&#125; <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果要让pdf文件在一个新的页面打开，参考下面的代码：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/local_file/test.pdf<span class="token punctuation">'</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>_blank<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>点击这里在新的网页打开pdf文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>注意，要先执行<code>hexo d</code>命令将本地的pdf文件上传到<code>github</code>上，然后pdf文件才能显示在网站上！这里我们就不难发现，github的仓库充当的是远程服务器的作用！</p>
<p>参考：<a target="_blank" rel="noopener" href="https://github.com/superalsrk/hexo-pdf">https://github.com/superalsrk/hexo-pdf</a></p>
<h3 id="57-引用本地文件的链接"><a class="markdownIt-Anchor" href="#57-引用本地文件的链接"></a> 5.7 引用本地文件的链接</h3>
<p>其实不只是pdf文件，其他文件也可以上传到github上，并且在文章中直接引用的。可以在根目录下创建自己的文件夹，比如说<code>my_folder</code>，然后在这个文件夹下创建一个文档<code>test.txt</code>。那么通过以下代码就可以直接插入到网站上面了：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/my_folder/test.txt<span class="token punctuation">'</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>_blank<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>test文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>区别不过是，如果引用的是pdf文件，就能直接打开一个新页面并进行文件预览。如果是其他格式的文件，浏览器默认为我们把文件下载到本地。</p>
<h3 id="58-归档计数"><a class="markdownIt-Anchor" href="#58-归档计数"></a> 5.8 归档计数</h3>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> hexo-generator-index
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> hexo-generator-archive<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>然后在博客站点配置文件<code>blog/_config.yml</code>中更改：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">index_generator</span><span class="token punctuation">:</span>
  <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">''</span>
  <span class="token key atrule">per_page</span><span class="token punctuation">:</span> <span class="token number">10</span>
  <span class="token key atrule">order_by</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>date
<span class="token comment"># 归档页面</span>
<span class="token key atrule">archive_generator</span><span class="token punctuation">:</span>
  <span class="token key atrule">per_page</span><span class="token punctuation">:</span> <span class="token number">50</span>
  <span class="token key atrule">yearly</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">monthly</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token comment">#效果，首页每间隔10篇文章就分页，归档页每间隔50篇文章才分页。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="59-mermaid"><a class="markdownIt-Anchor" href="#59-mermaid"></a> 5.9 mermaid</h3>
<p>这个<a href='https://butterfly.js.org/posts/4aa8abbe/#inlineImg' target='_blank'>博主</a>介绍了一些标签外挂功能，可以按需索取：</p>
<blockquote>
<p><code>mermaid</code>标签不允许嵌套于一些隐藏属性的标签外挂，例如: <code>tag-hide</code>内的标签外挂和<code>tabs</code>标签外挂，这会导致<code>mermaid</code>图示无法正常显示，使用时请留意。</p>
<p>请不要压缩<code>html</code>代码，不然会导致<code>mermaid</code>显示异常</p>
</blockquote>
<p>使用<code>mermaid</code>标签可以绘制<code>Flowchart</code>（流程图）、<code>Sequence diagram</code>（时序图 ）、<code>Class Diagram</code>（类別图）、<code>State Diagram</code>（状态图）、<code>Gantt</code>（甘特图）和<code>Pie Chart</code>（圆形图），具体可以查看<a href='https://mermaid-js.github.io/mermaid/#/' target='_blank'>mermaid文檔</a>。</p>
<p>由于网页不支持直接显示<code>Markdown</code>中的<code>mermaid</code>语法，需要安装一个插件：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cnpm <span class="token function">install</span> <span class="token parameter variable">--save</span> hexo-filter-mermaid-diagrams<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后设置站点根目录：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># mermaid chart</span>
<span class="token key atrule">mermaid</span><span class="token punctuation">:</span> <span class="token comment">## mermaid url https://github.com/knsv/mermaid</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># default true</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"7.1.2"</span> <span class="token comment"># default v7.1.2</span>
  <span class="token key atrule">options</span><span class="token punctuation">:</span>  <span class="token comment"># find more api options from https://github.com/knsv/mermaid/blob/master/src/mermaidAPI.js</span>
    <span class="token comment">#startOnload: true  // default true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>最后一步需要对<code>js</code>文件进行修改，需要修改的文件为<code>footer.swig</code>或者<code>footer.pug</code>或者<code>footer.ejs</code>或者</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">&#x2F;&#x2F;footer.swig
&#123;% if theme.mermaid.enable %&#125;
  &lt;script src&#x3D;&#39;https:&#x2F;&#x2F;unpkg.com&#x2F;mermaid@&#123;&#123; theme.mermaid.version &#125;&#125;&#x2F;dist&#x2F;mermaid.min.js&#39;&gt;&lt;&#x2F;script&gt;
  &lt;script&gt;
    if (window.mermaid) &#123;
      mermaid.initialize(&#123;&#123; JSON.stringify(theme.mermaid.options) &#125;&#125;);
    &#125;
  &lt;&#x2F;script&gt;
&#123;% endif %&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs">//- footer.pug
if theme.mermaid.enable == true
  script(type='text/javascript', id='maid-script' mermaidoptioins=theme.mermaid.options src='https://unpkg.com/mermaid@'+ theme.mermaid.version + '/dist/mermaid.min.js' + '?v=' + theme.version)
  script.
    if (window.mermaid) &#123;
      var options = JSON.parse(document.getElementById('maid-script').getAttribute('mermaidoptioins'));
      mermaid.initialize(options);
    &#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token comment">&lt;!-- footer.ejs --></span>
<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>mermaid<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>https://unpkg.com/mermaid@<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>mermaid<span class="token punctuation">.</span>version </span><span class="token delimiter punctuation">%></span></span>/dist/mermaid.min.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>mermaid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      mermaid<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">theme</span><span class="token operator">:</span> <span class="token string">'forest'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>例子</p>
<pre class="mermaid">pie title 日常支出
	"衣" : 100
	"食" : 200
	"住" : 200
	"行" : 200</pre>
<pre class="mermaid">flowchart LR
	1 --> 2 x--x 3 --- 4 <--> 5</pre>
<pre class="mermaid">stateDiagram-v2
[*] --> Still
Still --> [*]
Still --> Moving
Moving --> Still
Moving --> Crash
Crash --> [*]</pre>
<h3 id="510-插入视频"><a class="markdownIt-Anchor" href="#510-插入视频"></a> 5.10 插入视频</h3>
<p>首先安装插件：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cnpm i hexo-tag-aplayer <span class="token parameter variable">--save</span>
cnpm i hexo-tag-dplayer <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>然后写代码：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>center<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span> <span class="token attr-name">autoplay</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>autoplay<span class="token punctuation">"</span></span> <span class="token attr-name">controls</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>controls<span class="token punctuation">"</span></span> <span class="token attr-name">allowfullscreen</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/local_video/各省GDP排行榜.mp4<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video/mp4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>对于B站视频而言，在网页端获取分享链接，然后直接粘贴进markdown文件即可（如下图）。</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211027-24.jpg' height=400px>
</div>
<p>当然这种方式生成的视频无法控制其大小和位置，因此我这么写：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>center<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>
 	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>//player.bilibili.com/player.html?aid=799951124&amp;bvid=BV1ey4y1b7GA&amp;cid=320466524&amp;page=1<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span>600px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">scrolling</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no<span class="token punctuation">"</span></span> <span class="token attr-name">framespacing</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">allowfullscreen</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>效果如下图：</p>
<p align='center'>
 	<iframe src="//player.bilibili.com/player.html?aid=799951124&bvid=BV1ey4y1b7GA&cid=320466524&page=1" style="width:100%; height:600px;" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>
</p>
<p>至于来自其他视频网站的资源如何挂在自己的博客上，需要自己慢慢摸索了，不一一列举。</p>
<p>Safari上出现问题的原因可以参考这篇文章：<a href='https://www.jianshu.com/p/fecdec504ab0?from=singlemessage' target='_blank'>修复video标签在safari中无法播放mp4视频的问题</a>。</p>
<h2 id="6-butterfly主题"><a class="markdownIt-Anchor" href="#6-butterfly主题"></a> 6 butterfly主题</h2>
<p><a target="_blank" rel="noopener" href='https://butterfly.js.org/posts/7670b080/' targer='_blank'>butterfly美化魔改教程合集</a></p>
<blockquote>
<p>注意：不要把个人需要的文件/图片放在主题<code>source</code>文件夹里，因为在升级主题的过程中，可能会把文件覆盖删除了。</p>
<p>在Hexo根目录的<code>source</code>文件夹里，创建一个文件夹来放置个人文件/图片。引用文件时直接写为<code>/文件夹名称/文件名</code>。这个技巧在配置主题文件时尤其要注意！</p>
</blockquote>
<h3 id="61-主题下载"><a class="markdownIt-Anchor" href="#61-主题下载"></a> 6.1 主题下载</h3>
<p>这是从大神的github仓库里把主题克隆到我们的博客网站目录<code>blog/themes/butterfly</code>下：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone <span class="token parameter variable">-b</span> master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>这个主题的模板引擎为<code>pug</code>格式的文件，因此需要安装对应的支持程序：(<span style='font-family:kaiti'>至于模板引擎文件是啥，可参考后面——不知道也无所谓</span>)</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cnpm <span class="token function">install</span> hexo-renderer-pug hexo-renderer-stylus <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>这里我经常会遇到一个问题：我的错误是 Cannot GET /，因此在public目录下寻找<code>index.html</code>是否存在。如果不存在，执行下面代码对其进行修复：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> audit fix<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>查看是否少了什么组件，通过<code>cnpm install hexo-xxx-xxx</code> 安装即可。</p>
<p>然后在博客站点配置文件<code>blog/_config.yml</code>中更改：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">theme</span><span class="token punctuation">:</span> butterfly<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>注意，themes后面的参数，要和主题所在的<span style='color:red'>文件夹名</span>一致！</p>
<h3 id="61a-网站主题的更新"><a class="markdownIt-Anchor" href="#61a-网站主题的更新"></a> 6.1a 网站主题的更新</h3>
<p>此部分仅对于已经配置好的用户参考。如果您是第一次使用本主题，请直接前往<a href='#6-2'>6.2</a>。</p>
<p>由于大多数主题都会定期更新，但是把自己原来的个性化修改内容重新在新版本上体现，又会浪费大量时间。这里总结一个相对节约时间、清晰明了的办法：利用github自带的compare功能。</p>
<p>首先fork更新的主题仓库，这样自己的github上就有了这个新的repository，然后把这个仓库clone到本地，然后命名为<code>Jerryc227</code>。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone git@github.com:dhndzwxj/hexo-theme-butterfly.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后将这个本地文件夹与原作者的仓库建立联系</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> remote <span class="token function">add</span> upstream git@github.com:jerryc127/hexo-theme-butterfly.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>接下来将自己的旧版本的主题文件拷贝并替换掉<code>Jerryc227</code>的原有内容，然后“三连”。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'主题更新'</span>
<span class="token function">git</span> push origin master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>这样自己fork掉的仓库的内容就成功更新了。最后将自己本地的修改同原作者的仓库做比较：</p>
<div align='center'>
    <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20230222141101773.png' width=650px>
</div>
<p><span id='6-2' style='color:white'>6-2</span></p>
<h3 id="62-网站背景"><a class="markdownIt-Anchor" href="#62-网站背景"></a> 6.2 网站背景</h3>
<p>默认显示白色，可设置图片或者颜色。</p>
<p>修改主题配置文件<code>blog/themes/butterfly/_config.yml</code></p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#圖片格式 url(http://xxxxxx.com/xxx.jpg)</span>
<span class="token comment">#顏色（HEX值/RGB值/顔色單詞/漸變色)</span>
<span class="token comment">#留空 不顯示背景</span>
background<span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>留意: 如果你的网站根目录不是<code>/</code>,使用本地图片时，需加上你的根目录。<br />
例如：网站是<code>https://yoursite.com/blog</code>,引用一张<code>img/xx.png</code>图片，则设置<code>background</code>为 <code>url(/blog/img/xx.png)</code></p>
<h3 id="63-字数统计"><a class="markdownIt-Anchor" href="#63-字数统计"></a> 6.3 字数统计</h3>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-wordcount <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>修改主题配置文件：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">wordcount</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">post_wordcount</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">min2read</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">total_wordcount</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如需调整右侧卡片网站信息内项目的数据，在文件<code>/butterfly/layout/includes/widgets/card_webinfo.pug</code>中操作。</p>
<h3 id="63a-文章meta信息"><a class="markdownIt-Anchor" href="#63a-文章meta信息"></a> 6.3a 文章meta信息</h3>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">post_meta</span><span class="token punctuation">:</span>
  <span class="token key atrule">page</span><span class="token punctuation">:</span> <span class="token comment"># Home Page</span>
		<span class="token punctuation">...</span>
  <span class="token key atrule">post</span><span class="token punctuation">:</span>
		<span class="token punctuation">...</span>
  <span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># true or false 文章頁是否顯示標籤</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>我发现即使将主题配置文件中如下tags设置为true，依然没有显示标签。检查后发现是缺少对应代码，在大概38行的位置添加如下代码：</p>
<pre class="line-numbers language-pug" data-language="pug"><code class="language-pug"><span class="token comment">//- \blog\themes\butterfly\layout\includes\header\post-info.pug</span>
<span class="token flow-control"><span class="token branch keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>post_meta<span class="token punctuation">.</span>post<span class="token punctuation">.</span>tags <span class="token operator">&amp;&amp;</span> page<span class="token punctuation">.</span>tags<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span></span>
  <span class="token tag">span<span class="token attr-class">.post-meta-tags</span></span>
    <span class="token tag">span<span class="token attr-class">.post-meta-separator</span></span> <span class="token plain-text">|</span>
    <span class="token flow-control"><span class="token each"><span class="token keyword">each</span> item<span class="token punctuation">,</span> index <span class="token keyword">in</span></span> page<span class="token punctuation">.</span>tags<span class="token punctuation">.</span>data</span>
      <span class="token tag">i<span class="token attr-class">.fas</span><span class="token attr-class">.fa-tag</span></span>
      <span class="token tag">a<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">href</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token function">url_for</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>path</span><span class="token punctuation">)</span></span></span>)<span class="token punctuation">.</span>article<span class="token punctuation">-</span>meta__tags #[<span class="token punctuation">=</span>item<span class="token punctuation">.</span>name]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意该<code>if</code>要和前面的<code>if (theme.post_meta.post.categories &amp;&amp; page.categories.data.length &gt; 0)</code>缩进相同。</p>
<blockquote>
<p>小结：各个特殊符号的含义</p>
<ul>
<li><code>#</code>：例如<code>#post-meta</code>，生成的HTML代码为<code>&lt;div id='post-meta'&gt;</code>。（不过会另起一行）</li>
<li><code>.</code>：例如<code>.meta-firstline</code>，生成的HTML代码为<code>&lt;div class='meta-firstline'&gt;</code>。</li>
<li><code>.</code>：<code>span.post-meta-author=page.author</code>，生成的HTML代码为<code>&lt;span class='post-meta-author'&gt;page.author代表的内容&lt;/span&gt;</code>。</li>
</ul>
</blockquote>
<p>若要把第一行的meta信息整体修改，下面是现成的代码[大概第8行]（对于author，我在其网页标签添加了id，<code>&lt;div id=&quot;post-meta-author&quot;&gt;</code>）</p>
<pre class="line-numbers language-pug" data-language="pug"><code class="language-pug"><span class="token comment">//- \blog\themes\butterfly\layout\includes\header\post-info.pug
  .meta-firstline
    if (theme.post_meta.post.author)
        i.fa-solid.fa-user
        span.post-meta-author=page.author
    if (theme.post_meta.post.date_type)
      span.post-meta-date
        if (theme.post_meta.post.author)
          span.post-meta-separator |
        if (theme.post_meta.post.date_type === 'both')
          i.far.fa-calendar-alt.fa-fw.post-meta-icon
          span.post-meta-label= _p('post.created')
          time.post-meta-date-created(datetime=date_xml(page.date) title=_p('post.created') + ' ' + full_date(page.date))=date(page.date, config.date_format)
          span.post-meta-separator |
          i.fas.fa-history.fa-fw.post-meta-icon
          span.post-meta-label= _p('post.updated')
          time.post-meta-date-updated(datetime=date_xml(page.updated) title=_p('post.updated') + ' ' + full_date(page.updated))=date(page.updated, config.date_format)
        else
          - let data_type_update = theme.post_meta.post.date_type === 'updated'
          - let date_type = data_type_update ? 'updated' : 'date'
          - let date_icon = data_type_update ? 'fas fa-history' :'far fa-calendar-alt'
          - let date_title = data_type_update ? _p('post.updated') : _p('post.created')
          i.fa-fw.post-meta-icon(class=date_icon)
          span.post-meta-label= date_title
          time(datetime=date_xml(page[date_type]) title=date_title + ' ' + full_date(page[date_type]))=date(page[date_type], config.date_format)    
    if (theme.post_meta.post.categories &amp;&amp; page.categories.data.length > 0)
      span.post-meta-categories
        if (theme.post_meta.post.date_type)
          span.post-meta-separator |
        each item, index in page.categories.data
          i.fas.fa-inbox.fa-fw.post-meta-icon
          a(href=url_for(item.path)).post-meta-categories #[=item.name]
          if (index &lt; page.categories.data.length - 1)
            i.fas.fa-angle-right.post-meta-separator</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>也在网站首页修改展示文章的meta[大概在第26行添加]</p>
<pre class="line-numbers language-pug" data-language="pug"><code class="language-pug"><span class="token comment">//- \blog\themes\butterfly\layout\includes\mixins\post-ui.pug
        if (theme.post_meta.page.author)
          span.post-meta-author
            i.fa-solid.fa-user
            span.post-meta-author=article.author
            span.article-meta-separator |</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="64-主页和文章页面侧边栏"><a class="markdownIt-Anchor" href="#64-主页和文章页面侧边栏"></a> 6.4 主页和文章页面侧边栏</h3>
<p>需要在文件<code>/butterfly/layout/includes/widgets/index.pug</code>中操作。我这里是去掉了文章页面的“最新文章”部分，于是我在读懂这段代码后，把“最新文章”和“广告”对应的两条代码删除了。此外，我也想让头像成为<code>sticky_layout</code>（随着网页滑动跟着走的效果），我的代码改成了下面的样子：</p>
<pre class="line-numbers language-pug" data-language="pug"><code class="language-pug"><span class="token comment">//- /butterfly/layout/includes/widgets/index.pug</span>

<span class="token tag"><span class="token attr-id">#aside-content</span><span class="token attr-class">.aside-content</span></span>
  <span class="token comment">//- post</span>
  <span class="token flow-control"><span class="token branch keyword">if</span> <span class="token function">is_post</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
    <span class="token comment">//- 如果是文章页面，下面对应的else应该指的是主页面</span>
    <span class="token punctuation">-</span><span class="token code"> <span class="token keyword">const</span> tocStyle <span class="token operator">=</span> page<span class="token punctuation">.</span>toc_style_simple</span>
    <span class="token punctuation">-</span><span class="token code"> <span class="token keyword">const</span> tocStyleVal <span class="token operator">=</span> tocStyle <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">||</span> tocStyle <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">?</span> tocStyle <span class="token operator">:</span> theme<span class="token punctuation">.</span>toc<span class="token punctuation">.</span>style_simple</span>
    <span class="token flow-control"><span class="token branch keyword">if</span> showToc <span class="token operator">&amp;&amp;</span> tocStyleVal</span>
      <span class="token tag"><span class="token attr-class">.sticky_layout</span></span>
        <span class="token keyword">include ./card_post_toc.pug</span>
    <span class="token flow-control"><span class="token branch keyword">else</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_author'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_announcement'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_top_self'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token tag"><span class="token attr-class">.sticky_layout</span></span>
        <span class="token flow-control"><span class="token branch keyword">if</span> showToc</span>
          <span class="token keyword">include ./card_post_toc.pug</span>
        <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_recent_post'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
        <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_ad'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
  <span class="token flow-control"><span class="token branch keyword">else</span></span>
    <span class="token comment">//- page</span>
    <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_author'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
    <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_announcement'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
    <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_top_self'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      </span>

    <span class="token tag"><span class="token attr-class">.sticky_layout</span></span>
      <span class="token flow-control"><span class="token branch keyword">if</span> showToc</span>
        <span class="token keyword">include ./card_post_toc.pug</span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_recent_post'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token comment">//- !=partial('includes/widget/card_ad', &#123;&#125;, &#123;cache: true&#125;)</span>
      <span class="token comment">//- !=partial('includes/widget/card_newest_comment', &#123;&#125;, &#123;cache: true&#125;)</span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_categories'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_tags'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token comment">//- !=partial('includes/widget/card_archives', &#123;&#125;, &#123;cache: true&#125;)</span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_webinfo'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_bottom_self'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>个人觉得<code>card_author</code>头像下面“文章”“标签”“分类”三个栏目没啥用，就把这个文件<code>butterfly/layout/includes/widget/card_author.pug</code>中的这些代码删掉，然后就有简洁的头像了~</p>
<pre class="line-numbers language-pug" data-language="pug"><code class="language-pug"><span class="token tag"><span class="token attr-class">.card-info-data</span><span class="token attr-class">.site-data</span><span class="token attr-class">.is-center</span></span>
  <span class="token tag">a<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">href</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token function">url_for</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>archive_dir</span><span class="token punctuation">)</span></span></span> <span class="token plain-text">+ '/')</span>
    <span class="token tag"><span class="token attr-class">.headline</span></span><span class="token punctuation">=</span><span class="token code"> <span class="token function">_p</span><span class="token punctuation">(</span><span class="token string">'aside.articles'</span><span class="token punctuation">)</span></span>
    <span class="token tag"><span class="token attr-class">.length-num</span></span><span class="token punctuation">=</span><span class="token code"> site<span class="token punctuation">.</span>posts<span class="token punctuation">.</span>length</span>
  <span class="token tag">a<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">href</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token function">url_for</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>tag_dir</span><span class="token punctuation">)</span></span></span> <span class="token plain-text">+ '/')</span>
    <span class="token tag"><span class="token attr-class">.headline</span></span><span class="token punctuation">=</span><span class="token code"> <span class="token function">_p</span><span class="token punctuation">(</span><span class="token string">'aside.tags'</span><span class="token punctuation">)</span></span>
    <span class="token tag"><span class="token attr-class">.length-num</span></span><span class="token punctuation">=</span><span class="token code"> site<span class="token punctuation">.</span>tags<span class="token punctuation">.</span>length</span>
  <span class="token tag">a<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">href</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token function">url_for</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>category_dir</span><span class="token punctuation">)</span></span></span> <span class="token plain-text">+ '/')</span>
    <span class="token tag"><span class="token attr-class">.headline</span></span><span class="token punctuation">=</span><span class="token code"> <span class="token function">_p</span><span class="token punctuation">(</span><span class="token string">'aside.categories'</span><span class="token punctuation">)</span> </span>
    <span class="token tag"><span class="token attr-class">.length-num</span></span><span class="token punctuation">=</span><span class="token code"> site<span class="token punctuation">.</span>categories<span class="token punctuation">.</span>length</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>此外，主页侧边栏“最新文章”、归档以及主页文章简介面上有图片，如果不想要这些图片，需要在主题配置文件下面的部分进行修改：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">cover</span><span class="token punctuation">:</span>
  <span class="token comment"># display the cover or not (是否顯示文章封面)</span>
  <span class="token key atrule">index_enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">aside_enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">archives_enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token comment"># the position of cover in home page (封面顯示的位置)</span>
  <span class="token comment"># left/right/both</span>
  <span class="token key atrule">position</span><span class="token punctuation">:</span> both
  <span class="token comment"># When cover is not set, the default cover is displayed (當沒有設置cover時，默認的封面顯示)</span>
  <span class="token key atrule">default_cover</span><span class="token punctuation">:</span> /private_img/banner2.gif
    <span class="token comment"># - https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>文章加密功能的设置，在文件<code>butterfly/layout/includes/widget/card_post_toc.pug</code>中进行编辑。</p>
<h3 id="65-文章置顶"><a class="markdownIt-Anchor" href="#65-文章置顶"></a> 6.5 文章置顶</h3>
<p>【推荐】<code>hexo-generator-index</code>从 2.0.0 开始，已经支持文章置顶功能。你可以直接在文章的<code>front-matter</code>区域里添加<code>sticky: 1</code>属性来把这篇文章置顶。<b>数值越大，置顶的优先级越大</b>。</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token front-matter-block"><span class="token punctuation">---</span>
<span class="token front-matter yaml language-yaml"><span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> title <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
<span class="token key atrule">author</span><span class="token punctuation">:</span> 揭晓
<span class="token key atrule">categories</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token null important">null</span>
  <span class="token punctuation">-</span> <span class="token null important">null</span>
  <span class="token punctuation">-</span> <span class="token null important">null</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token null important">null</span>
  <span class="token punctuation">-</span> <span class="token null important">null</span>
  <span class="token punctuation">-</span> <span class="token null important">null</span>
<span class="token key atrule">mathjax</span><span class="token punctuation">:</span>
<span class="token key atrule">abstract</span><span class="token punctuation">:</span> 这里有东西被加密了，需要输入密码查看哦。
<span class="token key atrule">message</span><span class="token punctuation">:</span> 您好，这里需要密码。
<span class="token key atrule">wrong_pass_message</span><span class="token punctuation">:</span> 抱歉，这个密码看着不太对，请再试试。
<span class="token key atrule">wrong_hash_message</span><span class="token punctuation">:</span> 抱歉，这个文章不能被纠正，不过您还是能看看解密后的内容。
<span class="token key atrule">typora-root-url</span><span class="token punctuation">:</span> images
<span class="token key atrule">abbrlink</span><span class="token punctuation">:</span> 
<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> date <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
<span class="token key atrule">sticky</span><span class="token punctuation">:</span>
<span class="token key atrule">description</span><span class="token punctuation">:</span>
password<span class="token punctuation">:</span></span>
<span class="token punctuation">---</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="66-目录折叠"><a class="markdownIt-Anchor" href="#66-目录折叠"></a> 6.6 目录折叠</h3>
<p>由于我个人的目录比较大，完全展开三级目录的话，右边栏就完全被目录铺满了。<code>butterfly</code>主题提供了目录可折叠的选项，只需要在主题配置文件<code>/butterfly/config.yml</code>设置：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">card_categories</span><span class="token punctuation">:</span> 
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token comment"># if set 0 will show all</span>
  <span class="token key atrule">expand</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># none/true/false</span>
  <span class="token key atrule">sort_order</span><span class="token punctuation">:</span> <span class="token comment"># Don't modify the setting unless you know how it works</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="67-本地搜索"><a class="markdownIt-Anchor" href="#67-本地搜索"></a> 6.7 本地搜索</h3>
<h4 id="671-主题v451原生功能"><a class="markdownIt-Anchor" href="#671-主题v451原生功能"></a> 6.7.1 主题v4.5.1原生功能</h4>
<p>插件安装</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-search <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>修改站点配置文件<code>_config.yml</code>, 添加以下内容</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">search</span><span class="token punctuation">:</span>
  <span class="token key atrule">path</span><span class="token punctuation">:</span> search.xml
  <span class="token key atrule">field</span><span class="token punctuation">:</span> post <span class="token comment">#默认post，将覆盖博客所有帖子；page，只覆盖博客所有页面；all所有</span>
  <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#若为false，则设置不搜索文章内容，只根据搜索标题</span>
  <span class="token key atrule">format</span><span class="token punctuation">:</span> html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>主题配置文件<code>/blog/themes/butterfly/_config.yml</code>如下修改：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Local search</span>
<span class="token key atrule">local_search</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">preload</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#預加載，開啟後，進入網頁後會自動加載搜索文件。關閉時，只有點擊搜索按鈕後，才會加載搜索文件</span>
  CDN<span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="672-原生搜索功能解读"><a class="markdownIt-Anchor" href="#672-原生搜索功能解读"></a> 6.7.2 原生搜索功能解读</h4>
<p>需要编辑的文件为主题下的：<code>themes/butterfly/source/js/search/local-search.js</code>。</p>
<p><a href='/1830845253.html#js_study' target='_blank'>基于butterfly下local-search文档解读的js学习笔记</a>。</p>
<p>通过阅读这个文件，我发现决定了<b>搜索结果的输出内容</b>的代码为：[大概在166行]</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>dataContent <span class="token operator">!==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                str <span class="token operator">+=</span> <span class="token string">'&lt;p class="search-result">'</span> <span class="token operator">+</span> pre <span class="token operator">+</span> matchContent <span class="token operator">+</span> post <span class="token operator">+</span> <span class="token string">'&lt;/p>'</span>
              <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>如果要自定义搜索结果样式（<span style='font-family:kaiti'>不推荐修改，因为加载速度会变慢</span>）最关键的一行代码为[大概在153行]：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">keywords<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">keyword</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>keyword<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">===</span><span class="token string">'#'</span> <span class="token operator">&amp;&amp;</span> keyword<span class="token punctuation">.</span>length<span class="token operator">></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        keyword <span class="token operator">=</span> keyword<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span> 
      <span class="token keyword">let</span> regexStr <span class="token operator">=</span> keyword
      <span class="token keyword">const</span> specialRegex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^\w\s]+</span><span class="token regex-delimiter">/</span></span> <span class="token comment">// match special characters</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>keyword<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> specialRegex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        regexStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\\</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>keyword<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">&#125;</span>
  matchContent <span class="token operator">=</span> matchContent<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span>keyword<span class="token punctuation">,</span> <span class="token string">'&lt;span class="search-keyword">'</span> <span class="token operator">+</span> keyword <span class="token operator">+</span> <span class="token string">'&lt;/span>'</span><span class="token punctuation">)</span>
  dataTitle <span class="token operator">=</span> dataTitle<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span>keyword<span class="token punctuation">,</span> <span class="token string">'&lt;span class="search-keyword">'</span> <span class="token operator">+</span> keyword <span class="token operator">+</span> <span class="token string">'&lt;/span>'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>由上述两段代码此可见，最关键的变量是<code>matchContent</code>（正文中包含关键词的部分），它是怎么定义的？[大概在151行]</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> matchContent <span class="token operator">=</span> dataContent<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>它由<code>dataContent</code>定义【<span style='font-family:kaiti'>范围是从start到end</span>】，<code>dataContent</code>又是怎么定义的？</p>
<div>
  <span style='color:red'> &#10003 [大概在第102行]</span>
</div>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> dataTitle <span class="token operator">=</span> data<span class="token punctuation">.</span>title <span class="token operator">?</span> data<span class="token punctuation">.</span>title<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span>  <span class="token comment">//获取标题</span>
<span class="token keyword">const</span> dataContent <span class="token operator">=</span> data<span class="token punctuation">.</span>content <span class="token operator">?</span> data<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;[^>]+></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span> <span class="token comment">//获取正文,其中【.replace(/&lt;[^>]+>/g, '')】去掉了网页标签（正则表达式的意思是去掉'&lt;>'中的内容）</span>
<span class="token keyword">const</span> dataUrl <span class="token operator">=</span> data<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token operator">?</span> data<span class="token punctuation">.</span>url <span class="token operator">:</span> <span class="token constant">GLOBAL_CONFIG</span><span class="token punctuation">.</span>root <span class="token operator">+</span> data<span class="token punctuation">.</span>url <span class="token comment">//获取链接</span>
<span class="token operator">+</span> <span class="token keyword">let</span> dataTags <span class="token operator">=</span> data<span class="token punctuation">.</span>tags <span class="token operator">?</span> data<span class="token punctuation">.</span>tags<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span>  <span class="token comment">//获取标签</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>这里定义了文章的标题<code>dataTitle</code>、正文内容<code>dataContent</code>、文章链接<code>dataUrl</code>。这三项内容都来自<code>data</code>变量的方法。而<code>data</code>的方法是怎么定义的？</p>
<div>
  <span style='color:red'> &#10003 在data方法里增加一个tags方法[大概在第59行] </span>
</div>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> t <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>DOMParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseFromString</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token string">'text/xml'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">await</span> t
			data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>a<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'entry'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent<span class="token punctuation">,</span>
          <span class="token literal-property property">content</span><span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent<span class="token punctuation">,</span>
          <span class="token literal-property property">url</span><span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent<span class="token punctuation">,</span>
<span class="token operator">+</span>         tags<span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'tags'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'tags'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><span id='back_selec' style='color:white'>back_selec</span></p>
<p>通过读<code>data</code>定义的代码，我们发现<code>querySelector</code>很关键！深入学习可以参考<a href='/1830845253.html#querySelector'>js学习笔记的相关内容</a>。</p>
<p>其实对于data变量的各个方法，其定义的根据来自插件<code>hexo-generator-search</code>生成的模板文件<code>/hexo-generator-search/templates/search.xml</code>。打开这个<code>search.xml</code>文件，我们就能看到<code>entry</code> <code>title</code> <code>url</code> <code>tags</code> <code>tag</code>这些奇怪的css选择器了。</p>
<h4 id="673-搜索结果对话框显示标签"><a class="markdownIt-Anchor" href="#673-搜索结果对话框显示标签"></a> 6.7.3 搜索结果对话框显示标签</h4>
<p>上面的<code>tags</code>行是参照<code>content</code>行添加的（url行末尾要加一个英文逗号，否则会报错）。因为一篇post的front-matter不一定包含<code>tags</code>和<code>content</code>，因此需要做一下是否有tags的判断（<code>&amp;&amp;</code>），否则会出错。</p>
<p>原版代码：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>dataContent <span class="token operator">!==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  str <span class="token operator">+=</span> <span class="token string">'&lt;p class="search-result">'</span> <span class="token operator">+</span> pre <span class="token operator">+</span> matchContent <span class="token operator">+</span> post <span class="token operator">+</span> <span class="token string">'&lt;/p>'</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<div>
  <span style='color:red'> &#10003 原版生成的搜索结果只显示标题和正文节选，没有标签tags，这里的魔改就是增加了这个内容。[大概在第191行]</span>
</div>
【这部分是反复修改的部分，也是标签搜索功能实现最为关键的地方】
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>dataContent <span class="token operator">!==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
<span class="token comment">//- 自定义开始：生成的搜索结果框里，加入显示tags</span>
<span class="token keyword">let</span> splitT <span class="token operator">=</span> <span class="token string">''</span> 
<span class="token comment">//- 第一步：下面是去掉dataTags里非汉字和字母（数字）的部分，然后用两个汉字分号'；；'把各个tags分隔开（保存在spliT变量里）</span>
<span class="token keyword">let</span> space <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>dataTags<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\S</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>dataTags<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> 
    <span class="token comment">// \S 匹配Unicode非空白</span>
    space <span class="token operator">=</span> <span class="token number">0</span>
    splitT <span class="token operator">=</span> splitT<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>dataTags<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>space<span class="token operator">===</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      splitT <span class="token operator">=</span> splitT <span class="token operator">+</span> <span class="token string">'；；'</span> 
      space <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token punctuation">&#125;</span> 
  <span class="token punctuation">&#125;</span>          
<span class="token punctuation">&#125;</span>
<span class="token comment">//去掉splitT末尾的双分号；；</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>splitT<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token keyword">let</span> l <span class="token operator">=</span> splitT<span class="token punctuation">.</span>length
  <span class="token keyword">if</span><span class="token punctuation">(</span>splitT<span class="token punctuation">[</span>l<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'；'</span> <span class="token operator">&amp;&amp;</span> l<span class="token operator">></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    splitT <span class="token operator">=</span> splitT<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>l<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">//- 第二步： highlight all keywords</span>
keywords<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">keyword</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>keyword<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'#'</span> <span class="token operator">&amp;</span> keyword<span class="token punctuation">.</span>length<span class="token operator">></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    keyword <span class="token operator">=</span> keyword<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 如果第一个字符为#且长度大于1，将关键词第一个#去掉后再匹配</span>
  <span class="token punctuation">&#125;</span>     
  splitT <span class="token operator">=</span> splitT<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>keyword<span class="token punctuation">,</span><span class="token string">"gi"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'&lt;span class="search-keyword">'</span> <span class="token operator">+</span> keyword <span class="token operator">+</span> <span class="token string">'&lt;/span>'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span> 

<span class="token comment">//- 第三步：由于第一步产生的为纯文本且包括双分号，此步骤去掉分号且加上fas fa-tag、控制字体（保存在splitTags里）</span>
<span class="token keyword">let</span> splitTags <span class="token operator">=</span> <span class="token string">'&lt;br/>&lt;i class="fas fa-tag">&lt;span style="font-family:times">'</span>
space <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>splitT<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>splitT<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'；'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    space <span class="token operator">=</span> <span class="token number">0</span>
    splitTags <span class="token operator">=</span> splitTags<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>splitT<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>space<span class="token operator">===</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      splitTags <span class="token operator">=</span> splitTags <span class="token operator">+</span> <span class="token string">'&lt;/span>&lt;/i>&amp;nbsp &amp;nbsp&lt;i class="fas fa-tag">&lt;span style="font-family:times">'</span>
      space <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>         
<span class="token punctuation">&#125;</span>
splitTags <span class="token operator">=</span> splitTags <span class="token operator">+</span> <span class="token string">'&lt;/span>&lt;/i>'</span>

post <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">S</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>splitT<span class="token punctuation">)</span> <span class="token operator">?</span>  post <span class="token operator">+</span> splitTags <span class="token operator">:</span> post  
<span class="token comment">//- 自定义结束</span>

  str <span class="token operator">+=</span> <span class="token string">'&lt;p class="search-result">'</span> <span class="token operator">+</span> pre <span class="token operator">+</span> matchContent <span class="token operator">+</span> post <span class="token operator">+</span> <span class="token string">'&lt;/p>'</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>效果如下：</p>
<div>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20230105100303659.png' width=600px>
</div>
<h4 id="674-按照标签搜索"><a class="markdownIt-Anchor" href="#674-按照标签搜索"></a> 6.7.4 按照标签搜索</h4>
<blockquote>
<p>【最终目标】搜索框输入的关键词，如果其第一个字符是<code>#</code>且<strong>关键词长度大于1</strong>，就进行<b>标签匹配</b>；否则和之前的搜索功能一样。</p>
<p>【准备工作】</p>
<p>需要编辑的文件为主题下的：<code>themes/butterfly/source/js/search/local-search.js</code>。</p>
<p>hexo-generator-search插件里负责搜索的js文件为<code>/hexo-generator-search/lib/json_generaotr.js</code>。该文件里面提供了获取帖子（posts）和页面（pages）标题（title）、内容（content）、标签（tags）、目录（categories）……，确实没有获取author的方法。不要随便添加，因为还要和<code>/hexo-generator-search/templates/search.xml</code>对应上！</p>
</blockquote>
<p>先读一下butterfly主题local-search的代码逻辑！大致分为以下几个步骤：</p>
<p>①搜索功能从大概96行<code>data.forEach(data =&gt; &#123;</code>开始。foreach()是一个遍历函数，用来遍历所有的帖子。遍历过程分为两个子步骤：第一，先看遍历的帖子的标题、正文、标签（tags是我自己加的）是否包含关键词，如果包含令isMatch=true,否则isMatich=false;【大概107-128行】第二，对于isMatch=true的帖子，在搜索框显示其内容【大概131-201行】。</p>
<p>②我的目的是，搜索框输入的关键词，如果其第一个字符是<code>#</code>且<strong>关键词长度大于1</strong>，就进行<b>标签匹配</b>；否则和之前的搜索功能一样。</p>
<p>③为了匹配标签，需要在<code>data.forEach(data =&gt; &#123;</code>部分新定义2个变量。[大概103行]</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> dataTags <span class="token operator">=</span> data<span class="token punctuation">.</span>tags <span class="token operator">?</span> data<span class="token punctuation">.</span>tags<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span>  <span class="token comment">//获取标签</span>
<span class="token keyword">let</span> indexTag <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>	<span class="token comment">//- +++添加标签定位变量</span>
<span class="token keyword">let</span> l_keywords <span class="token operator">=</span> keywords<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token comment">//- +++获取搜索关键词的长度</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>以及给data增加了一个tags方法：【前面已添加】</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">	data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>a<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'entry'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent<span class="token punctuation">,</span>
          <span class="token literal-property property">content</span><span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent<span class="token punctuation">,</span>
          <span class="token literal-property property">url</span><span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent<span class="token punctuation">,</span>
<span class="token operator">+</span>         tags<span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'tags'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'tags'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>主要是对下面这点代码进行魔改：【大概111行】</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">keywords<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">keyword<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  indexTitle <span class="token operator">=</span> dataTitle<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span>
  indexContent <span class="token operator">=</span> dataContent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>indexTitle <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> indexContent <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    isMatch <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>indexContent <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      indexContent <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      firstOccur <span class="token operator">=</span> indexContent
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>魔改之后是下面这个样子：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>dataTitle <span class="token operator">!==</span> <span class="token string">''</span> <span class="token operator">||</span> dataContent <span class="token operator">!==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  keywords<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">keyword<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>keywords<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'#'</span> <span class="token operator">&amp;&amp;</span> l_keywords <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> keywords<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">//- 最后一个判断条件修复了正文中'##'无法搜索的问题</span>
        <span class="token comment">//如果关键词第一个字符是#且长度大于1，那么进行tag搜索</span>
        keyword <span class="token operator">=</span> keyword<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 将关键词第一个#去掉后再匹配</span>
        <span class="token comment">//- 定义dataTags0的意义：去掉tags里面的网页标签代码，否则会把网页标签里面的代码（非正文内容）也匹配</span>
        <span class="token keyword">let</span> dataTags0 <span class="token operator">=</span> <span class="token string">''</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>dataTags<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
          dataTags0 <span class="token operator">=</span> dataTags0<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>dataTags<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;[^>]+></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
        dataTags0 <span class="token operator">=</span> dataTags0<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        indexTag <span class="token operator">=</span> dataTags0<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> indexTag <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
          isMatch <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
          firstOccur <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        indexTitle <span class="token operator">=</span> dataTitle<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span>
        indexContent <span class="token operator">=</span> dataContent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>indexTitle <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> indexContent <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          isMatch <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>indexContent <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            indexContent <span class="token operator">=</span> <span class="token number">0</span>
          <span class="token punctuation">&#125;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            firstOccur <span class="token operator">=</span> indexContent
          <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
  isMatch <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="67a-3-hexo主题的本地搜索"><a class="markdownIt-Anchor" href="#67a-3-hexo主题的本地搜索"></a> 6.7a 3-hexo主题的本地搜索</h3>
<p>主题项目地址：<a target="_blank" rel="noopener" href="https://github.com/yelog/hexo-theme-3-hexo">https://github.com/yelog/hexo-theme-3-hexo</a>。</p>
<p>搜索效果:</p>
<table>
  <tr>
  <td><img src='http://img.saodiyang.com/FhbFRRPIDuz1pEKH-dr-RWDHVvXn.gif' width=300px>
    <p align='center' style='font-family:kaiti'>通过作者搜索</p></td>
  <td><img src='http://img.saodiyang.com/FoJsDnsoLWKo7ECSzcLmzUX_uWgw.gif' width=300px>
    <p align='center' style='font-family:kaiti'>通过标签搜索</p></td>
  </tr>
</table>
<p>实现搜索功能的关键代码：</p>
<details class="toggle" style="border: 1px solid black"><summary class="toggle-button" style="background-color: black;color: white">ejs和js代码</summary><div class="toggle-content"><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title-list-nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> site<span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">post<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  </span><span class="token delimiter punctuation">%></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">.</span>hidden <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>top<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></span><span class="token delimiter punctuation">%></span></span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top<span class="token punctuation">"</span></span><span class="token attr-name"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"><span class="token punctuation">&#125;</span></span><span class="token delimiter punctuation">%></span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string">'all_articles'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span> <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> post<span class="token punctuation">.</span>categories<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">category<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript">category<span class="token punctuation">.</span>name</span><span class="token delimiter punctuation">%></span></span> <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span>
       <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>path<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span>
       <span class="token attr-name">data-tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> post<span class="token punctuation">.</span>tags<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript">tag<span class="token punctuation">.</span>name</span><span class="token delimiter punctuation">%></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span>post<span class="token punctuation">.</span>tags<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></span><span class="token delimiter punctuation">%></span></span>,<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span>
       <span class="token attr-name">data-author</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span><span class="token punctuation">(</span>theme<span class="token punctuation">.</span>author <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span>author<span class="token punctuation">.</span>on<span class="token operator">==</span><span class="token boolean">true</span> <span class="token operator">&amp;&amp;</span> post<span class="token punctuation">.</span>author<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span><span class="token delimiter punctuation">%></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript">post<span class="token punctuation">.</span>author </span><span class="token delimiter punctuation">%></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"><span class="token punctuation">&#125;</span></span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-title<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript">post<span class="token punctuation">.</span>title </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript">post<span class="token punctuation">.</span>title </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-date<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> <span class="token function">date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH:mm:ss'</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> <span class="token function">date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">,</span> <span class="token string">'YYYY/MM/DD'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-item-tips<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// /source/js/script.js</span>
$searchInput<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">inputChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$searchInput<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">inputChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*根据搜索条件，过滤文章列表*/</span>
<span class="token keyword">function</span> <span class="token function">inputChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> i<span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        $searchInput<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> val <span class="token operator">=</span> $searchInput<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#search-panel'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">siblings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    $outlineList<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#local-search-result'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span>length<span class="token operator">></span><span class="token number">3</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'in:'</span> <span class="token operator">||</span> val<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">===</span><span class="token string">'in：'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            $outlineList<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#title-list-nav'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#local-search-result'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">searchAll</span><span class="token punctuation">(</span>val<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#title-list-nav'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#local-search-result'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        $outlineList<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#title-list-nav'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">var</span> categories <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".nav-left ul li>div.active"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">'rel'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'&lt;--->'</span><span class="token punctuation">)</span>
    <span class="token comment">// 处理特殊字符</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> categories<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        categories<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span>  categories<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
          <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?=\/|\\|#|\(|\)|\[|\]|\.)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"\\"</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">var</span> activeTitle <span class="token operator">=</span> categories<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> searchType <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> containType <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#no-item-tips'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".nav-right nav a .post-title .search-keyword"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".nav-right nav a"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"display"</span><span class="token punctuation">,</span> <span class="token string">"none"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".nav-right nav a."</span> <span class="token operator">+</span> activeTitle<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"display"</span><span class="token punctuation">,</span> <span class="token string">"block"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"#"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        searchType <span class="token operator">=</span> <span class="token string">'标签'</span>
        containType <span class="token operator">=</span> <span class="token string">'为'</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".nav-right nav a"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"display"</span><span class="token punctuation">,</span> <span class="token string">"none"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".nav-right nav"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"a."</span> <span class="token operator">+</span> activeTitle <span class="token operator">+</span> <span class="token string">":contains_tag('"</span> <span class="token operator">+</span> val<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"')"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"display"</span><span class="token punctuation">,</span> <span class="token string">"block"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"@"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        searchType <span class="token operator">=</span> <span class="token string">'作者'</span>
        containType<span class="token operator">=</span> <span class="token string">'为'</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".nav-right nav a"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"display"</span><span class="token punctuation">,</span> <span class="token string">"none"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".nav-right nav"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"a."</span> <span class="token operator">+</span> activeTitle <span class="token operator">+</span> <span class="token string">":contains_author('"</span> <span class="token operator">+</span> val<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"')"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"display"</span><span class="token punctuation">,</span> <span class="token string">"block"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        searchType <span class="token operator">=</span> <span class="token string">'标题'</span>
        containType <span class="token operator">=</span> <span class="token string">'包含'</span>
        <span class="token comment">// $(".nav-right nav a").css("display", "none");</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".nav-right nav"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"a."</span> <span class="token operator">+</span> activeTitle <span class="token operator">+</span> <span class="token string">":"</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#search-panel > .icon-case-sensitive'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">'active'</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'containsSensitive'</span> <span class="token operator">:</span> <span class="token string">'contains'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"('"</span> <span class="token operator">+</span> val <span class="token operator">+</span> <span class="token string">"')"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"display"</span><span class="token punctuation">,</span> <span class="token string">"block"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".nav-right nav a"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">var</span> title <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token string">'.post-title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> categories<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span>categories<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'display'</span><span class="token punctuation">,</span> <span class="token string">'none'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token string">'.post-title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>

            <span class="token keyword">var</span> caseSensitive <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#search-panel > .icon-case-sensitive'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">'active'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> vals <span class="token operator">=</span> <span class="token punctuation">(</span>caseSensitive <span class="token operator">?</span> val <span class="token operator">:</span> val<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> inputReg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>vals<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'[\\s\\S]*'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>inputReg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>caseSensitive <span class="token operator">?</span> title <span class="token operator">:</span> title<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token comment">// 给匹配到的字符添加高亮</span>
                <span class="token keyword">var</span> nowPos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> titleHtml <span class="token operator">=</span> title<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
                <span class="token keyword">var</span> titleCase <span class="token operator">=</span> <span class="token punctuation">(</span>caseSensitive <span class="token operator">?</span> title <span class="token operator">:</span> title<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vals<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    nowPos <span class="token operator">=</span> titleCase<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>vals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nowPos<span class="token punctuation">)</span>
                    titleHtml<span class="token punctuation">[</span>nowPos<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'&lt;span class="search-keyword">'</span><span class="token punctuation">,</span> titleHtml<span class="token punctuation">[</span>nowPos<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'&lt;/span>'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
                <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'display'</span><span class="token punctuation">,</span> <span class="token string">'block'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token string">'.post-title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>titleHtml<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'display'</span><span class="token punctuation">,</span> <span class="token string">'none'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token string">'.post-title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">!==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#default-panel .icon-search'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'active'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token string">'in:'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#no-item-tips'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">'正在进行全局关键字搜索，请输入关键字'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>val<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'in:'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".nav-right nav a:visible"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#no-item-tips'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">'未在 &lt;span>'</span> <span class="token operator">+</span> activeTitle <span class="token operator">+</span> <span class="token string">'&lt;/span> 分类中找到'</span><span class="token operator">+</span> searchType <span class="token operator">+</span> containType <span class="token operator">+</span> <span class="token string">' &lt;span>'</span> <span class="token operator">+</span> val<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[@|#]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'&lt;/span> 的文章'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#default-panel .icon-search'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'active'</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</div></details>
<h3 id="68-博客首页pagination放在最近文章的顶端便于翻页"><a class="markdownIt-Anchor" href="#68-博客首页pagination放在最近文章的顶端便于翻页"></a> 6.8 博客首页pagination放在最近文章的顶端，便于翻页</h3>
<p>需要修改的文件为<code>butterfly/layout/index.pug</code>。改后的代码为：</p>
<pre class="line-numbers language-pug" data-language="pug"><code class="language-pug"><span class="token keyword">extends includes/layout.pug</span>

<span class="token keyword">block content</span>
  <span class="token keyword">include ./includes/mixins/post-ui.pug</span>
  <span class="token tag"><span class="token attr-id">#recent-posts</span><span class="token attr-class">.recent-posts</span></span>
    <span class="token keyword">include includes/pagination.pug</span>
    <span class="token mixin"><span class="token name function">+postUI</span></span>
    <span class="token keyword">include includes/pagination.pug</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>效果如下：</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211026-25.jpg' width=600px>
</div>
<h3 id="68a-tag-hide"><a class="markdownIt-Anchor" href="#68a-tag-hide"></a> 6.8a tag-hide</h3>
<p><code>inline</code> 在文本里面添加按钮隐藏内容，只限文字。格式为：</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% hideInline content,display,bg,color %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li><code>content</code>: 文本内容</li>
<li><code>display</code>: 按钮显示的文字(可选)</li>
<li><code>bg</code>: 按鈕的背景颜色(可选)</li>
<li><code>color</code>: 按钮文字的颜色(可选)</li>
</ul>
<p>例子如下：</p>
<p>哪个英文字母最酷？ <span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案
  </button><span class="hide-content">因为西装裤(C装酷)</span></span></p>
<p>门里站着一个人? <span class="hide-inline"><button type="button" class="hide-button" style="">Click
  </button><span class="hide-content">闪</span></span></p>
<h3 id="69-字体修改"><a class="markdownIt-Anchor" href="#69-字体修改"></a> 6.9 字体修改</h3>
<p>自定义 css并引入,不会的同学参考<a href='https://blog.leonus.cn/2022/custom.html' target='_blank'>Hexo 博客添加自定义 css 和 js 文件</a>。</p>
<p>选择自己使用的字体，我用的是思源宋体。由于有些浏览器（如Safari和手机上的浏览器）不支持自己修改字体，这种时候就会使用系统的默认字体！</p>
<p>如何破局？需要在网页的头文件处<code>&lt;head&gt;&lt;/head&gt;</code>将需要设置的字体导入！具体的做法是在主题配置文件<code>themes/butterfly/_config.yml</code>作如下两个地方的修改：（这里是我的个性化修改，看官也可以根据自己的需要来设置，相关的字体在<a href='https://fonts.google.com/' target='_blank'>谷歌Fonts API</a>处自行查找即可。）</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Global font settings</span>
<span class="token comment"># Don't modify the following settings unless you know how they work (非必要不要修改)</span>
<span class="token key atrule">font</span><span class="token punctuation">:</span>
  <span class="token key atrule">global-font-size</span><span class="token punctuation">:</span> 16.5px
  <span class="token key atrule">code-font-size</span><span class="token punctuation">:</span>
  <span class="token key atrule">font-family</span><span class="token punctuation">:</span> Times<span class="token punctuation">,</span> Noto Serif SC
  <span class="token key atrule">code-font-family</span><span class="token punctuation">:</span>

<span class="token comment"># Font settings for the site title and site subtitle</span>
<span class="token comment"># 左上角網站名字 主頁居中網站名字</span>
<span class="token key atrule">blog_title_font</span><span class="token punctuation">:</span>
  <span class="token key atrule">font_link</span><span class="token punctuation">:</span>
  <span class="token key atrule">font-family</span><span class="token punctuation">:</span> Ma Shan Zheng<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Inject</span>
<span class="token comment"># Insert the code to head (before '&lt;/head>' tag) and the bottom (before '&lt;/body>' tag)</span>
<span class="token comment"># 插入代码到头部 &lt;/head> 之前 和 底部 &lt;/body> 之前</span>
<span class="token key atrule">inject</span><span class="token punctuation">:</span>
  <span class="token key atrule">head</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> &lt;link rel="preconnect" href="https<span class="token punctuation">:</span>//fonts.googleapis.com"<span class="token punctuation">></span>
    <span class="token punctuation">-</span> &lt;link rel="preconnect" href="https<span class="token punctuation">:</span>//fonts.gstatic.com" crossorigin<span class="token punctuation">></span>
    <span class="token punctuation">-</span> &lt;link href="https<span class="token punctuation">:</span>//fonts.loli.net/css2<span class="token punctuation">?</span>family=Noto+Serif+SC<span class="token punctuation">:</span>wght@400;500;700<span class="token important">&amp;display=swap"</span> rel="stylesheet"<span class="token punctuation">></span> <span class="token comment">#思源宋体</span>
    <span class="token punctuation">-</span> &lt;link href="https<span class="token punctuation">:</span>//fonts.loli.net/css2<span class="token punctuation">?</span>family=Ma+Shan+Zheng<span class="token punctuation">:</span>wght@400;500;700<span class="token important">&amp;display=swap"</span> rel="stylesheet"<span class="token punctuation">></span> <span class="token comment">#Mashanzheng</span>
  <span class="token key atrule">bottom</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> &lt;script type='text/javascript' src='https<span class="token punctuation">:</span>//ajax.loli.net/ajax/libs/jquery/3.2.1/jquery.min.js'<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>
    <span class="token punctuation">-</span> &lt;script id="dsq<span class="token punctuation">-</span>count<span class="token punctuation">-</span>scr" src="//https<span class="token punctuation">-</span>www<span class="token punctuation">-</span>dhndzwxj<span class="token punctuation">-</span>top.disqus.com/count.js" async<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="高级应用-api"><a class="markdownIt-Anchor" href="#高级应用-api"></a> 高级应用 API</h4>
<p>Google Fonts 还开放了一些接口（称为 Developer API），用于获取字体库的信息数据。</p>
<p>比如实时获取字体库实际可用的字体及其相关信息：</p>
<p><code>https://www.googleapis.com/webfonts/v1/webfonts?key=*YOUR-API-KEY*</code></p>
<p>这个请求的返回结果是一个 JSON 类型的数据，包括了每种字体的名称，样式种类（比如 regular，italic），版本，修改时间，包含的样式包的请求地址，等等。</p>
<p>请注意，在 URL 里面有一个 key，这个 key 是和您的 web 应用工程相联系的，只有注册过的 web 应用才能成功调用 Developer API。我们必须要在 Google Cloud Console 注册之后，才能获取这个 key。</p>
<p>关于这个 Developer API， 可以参阅这个<a target="_blank" rel="noopener" href="https://developers.google.com/fonts/docs/developer_api">链接</a>。</p>
<p>参考下面这边文章来修改头文件：<a href='https://www.frankindev.com/2017/04/09/source-han-serif-in-web/' target='_blank'>Web使用思源字体</a>。<a href='https://sb.sb/blog/css-cdn/' target='_blank'>前端 CDNJS 库及 Google Fonts、Ajax 和 Gravatar 国内加速服务</a>。</p>
<p>谷歌Fonts API网址：<a target="_blank" rel="noopener" href="https://fonts.google.com/">https://fonts.google.com/</a></p>
<p>解决谷歌字体API加载速度慢的问题：<a href='https://blog.csdn.net/klsfp/article/details/118228645' target='_blank'>解决引入fonts.googleapis.com/css字体网页响应缓慢问题</a>。</p>
<h3 id="610-网页侧边栏卡片"><a class="markdownIt-Anchor" href="#610-网页侧边栏卡片"></a> 6.10 网页侧边栏卡片</h3>
<p>最重要的文件是<code>butterfly/layout/includes/widget/index.pug</code>。</p>
<pre class="line-numbers language-pug" data-language="pug"><code class="language-pug"><span class="token comment">//- /butterfly/layout/includes/widget/index.pug</span>

<span class="token tag"><span class="token attr-id">#aside-content</span><span class="token attr-class">.aside-content</span></span>
  <span class="token comment">//- post</span>
  <span class="token flow-control"><span class="token branch keyword">if</span> <span class="token function">is_post</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
    <span class="token flow-control"><span class="token branch keyword">if</span> showToc <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span>toc<span class="token punctuation">.</span>style_simple</span>
      <span class="token tag"><span class="token attr-class">.sticky_layout</span></span>
        <span class="token keyword">include ./card_post_toc.pug</span>
    <span class="token flow-control"><span class="token branch keyword">else</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_announcement'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_top_self'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      </span>
      <span class="token tag"><span class="token attr-class">.sticky_layout</span></span>
        <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_back'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
        <span class="token flow-control"><span class="token branch keyword">if</span> showToc</span>
          <span class="token keyword">include ./card_post_toc.pug</span>
        <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_recent_post'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
        <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_ad'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
  <span class="token flow-control"><span class="token branch keyword">else</span></span>
    <span class="token comment">//- page</span>
    <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_author'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
    <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_announcement'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
    <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_top_self'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      </span>

    <span class="token tag"><span class="token attr-class">.sticky_layout</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_recent_post'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_categories'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_tags'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_webinfo'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_ad'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_newest_comment'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_archives'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span>
      <span class="token punctuation">!=</span><span class="token code"><span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/widget/card_bottom_self'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>对于作者卡片<code>butterfly/layout/includes/widget/card_author.pug</code>，我需要两种形态：一方面是主页上内容要全面（如下面左图），另一方面是文章内它的内容要简略。对于后者，我新建了一个<code>card_back.pug</code>文件。</p>
<pre class="line-numbers language-pug" data-language="pug"><code class="language-pug"><span class="token comment">///butterfly/layout/includes/widget/card_back.pug</span>

<span class="token flow-control"><span class="token branch keyword">if</span> theme<span class="token punctuation">.</span>aside<span class="token punctuation">.</span>card_author<span class="token punctuation">.</span>enable</span>
  <span class="token tag"><span class="token attr-class">.card-widget</span><span class="token attr-class">.card-info</span></span>
    <span class="token tag"><span class="token attr-class">.is-center</span></span>
      <span class="token tag"><span class="token attr-class">.avatar-img</span></span>
        <span class="token tag">img<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">src</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token function">url_for</span><span class="token punctuation">(</span>theme<span class="token punctuation">.</span>avatar<span class="token punctuation">.</span>img</span><span class="token punctuation">)</span></span></span> <span class="token plain-text">onerror=`this.onerror=null;this.src='` + url_for(theme.error_img.flink) + `'` alt="avatar")</span>

    <span class="token flow-control"><span class="token branch keyword">if</span> theme<span class="token punctuation">.</span>aside<span class="token punctuation">.</span>card_author<span class="token punctuation">.</span>button<span class="token punctuation">.</span>enable</span>
      <span class="token tag">a<span class="token attr-id">#card-info-btn</span><span class="token attr-class">.button--animated</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">href</span><span class="token punctuation">=</span><span class="token attr-value">theme<span class="token punctuation">.</span>aside<span class="token punctuation">.</span>card_author<span class="token punctuation">.</span>button<span class="token punctuation">.</span>link</span><span class="token punctuation">)</span></span></span>
        <span class="token tag">i<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">class</span><span class="token punctuation">=</span><span class="token attr-value">theme<span class="token punctuation">.</span>aside<span class="token punctuation">.</span>card_author<span class="token punctuation">.</span>button<span class="token punctuation">.</span>icon</span><span class="token punctuation">)</span></span></span>
        <span class="token tag">span</span><span class="token punctuation">=</span><span class="token code">theme<span class="token punctuation">.</span>aside<span class="token punctuation">.</span>card_author<span class="token punctuation">.</span>button<span class="token punctuation">.</span>text</span>
  
    <span class="token flow-control"><span class="token branch keyword">if</span></span>(theme<span class="token punctuation">.</span>social)
        <span class="token tag"><span class="token attr-class">.card-info-social-icons</span><span class="token attr-class">.is-center</span></span>
          <span class="token punctuation">!=</span><span class="token code"><span class="token function">fragment_cache</span><span class="token punctuation">(</span><span class="token string">'social'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'includes/header/social'</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> </span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="611-时钟"><a class="markdownIt-Anchor" href="#611-时钟"></a> 6.11 时钟</h3>
<ol>
<li>安装插件,在博客根目录<code>[Blogroot]</code>下打开终端，运行以下指令：</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-butterfly-clock-anzhiyu <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ol>
<li>添加配置信息，以下为写法示例 在站点配置文件<code>_config.yml</code>或者主题配置文件<code>_config.butterfly.yml</code>中添加</li>
</ol>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># electric_clock</span>
<span class="token comment"># see https://anzhiy.cn/posts/fc18.html</span>
<span class="token key atrule">electric_clock</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 开关</span>
  <span class="token key atrule">priority</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment">#过滤器优先权</span>
  <span class="token key atrule">enable_page</span><span class="token punctuation">:</span> all <span class="token comment"># 应用页面</span>
  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>
  <span class="token comment"># - /posts/</span>
  <span class="token comment"># - /about/</span>
  <span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token comment"># 挂载容器类型</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> class
    <span class="token key atrule">name</span><span class="token punctuation">:</span> sticky_layout
    <span class="token key atrule">index</span><span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token key atrule">loading</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.cbd.int/hexo<span class="token punctuation">-</span>butterfly<span class="token punctuation">-</span>clock<span class="token punctuation">-</span>anzhiyu/lib/loading.gif <span class="token comment">#加载动画自定义</span>
  <span class="token key atrule">clock_css</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.cbd.int/hexo<span class="token punctuation">-</span>butterfly<span class="token punctuation">-</span>clock<span class="token punctuation">-</span>anzhiyu/lib/clock.min.css
  <span class="token key atrule">clock_js</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.cbd.int/hexo<span class="token punctuation">-</span>butterfly<span class="token punctuation">-</span>clock<span class="token punctuation">-</span>anzhiyu/lib/clock.min.js
  <span class="token key atrule">ip_api</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//widget.qweather.net/simple/static/js/he<span class="token punctuation">-</span>simple<span class="token punctuation">-</span>common.js<span class="token punctuation">?</span>v=2.0
  <span class="token key atrule">qweather_key</span><span class="token punctuation">:</span> <span class="token comment"># 和风天气key</span>
  <span class="token key atrule">gaud_map_key</span><span class="token punctuation">:</span> <span class="token comment"># 高得地图web服务key</span>
  <span class="token key atrule">default_rectangle</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 开启后将一直显示rectangle位置的天气，否则将获取访问者的地理位置与天气</span>
  <span class="token key atrule">rectangle</span><span class="token punctuation">:</span> <span class="token number">112.982279</span><span class="token punctuation">,</span><span class="token number">28.19409</span> <span class="token comment"># 获取访问者位置失败时会显示该位置的天气，同时该位置为开启default_rectangle后的位置</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li>参数释义</li>
</ol>
<table>
<thead>
<tr>
<th>参数</th>
<th>备选值/类型</th>
<th>释义</th>
</tr>
</thead>
<tbody>
<tr>
<td>priority</td>
<td>number</td>
<td>【可选】过滤器优先级，数值越小，执行越早，默认为10，选填</td>
</tr>
<tr>
<td>enable</td>
<td>true/false</td>
<td>【必选】控制开关</td>
</tr>
<tr>
<td>enable_page</td>
<td>path</td>
<td>【可选】填写想要应用的页面,如根目录就填’/’,分类页面就填’/categories/’。若要应用于所有页面，就填<code>all</code>，默认为<code>all</code></td>
</tr>
<tr>
<td>exclude</td>
<td>path</td>
<td>【可选】填写想要屏蔽的页面，可以多个。写法见示例。原理是将屏蔽项的内容逐个放到当前路径去匹配，若当前路径包含任一屏蔽项，则不会挂载。</td>
</tr>
<tr>
<td>layout.type</td>
<td>id/class</td>
<td>【可选】挂载容器类型，填写id或class，不填则默认为id</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://layout.name">layout.name</a></td>
<td>text</td>
<td>【必选】挂载容器名称</td>
</tr>
<tr>
<td>layout.index</td>
<td>0和正整数</td>
<td>【可选】前提是layout.type为class，因为同一页面可能有多个class，此项用来确认究竟排在第几个顺位</td>
</tr>
<tr>
<td>loading</td>
<td>URL</td>
<td>【可选】电子钟加载动画的图片</td>
</tr>
<tr>
<td>clock_css</td>
<td>URL</td>
<td>【可选】电子钟样式CDN资源</td>
</tr>
<tr>
<td>clock_js</td>
<td>URL</td>
<td>【可选】电子钟执行脚本CDN资源</td>
</tr>
<tr>
<td>ip_api</td>
<td>URL</td>
<td>【可选】获取时钟IP的API</td>
</tr>
</tbody>
</table>
<details class="toggle" style="border: 1px solid black"><summary class="toggle-button" style="background-color: black;color: white">配置文件</summary><div class="toggle-content"><h3 id="6n-主题配置文件"><a class="markdownIt-Anchor" href="#6n-主题配置文件"></a> 6.n 主题配置文件</h3>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Main menu navigation (導航目錄)</span>
<span class="token comment"># see https://butterfly.js.org/posts/4aa8abbe/#導航菜單</span>
<span class="token comment"># --------------------------------------</span>

<span class="token key atrule">menu</span><span class="token punctuation">:</span>
  <span class="token key atrule">主页</span><span class="token punctuation">:</span> / <span class="token punctuation">|</span><span class="token punctuation">|</span> fas fa<span class="token punctuation">-</span>home
  <span class="token key atrule">关于</span><span class="token punctuation">:</span> /about/ <span class="token punctuation">|</span><span class="token punctuation">|</span> fas fa<span class="token punctuation">-</span>heart
  <span class="token key atrule">结构||fa fa-heartbeat</span><span class="token punctuation">:</span>
    <span class="token key atrule">目录</span><span class="token punctuation">:</span> /categories/ <span class="token punctuation">|</span><span class="token punctuation">|</span> fas fa<span class="token punctuation">-</span>folder<span class="token punctuation">-</span>open
    <span class="token key atrule">归档</span><span class="token punctuation">:</span> /archives/ <span class="token punctuation">|</span><span class="token punctuation">|</span> fas fa<span class="token punctuation">-</span>archive
    <span class="token key atrule">标签</span><span class="token punctuation">:</span> /tags/ <span class="token punctuation">|</span><span class="token punctuation">|</span> fas fa<span class="token punctuation">-</span>tags

<span class="token comment"># Code Blocks (代碼相關)</span>
<span class="token comment"># --------------------------------------</span>

<span class="token key atrule">highlight_theme</span><span class="token punctuation">:</span> light <span class="token comment">#  darker / pale night / light / ocean / mac / mac light / false</span>
<span class="token key atrule">highlight_copy</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># copy button</span>
<span class="token key atrule">highlight_lang</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># show the code language</span>
<span class="token key atrule">highlight_shrink</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># true: shrink the code blocks / false: expand the code blocks | none: expand code blocks and hide the button</span>
<span class="token key atrule">highlight_height_limit</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># unit: px</span>
<span class="token key atrule">code_word_wrap</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># copy settings</span>
<span class="token comment"># copyright: Add the copyright information after copied content (複製的內容後面加上版權信息)</span>
<span class="token key atrule">copy</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">copyright</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">limit_count</span><span class="token punctuation">:</span> <span class="token number">0</span>

<span class="token comment"># social settings (社交圖標設置)</span>
<span class="token comment"># formal:</span>
<span class="token comment">#   icon: link || the description</span>
<span class="token key atrule">social</span><span class="token punctuation">:</span>
  <span class="token comment"># fab fa-github: https://github.com/xxxxx || Github</span>
  <span class="token comment"># fas fa-envelope: mailto:xxxxxx@gmail.com || Email</span>

<span class="token comment"># search (搜索)</span>
<span class="token comment"># see https://butterfly.js.org/posts/ceeb73f/#搜索系統</span>
<span class="token comment"># --------------------------------------</span>

<span class="token comment"># Algolia search</span>
<span class="token key atrule">algolia_search</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">hits</span><span class="token punctuation">:</span>
    <span class="token key atrule">per_page</span><span class="token punctuation">:</span> <span class="token number">6</span>

<span class="token comment"># Local search</span>
<span class="token key atrule">local_search</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">preload</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#預加載，開啟後，進入網頁後會自動加載搜索文件。關閉時，只有點擊搜索按鈕後，才會加載搜索文件</span>
  <span class="token key atrule">CDN</span><span class="token punctuation">:</span>

<span class="token comment"># Math (數學)</span>
<span class="token comment"># --------------------------------------</span>
<span class="token comment"># About the per_page</span>
<span class="token comment"># if you set it to true, it will load mathjax/katex script in each page (true 表示每一頁都加載js)</span>
<span class="token comment"># if you set it to false, it will load mathjax/katex script according to your setting (add the 'mathjax: true' in page's front-matter)</span>
<span class="token comment"># (false 需要時加載，須在使用的 Markdown Front-matter 加上 mathjax: true)</span>

<span class="token comment"># MathJax</span>
<span class="token key atrule">mathjax</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">per_page</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># KaTeX</span>
<span class="token key atrule">katex</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">per_page</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">hide_scrollbar</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># Image (圖片設置)</span>
<span class="token comment"># --------------------------------------</span>

<span class="token comment"># Favicon（網站圖標）</span>
<span class="token key atrule">favicon</span><span class="token punctuation">:</span> /private_img/favicon.png

<span class="token comment"># Avatar (頭像)</span>
<span class="token key atrule">avatar</span><span class="token punctuation">:</span>
  <span class="token key atrule">img</span><span class="token punctuation">:</span> /private_img/yuyingnan.jpg <span class="token comment">#https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png</span>
  <span class="token key atrule">effect</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># Disable all banner image</span>
<span class="token key atrule">disable_top_img</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># The banner image of home page</span>
<span class="token key atrule">index_img</span><span class="token punctuation">:</span> /private_img/bg0.png

<span class="token comment"># If the banner of page not setting, it will show the top_img</span>
<span class="token key atrule">default_top_img</span><span class="token punctuation">:</span> /private_img/bg1.png

<span class="token comment"># The banner image of archive page</span>
<span class="token key atrule">archive_img</span><span class="token punctuation">:</span>

<span class="token comment"># If the banner of tag page not setting, it will show the top_img</span>
<span class="token comment"># note: tag page, not tags page (子標籤頁面的 top_img)</span>
<span class="token key atrule">tag_img</span><span class="token punctuation">:</span>

<span class="token comment"># The banner image of tag page</span>
<span class="token comment"># format:</span>
<span class="token comment">#  - tag name: xxxxx</span>
<span class="token key atrule">tag_per_img</span><span class="token punctuation">:</span>

<span class="token comment"># If the banner of category page not setting, it will show the top_img</span>
<span class="token comment"># note: category page, not categories page (子分類頁面的 top_img)</span>
<span class="token key atrule">category_img</span><span class="token punctuation">:</span>

<span class="token comment"># The banner image of category page</span>
<span class="token comment"># format:</span>
<span class="token comment">#  - category name: xxxxx</span>
<span class="token key atrule">category_per_img</span><span class="token punctuation">:</span> /private_img/banner2.gif

<span class="token key atrule">cover</span><span class="token punctuation">:</span>
  <span class="token comment"># display the cover or not (是否顯示文章封面)</span>
  <span class="token key atrule">index_enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">aside_enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">archives_enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token comment"># the position of cover in home page (封面顯示的位置)</span>
  <span class="token comment"># left/right/both</span>
  <span class="token key atrule">position</span><span class="token punctuation">:</span> both
  <span class="token comment"># When cover is not set, the default cover is displayed (當沒有設置cover時，默認的封面顯示)</span>
  <span class="token key atrule">default_cover</span><span class="token punctuation">:</span> /private_img/banner2.gif
    <span class="token comment"># - https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg</span>

<span class="token comment"># Replace Broken Images (替換無法顯示的圖片)</span>
<span class="token key atrule">error_img</span><span class="token punctuation">:</span>
  <span class="token key atrule">flink</span><span class="token punctuation">:</span> /private_img/404.gif
  <span class="token key atrule">post_page</span><span class="token punctuation">:</span> /private_img/banner.gif

<span class="token comment"># A simple 404 page</span>
<span class="token key atrule">error_404</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">subtitle</span><span class="token punctuation">:</span> <span class="token string">'无法打开该网页'</span>
  <span class="token key atrule">background</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//i.loli.net/2020/05/19/aKOcLiyPl2JQdFD.png

<span class="token key atrule">post_meta</span><span class="token punctuation">:</span>
  <span class="token key atrule">page</span><span class="token punctuation">:</span> <span class="token comment"># Home Page</span>
    <span class="token key atrule">date_type</span><span class="token punctuation">:</span> both <span class="token comment"># created or updated or both 主頁文章日期是創建日或者更新日或都顯示</span>
    <span class="token key atrule">date_format</span><span class="token punctuation">:</span> date <span class="token comment"># date/relative 顯示日期還是相對日期</span>
    <span class="token key atrule">categories</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># true or false 主頁是否顯示分類</span>
    <span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># true or false 主頁是否顯示標籤</span>
    <span class="token key atrule">label</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># true or false 顯示描述性文字</span>
  <span class="token key atrule">post</span><span class="token punctuation">:</span>
    <span class="token key atrule">date_type</span><span class="token punctuation">:</span> both <span class="token comment"># created or updated or both 文章頁日期是創建日或者更新日或都顯示</span>
    <span class="token key atrule">date_format</span><span class="token punctuation">:</span> date <span class="token comment"># date/relative 顯示日期還是相對日期</span>
    <span class="token key atrule">categories</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># true or false 文章頁是否顯示分類</span>
    <span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># true or false 文章頁是否顯示標籤</span>
    <span class="token key atrule">label</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># true or false 顯示描述性文字</span>

<span class="token comment"># wordcount (字數統計)</span>
<span class="token comment"># see https://butterfly.js.org/posts/ceeb73f/#字數統計</span>
<span class="token key atrule">wordcount</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">post_wordcount</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">min2read</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">total_wordcount</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># Display the article introduction on homepage</span>
<span class="token comment"># 1: description</span>
<span class="token comment"># 2: both (if the description exists, it will show description, or show the auto_excerpt)</span>
<span class="token comment"># 3: auto_excerpt (default)</span>
<span class="token comment"># false: do not show the article introduction</span>
<span class="token key atrule">index_post_content</span><span class="token punctuation">:</span>
  <span class="token key atrule">method</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">length</span><span class="token punctuation">:</span> <span class="token number">500</span> <span class="token comment"># if you set method to 2 or 3, the length need to config</span>

<span class="token comment"># anchor</span>
<span class="token key atrule">anchor</span><span class="token punctuation">:</span>
  <span class="token key atrule">button</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">always_show</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">icon</span><span class="token punctuation">:</span> <span class="token comment"># the unicode value of Font Awesome icon, such as '\3423'</span>
  <span class="token key atrule">auto_update</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># when you scroll in post, the URL will update according to header id.</span>

<span class="token comment"># Post</span>
<span class="token comment"># --------------------------------------</span>

<span class="token comment"># toc (目錄)</span>
<span class="token key atrule">toc</span><span class="token punctuation">:</span>
  <span class="token key atrule">post</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">page</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#自动编号</span>
  <span class="token key atrule">expand</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">style_simple</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># for post</span>

<span class="token key atrule">post_copyright</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">decode</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">author_href</span><span class="token punctuation">:</span>
  <span class="token key atrule">license</span><span class="token punctuation">:</span> CC BY<span class="token punctuation">-</span>NC<span class="token punctuation">-</span>SA 4.0
  <span class="token key atrule">license_url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//creativecommons.org/licenses/by<span class="token punctuation">-</span>nc<span class="token punctuation">-</span>sa/4.0/

<span class="token comment"># Sponsor/reward</span>
<span class="token key atrule">reward</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">QR_code</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> /private_img/wechat.png
      <span class="token key atrule">link</span><span class="token punctuation">:</span>
      <span class="token key atrule">text</span><span class="token punctuation">:</span> 微信
    <span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> /private_img/alipay.jpg
      <span class="token key atrule">link</span><span class="token punctuation">:</span>
      <span class="token key atrule">text</span><span class="token punctuation">:</span> 支付宝

<span class="token comment"># Post edit</span>
<span class="token comment"># Easily browse and edit blog source code online.</span>
<span class="token key atrule">post_edit</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token comment"># url: https://github.com/user-name/repo-name/edit/branch-name/subdirectory-name/</span>
  <span class="token comment"># For example: https://github.com/jerryc127/butterfly.js.org/edit/main/source/</span>
  <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/dhndzwxj/hexo<span class="token punctuation">-</span>backup/edit/master/source/

<span class="token comment"># Related Articles</span>
<span class="token key atrule">related_post</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">6</span> <span class="token comment"># Number of posts displayed</span>
  <span class="token key atrule">date_type</span><span class="token punctuation">:</span> created <span class="token comment"># or created or updated 文章日期顯示創建日或者更新日</span>

<span class="token comment"># figcaption (圖片描述文字)</span>
<span class="token key atrule">photofigcaption</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># post_pagination (分頁)</span>
<span class="token comment"># value: 1 || 2 || false</span>
<span class="token comment"># 1: The 'next post' will link to old post</span>
<span class="token comment"># 2: The 'next post' will link to new post</span>
<span class="token comment"># false: disable pagination</span>
<span class="token key atrule">post_pagination</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token comment"># Displays outdated notice for a post (文章過期提醒)</span>
<span class="token key atrule">noticeOutdate</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">style</span><span class="token punctuation">:</span> flat <span class="token comment"># style: simple/flat</span>
  <span class="token key atrule">limit_day</span><span class="token punctuation">:</span> <span class="token number">30</span> <span class="token comment"># When will it be shown</span>
  <span class="token key atrule">position</span><span class="token punctuation">:</span> top <span class="token comment"># position: top/bottom</span>
  <span class="token key atrule">message_prev</span><span class="token punctuation">:</span> 本文上次更新距离今天已经过去
  <span class="token key atrule">message_next</span><span class="token punctuation">:</span> 天<span class="token punctuation">,</span> 文中内容可能已经过时，望周知。

<span class="token comment"># Share System (分享功能)</span>
<span class="token comment"># --------------------------------------</span>

<span class="token comment"># AddThis</span>
<span class="token comment"># https://www.addthis.com/</span>
<span class="token key atrule">addThis</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">pubid</span><span class="token punctuation">:</span>

<span class="token comment"># Share.js</span>
<span class="token comment"># https://github.com/overtrue/share.js</span>
<span class="token key atrule">sharejs</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">sites</span><span class="token punctuation">:</span> facebook<span class="token punctuation">,</span>twitter<span class="token punctuation">,</span>wechat<span class="token punctuation">,</span>weibo<span class="token punctuation">,</span>qq

<span class="token comment"># AddToAny</span>
<span class="token comment"># https://www.addtoany.com/</span>
<span class="token key atrule">addtoany</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">item</span><span class="token punctuation">:</span> facebook<span class="token punctuation">,</span>twitter<span class="token punctuation">,</span>wechat<span class="token punctuation">,</span>sina_weibo<span class="token punctuation">,</span>facebook_messenger<span class="token punctuation">,</span>email<span class="token punctuation">,</span>copy_link

<span class="token comment"># Comments System</span>
<span class="token comment"># --------------------------------------</span>

<span class="token key atrule">comments</span><span class="token punctuation">:</span>
  <span class="token comment"># Up to two comments system, the first will be shown as default</span>
  <span class="token comment"># Choose: Disqus/Disqusjs/Livere/Gitalk/Valine/Waline/Utterances/Facebook Comments/Twikoo</span>
  <span class="token key atrule">use</span><span class="token punctuation">:</span> Disqus
  <span class="token key atrule">text</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># Display the comment name next to the button</span>
  <span class="token comment"># lazyload: The comment system will be load when comment element enters the browser's viewport.</span>
  <span class="token comment"># If you set it to true, the comment count will be invalid</span>
  <span class="token key atrule">lazyload</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">count</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># Display comment count in top_img</span>
  <span class="token key atrule">card_post_count</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># Display comment count in Home Page</span>

<span class="token comment"># disqus</span>
<span class="token comment"># https://disqus.com/</span>
<span class="token key atrule">disqus</span><span class="token punctuation">:</span>
  <span class="token key atrule">shortname</span><span class="token punctuation">:</span> https<span class="token punctuation">-</span>www<span class="token punctuation">-</span>dhndzwxj<span class="token punctuation">-</span>top <span class="token comment">#disqus_ZdiIR8wtv4</span>
  <span class="token key atrule">apikey</span><span class="token punctuation">:</span> <span class="token comment"># For newest comments widget</span>

<span class="token comment"># Alternative Disqus - Render comments with Disqus API</span>
<span class="token comment"># DisqusJS 評論系統，可以實現在網路審查地區載入 Disqus 評論列表，兼容原版</span>
<span class="token comment"># https://github.com/SukkaW/DisqusJS</span>
<span class="token key atrule">disqusjs</span><span class="token punctuation">:</span>
  <span class="token key atrule">shortname</span><span class="token punctuation">:</span>
  <span class="token key atrule">apikey</span><span class="token punctuation">:</span>
  <span class="token key atrule">option</span><span class="token punctuation">:</span>

<span class="token comment"># livere (來必力)</span>
<span class="token comment"># https://www.livere.com/</span>
<span class="token key atrule">livere</span><span class="token punctuation">:</span>
  <span class="token key atrule">uid</span><span class="token punctuation">:</span>

<span class="token comment"># gitalk</span>
<span class="token comment"># https://github.com/gitalk/gitalk</span>
<span class="token key atrule">gitalk</span><span class="token punctuation">:</span>
  <span class="token key atrule">client_id</span><span class="token punctuation">:</span>
  <span class="token key atrule">client_secret</span><span class="token punctuation">:</span>
  <span class="token key atrule">repo</span><span class="token punctuation">:</span>
  <span class="token key atrule">owner</span><span class="token punctuation">:</span>
  <span class="token key atrule">admin</span><span class="token punctuation">:</span>
  <span class="token key atrule">option</span><span class="token punctuation">:</span>

<span class="token comment"># valine</span>
<span class="token comment"># https://valine.js.org</span>
<span class="token key atrule">valine</span><span class="token punctuation">:</span>
  <span class="token key atrule">appId</span><span class="token punctuation">:</span> <span class="token comment"># leancloud application app id</span>
  <span class="token key atrule">appKey</span><span class="token punctuation">:</span> <span class="token comment"># leancloud application app key</span>
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> monsterid <span class="token comment"># gravatar style https://valine.js.org/#/avatar</span>
  <span class="token key atrule">serverURLs</span><span class="token punctuation">:</span> <span class="token comment"># This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span>
  <span class="token key atrule">bg</span><span class="token punctuation">:</span> <span class="token comment"># valine background</span>
  <span class="token key atrule">visitor</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">option</span><span class="token punctuation">:</span>

<span class="token comment"># waline - A simple comment system with backend support fork from Valine</span>
<span class="token comment"># https://waline.js.org/</span>
<span class="token key atrule">waline</span><span class="token punctuation">:</span>
  <span class="token key atrule">serverURL</span><span class="token punctuation">:</span> <span class="token comment"># Waline server address url</span>
  <span class="token key atrule">bg</span><span class="token punctuation">:</span> <span class="token comment"># waline background</span>
  <span class="token key atrule">pageview</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">option</span><span class="token punctuation">:</span>

<span class="token comment"># utterances</span>
<span class="token comment"># https://utteranc.es/</span>
<span class="token key atrule">utterances</span><span class="token punctuation">:</span>
  <span class="token key atrule">repo</span><span class="token punctuation">:</span>
  <span class="token comment"># Issue Mapping: pathname/url/title/og:title</span>
  <span class="token key atrule">issue_term</span><span class="token punctuation">:</span> pathname
  <span class="token comment"># Theme: github-light/github-dark/github-dark-orange/icy-dark/dark-blue/photon-dark</span>
  <span class="token key atrule">light_theme</span><span class="token punctuation">:</span> github<span class="token punctuation">-</span>light
  <span class="token key atrule">dark_theme</span><span class="token punctuation">:</span> photon<span class="token punctuation">-</span>dark

<span class="token comment"># Facebook Comments Plugin</span>
<span class="token comment"># https://developers.facebook.com/docs/plugins/comments/</span>
<span class="token key atrule">facebook_comments</span><span class="token punctuation">:</span>
  <span class="token key atrule">app_id</span><span class="token punctuation">:</span>
  <span class="token key atrule">user_id</span><span class="token punctuation">:</span> <span class="token comment"># optional</span>
  <span class="token key atrule">pageSize</span><span class="token punctuation">:</span> <span class="token number">10</span> <span class="token comment"># The number of comments to show</span>
  <span class="token key atrule">order_by</span><span class="token punctuation">:</span> social <span class="token comment"># social/time/reverse_time</span>
  <span class="token key atrule">lang</span><span class="token punctuation">:</span> zh_TW <span class="token comment"># Language en_US/zh_CN/zh_TW and so on</span>

<span class="token comment"># Twikoo</span>
<span class="token comment"># https://github.com/imaegoo/twikoo</span>
<span class="token key atrule">twikoo</span><span class="token punctuation">:</span>
  <span class="token key atrule">envId</span><span class="token punctuation">:</span>
  <span class="token key atrule">region</span><span class="token punctuation">:</span>
  <span class="token key atrule">visitor</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">option</span><span class="token punctuation">:</span>

<span class="token comment"># Giscus</span>
<span class="token comment"># https://giscus.app/</span>
<span class="token key atrule">giscus</span><span class="token punctuation">:</span>
  <span class="token key atrule">repo</span><span class="token punctuation">:</span>
  <span class="token key atrule">repo_id</span><span class="token punctuation">:</span>
  <span class="token key atrule">category_id</span><span class="token punctuation">:</span>
  <span class="token key atrule">theme</span><span class="token punctuation">:</span>
    <span class="token key atrule">light</span><span class="token punctuation">:</span> light
    <span class="token key atrule">dark</span><span class="token punctuation">:</span> dark
  <span class="token key atrule">option</span><span class="token punctuation">:</span>

<span class="token comment"># Remark42</span>
<span class="token comment"># https://remark42.com/docs/configuration/frontend/</span>
<span class="token key atrule">remark42</span><span class="token punctuation">:</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token comment"># Your Host URL</span>
  <span class="token key atrule">siteId</span><span class="token punctuation">:</span> <span class="token comment"># Your Site ID</span>
  <span class="token key atrule">option</span><span class="token punctuation">:</span>

<span class="token comment"># Artalk</span>
<span class="token comment"># https://artalk.js.org/guide/frontend/config.html</span>
<span class="token key atrule">artalk</span><span class="token punctuation">:</span>
  <span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">site</span><span class="token punctuation">:</span>
  <span class="token key atrule">visitor</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">option</span><span class="token punctuation">:</span>

<span class="token comment"># Chat Services</span>
<span class="token comment"># --------------------------------------</span>

<span class="token comment"># Chat Button [recommend]</span>
<span class="token comment"># It will create a button in the bottom right corner of website, and hide the origin button</span>
<span class="token key atrule">chat_btn</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># The origin chat button is displayed when scrolling up, and the button is hidden when scrolling down</span>
<span class="token key atrule">chat_hide_show</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># chatra</span>
<span class="token comment"># https://chatra.io/</span>
<span class="token key atrule">chatra</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">id</span><span class="token punctuation">:</span>

<span class="token comment"># tidio</span>
<span class="token comment"># https://www.tidio.com/</span>
<span class="token key atrule">tidio</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">public_key</span><span class="token punctuation">:</span>

<span class="token comment"># daovoice</span>
<span class="token comment"># http://daovoice.io/</span>
<span class="token key atrule">daovoice</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">app_id</span><span class="token punctuation">:</span>

<span class="token comment"># gitter</span>
<span class="token comment"># https://gitter.im/</span>
<span class="token key atrule">gitter</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">room</span><span class="token punctuation">:</span>

<span class="token comment"># crisp</span>
<span class="token comment"># https://crisp.chat/en/</span>
<span class="token key atrule">crisp</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">website_id</span><span class="token punctuation">:</span>

<span class="token comment"># messenger</span>
<span class="token comment"># https://developers.facebook.com/docs/messenger-platform/discovery/facebook-chat-plugin/</span>
<span class="token key atrule">messenger</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">pageID</span><span class="token punctuation">:</span>
  <span class="token key atrule">lang</span><span class="token punctuation">:</span> zh_TW <span class="token comment"># Language en_US/zh_CN/zh_TW and so on</span>

<span class="token comment"># Footer Settings</span>
<span class="token comment"># --------------------------------------</span>
<span class="token key atrule">footer</span><span class="token punctuation">:</span>
  <span class="token key atrule">owner</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">since</span><span class="token punctuation">:</span> <span class="token number">2020</span>
  <span class="token key atrule">custom_text</span><span class="token punctuation">:</span> 欢迎参观我的&lt;a href='https<span class="token punctuation">:</span>//github.com/dhndzwxj' target='_blank'<span class="token punctuation">></span>github&lt;/a<span class="token punctuation">></span>个人主页！
  <span class="token key atrule">copyright</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># Copyright of theme and framework</span>


<span class="token comment"># Analysis</span>
<span class="token comment"># --------------------------------------</span>

<span class="token comment"># Baidu Analytics</span>
<span class="token comment"># https://tongji.baidu.com/web/welcome/login</span>
<span class="token key atrule">baidu_analytics</span><span class="token punctuation">:</span>

<span class="token comment"># Google Analytics</span>
<span class="token comment"># https://analytics.google.com/analytics/web/</span>
<span class="token key atrule">google_analytics</span><span class="token punctuation">:</span>

<span class="token comment"># CNZZ Analytics</span>
<span class="token comment"># https://www.umeng.com/</span>
<span class="token key atrule">cnzz_analytics</span><span class="token punctuation">:</span>

<span class="token comment"># Cloudflare Analytics</span>
<span class="token comment"># https://www.cloudflare.com/zh-tw/web-analytics/</span>
<span class="token key atrule">cloudflare_analytics</span><span class="token punctuation">:</span>

<span class="token comment"># Microsoft Clarity</span>
<span class="token comment"># https://clarity.microsoft.com/</span>
<span class="token key atrule">microsoft_clarity</span><span class="token punctuation">:</span>

<span class="token comment"># Advertisement</span>
<span class="token comment"># --------------------------------------</span>

<span class="token comment"># Google Adsense (谷歌廣告)</span>
<span class="token key atrule">google_adsense</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">auto_ads</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">js</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable_page_level_ads</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># Insert ads manually (手動插入廣告)</span>
<span class="token comment"># ad:</span>
<span class="token comment">#   index:</span>
<span class="token comment">#   aside:</span>
<span class="token comment">#   post:</span>

<span class="token comment"># Verification (站長驗證)</span>
<span class="token comment"># --------------------------------------</span>

<span class="token key atrule">site_verification</span><span class="token punctuation">:</span>
  <span class="token comment"># - name: google-site-verification</span>
  <span class="token comment">#   content: xxxxxx</span>
  <span class="token comment"># - name: baidu-site-verification</span>
  <span class="token comment">#   content: xxxxxxx</span>

<span class="token comment"># Beautify/Effect (美化/效果)</span>
<span class="token comment"># --------------------------------------</span>

<span class="token comment"># Theme color for customize</span>
<span class="token comment"># Notice: color value must in double quotes like "#000" or may cause error!</span>

<span class="token key atrule">theme_color</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">main</span><span class="token punctuation">:</span> <span class="token string">'#E68258'</span> <span class="token comment">#'#00B300' #'#1A1A1A' #滑动条的颜色,背景以上的颜色</span>
  <span class="token key atrule">paginator</span><span class="token punctuation">:</span> <span class="token string">"#e68258"</span> <span class="token comment">#底部网页分页数字的颜色</span>
  <span class="token key atrule">button_hover</span><span class="token punctuation">:</span> <span class="token string">"#FF9966"</span> <span class="token comment">#鼠标停留在button上颜色渐变的效果；选择了比主题色更浅一号的橙色</span>
  <span class="token key atrule">text_selection</span><span class="token punctuation">:</span> <span class="token string">'#9F6506'</span> <span class="token comment">#'#000066' #"#0000CC" #选中文字后的颜色</span>
  <span class="token key atrule">link_color</span><span class="token punctuation">:</span> <span class="token string">"#b86ed0"</span> <span class="token comment">#网页链接的颜色</span>
  <span class="token key atrule">meta_color</span><span class="token punctuation">:</span> <span class="token string">"#858585"</span>
  <span class="token key atrule">hr_color</span><span class="token punctuation">:</span> <span class="token string">"#A4D8FA"</span>
  <span class="token key atrule">code_foreground</span><span class="token punctuation">:</span> <span class="token string">"#F47466"</span>
  <span class="token key atrule">code_background</span><span class="token punctuation">:</span> <span class="token string">"#FFFF00"</span>
  <span class="token key atrule">toc_color</span><span class="token punctuation">:</span> <span class="token string">'#E68258'</span> <span class="token comment">#"#e68258" #"#00c4b6"</span>
  <span class="token key atrule">blockquote_padding_color</span><span class="token punctuation">:</span> <span class="token string">"#e68258"</span> <span class="token comment">#引用部分左边长条边框颜色</span>
  <span class="token key atrule">blockquote_background_color</span><span class="token punctuation">:</span> <span class="token string">"#e68258"</span> <span class="token comment">#引用部分的背景颜色</span>


<span class="token comment"># The top_img settings of home page</span>
<span class="token comment"># default: top img - full screen, site info - middle (默認top_img全屏，site_info在中間)</span>
<span class="token comment"># The position of site info, eg: 300px/300em/300rem/10% (主頁標題距離頂部距離)</span>
<span class="token key atrule">index_site_info_top</span><span class="token punctuation">:</span>
<span class="token comment"># The height of top_img, eg: 300px/300em/300rem (主頁top_img高度)</span>
<span class="token key atrule">index_top_img_height</span><span class="token punctuation">:</span>

<span class="token comment"># The user interface setting of category and tag page (category和tag頁的UI設置)</span>
<span class="token comment"># index - same as Homepage UI (index 值代表 UI將與首頁的UI一樣)</span>
<span class="token comment"># default - same as archives UI 默認跟archives頁面UI一樣</span>
<span class="token key atrule">category_ui</span><span class="token punctuation">:</span> <span class="token comment"># 留空或 index</span>
<span class="token key atrule">tag_ui</span><span class="token punctuation">:</span> <span class="token comment"># 留空或 index</span>

<span class="token comment"># Website Background (設置網站背景)</span>
<span class="token comment"># can set it to color or image (可設置圖片 或者 顔色)</span>
<span class="token comment"># The formal of image: url(http://xxxxxx.com/xxx.jpg)</span>
<span class="token key atrule">background</span><span class="token punctuation">:</span>

<span class="token comment"># Footer Background</span>
<span class="token key atrule">footer_bg</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># the position of bottom right button/default unit: px (右下角按鈕距離底部的距離/默認單位為px)</span>
<span class="token key atrule">rightside-bottom</span><span class="token punctuation">:</span>

<span class="token comment"># Enter transitions (開啓網頁進入效果)</span>
<span class="token key atrule">enter_transitions</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># Background effects (背景特效)</span>
<span class="token comment"># --------------------------------------</span>

<span class="token comment"># canvas_ribbon (靜止彩帶背景)</span>
<span class="token comment"># See: https://github.com/hustcc/ribbon.js</span>
<span class="token key atrule">canvas_ribbon</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">size</span><span class="token punctuation">:</span> <span class="token number">150</span>
  <span class="token key atrule">alpha</span><span class="token punctuation">:</span> <span class="token number">0.6</span>
  <span class="token key atrule">zIndex</span><span class="token punctuation">:</span> <span class="token number">-1</span>
  <span class="token key atrule">click_to_change</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">mobile</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># Fluttering Ribbon (動態彩帶)</span>
<span class="token key atrule">canvas_fluttering_ribbon</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">mobile</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># canvas_nest</span>
<span class="token comment"># https://github.com/hustcc/canvas-nest.js</span>
<span class="token key atrule">canvas_nest</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">color</span><span class="token punctuation">:</span> <span class="token string">'0,0,255'</span> <span class="token comment">#color of lines, default: '0,0,0'; RGB values: (R,G,B).(note: use ',' to separate.)</span>
  <span class="token key atrule">opacity</span><span class="token punctuation">:</span> <span class="token number">0.7</span> <span class="token comment"># the opacity of line (0~1), default: 0.5.</span>
  <span class="token key atrule">zIndex</span><span class="token punctuation">:</span> <span class="token number">-1</span> <span class="token comment"># z-index property of the background, default: -1.</span>
  <span class="token key atrule">count</span><span class="token punctuation">:</span> <span class="token number">99</span> <span class="token comment"># the number of lines, default: 99.</span>
  <span class="token key atrule">mobile</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># Typewriter Effect (打字效果)</span>
<span class="token comment"># https://github.com/disjukr/activate-power-mode</span>
<span class="token key atrule">activate_power_mode</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">colorful</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># open particle animation (冒光特效)</span>
  <span class="token key atrule">shake</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#  open shake (抖動特效)</span>
  <span class="token key atrule">mobile</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># Mouse click effects: fireworks (鼠標點擊效果: 煙火特效)</span>
<span class="token key atrule">fireworks</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">zIndex</span><span class="token punctuation">:</span> <span class="token number">9999</span> <span class="token comment"># -1 or 9999</span>
  <span class="token key atrule">mobile</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># Mouse click effects: Heart symbol (鼠標點擊效果: 愛心)</span>
<span class="token key atrule">click_heart</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">mobile</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># Mouse click effects: words (鼠標點擊效果: 文字)</span>
<span class="token key atrule">ClickShowText</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">text</span><span class="token punctuation">:</span>
    <span class="token comment"># - I</span>
    <span class="token comment"># - LOVE</span>
    <span class="token comment"># - YOU</span>
  <span class="token key atrule">fontSize</span><span class="token punctuation">:</span> 16.5px
  <span class="token key atrule">random</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">mobile</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># Default display mode (網站默認的顯示模式)</span>
<span class="token comment"># light (default) / dark</span>
<span class="token key atrule">display_mode</span><span class="token punctuation">:</span> light

<span class="token comment"># Beautify (美化頁面顯示)</span>
<span class="token key atrule">beautify</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">field</span><span class="token punctuation">:</span> post <span class="token comment"># site/post</span>
  <span class="token key atrule">title-prefix-icon</span><span class="token punctuation">:</span> <span class="token comment"># '\f0c1'</span>
  <span class="token key atrule">title-prefix-icon-color</span><span class="token punctuation">:</span> <span class="token comment"># '#F47466'</span>

<span class="token comment"># Global font settings</span>
<span class="token comment"># Don't modify the following settings unless you know how they work (非必要不要修改)</span>
<span class="token key atrule">font</span><span class="token punctuation">:</span>
  <span class="token key atrule">global-font-size</span><span class="token punctuation">:</span> 16.5px
  <span class="token key atrule">code-font-size</span><span class="token punctuation">:</span>
  <span class="token key atrule">font-family</span><span class="token punctuation">:</span> Times<span class="token punctuation">,</span> Noto Serif SC
  <span class="token key atrule">code-font-family</span><span class="token punctuation">:</span>

<span class="token comment"># Font settings for the site title and site subtitle</span>
<span class="token comment"># 左上角網站名字 主頁居中網站名字</span>
<span class="token key atrule">blog_title_font</span><span class="token punctuation">:</span>
  <span class="token key atrule">font_link</span><span class="token punctuation">:</span>
  <span class="token key atrule">font-family</span><span class="token punctuation">:</span> Ma Shan Zheng

<span class="token comment"># The setting of divider icon (水平分隔線圖標設置)</span>
<span class="token key atrule">hr_icon</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">icon</span><span class="token punctuation">:</span> <span class="token comment"># the unicode value of Font Awesome icon, such as '\3423'</span>
  <span class="token key atrule">icon-top</span><span class="token punctuation">:</span>

<span class="token comment"># the subtitle on homepage (主頁subtitle)</span>
<span class="token key atrule">subtitle</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token comment"># Typewriter Effect (打字效果)</span>
  <span class="token key atrule">effect</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token comment"># Effect Speed Options (打字效果速度參數)</span>
  <span class="token key atrule">startDelay</span><span class="token punctuation">:</span> <span class="token number">300</span> <span class="token comment"># time before typing starts in milliseconds</span>
  <span class="token key atrule">typeSpeed</span><span class="token punctuation">:</span> <span class="token number">150</span> <span class="token comment"># type speed in milliseconds</span>
  <span class="token key atrule">backSpeed</span><span class="token punctuation">:</span> <span class="token number">50</span> <span class="token comment"># backspacing speed in milliseconds</span>
  <span class="token comment"># loop (循環打字)</span>
  <span class="token key atrule">loop</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token comment"># source 調用第三方服務</span>
  <span class="token comment"># source: false 關閉調用</span>
  <span class="token comment"># source: 1  調用一言網的一句話（簡體） https://hitokoto.cn/</span>
  <span class="token comment"># source: 2  調用一句網（簡體） http://yijuzhan.com/</span>
  <span class="token comment"># source: 3  調用今日詩詞（簡體） https://www.jinrishici.com/</span>
  <span class="token comment"># subtitle 會先顯示 source , 再顯示 sub 的內容</span>
  <span class="token key atrule">source</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token comment"># 如果關閉打字效果，subtitle 只會顯示 sub 的第一行文字</span>
  <span class="token key atrule">sub</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> 随手写一写，揭晓这世界

<span class="token comment"># Loading Animation (加載動畫)</span>
<span class="token key atrule">preloader</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token comment"># source</span>
  <span class="token comment"># 1. fullpage-loading</span>
  <span class="token comment"># 2. pace (progress bar)</span>
  <span class="token key atrule">source</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token comment"># pace theme (see https://codebyzach.github.io/pace/)</span>
  <span class="token key atrule">pace_css_url</span><span class="token punctuation">:</span>

<span class="token comment"># aside (側邊欄)</span>
<span class="token comment"># --------------------------------------</span>

<span class="token key atrule">aside</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">hide</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">button</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">mobile</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># display on mobile</span>
  <span class="token key atrule">position</span><span class="token punctuation">:</span> left <span class="token comment"># left or right</span>
  <span class="token key atrule">display</span><span class="token punctuation">:</span>
    <span class="token key atrule">archive</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">tag</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">category</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">card_author</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">description</span><span class="token punctuation">:</span>
    <span class="token key atrule">button</span><span class="token punctuation">:</span>
      <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token comment"># icon: fab fa-github</span>
      <span class="token key atrule">text</span><span class="token punctuation">:</span> 回到首页
      <span class="token key atrule">link</span><span class="token punctuation">:</span> / 
  <span class="token key atrule">card_announcement</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">content</span><span class="token punctuation">:</span> 随手写一些，揭晓这世界
  <span class="token key atrule">card_recent_post</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment"># if set 0 will show all</span>
    <span class="token key atrule">sort</span><span class="token punctuation">:</span> updated <span class="token comment"># date or updated</span>
    <span class="token key atrule">sort_order</span><span class="token punctuation">:</span> <span class="token string">'updated'</span> <span class="token comment"># Don't modify the setting unless you know how it works</span>
  <span class="token key atrule">card_categories</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token comment"># if set 0 will show all</span>
    <span class="token key atrule">expand</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># none/true/false</span>
    <span class="token key atrule">sort_order</span><span class="token punctuation">:</span> <span class="token comment"># Don't modify the setting unless you know how it works</span>
  <span class="token key atrule">card_tags</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token comment"># if set 0 will show all</span>
    <span class="token key atrule">color</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">sort_order</span><span class="token punctuation">:</span> <span class="token comment"># Don't modify the setting unless you know how it works</span>
  <span class="token key atrule">card_archives</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> monthly <span class="token comment"># yearly or monthly</span>
    <span class="token key atrule">format</span><span class="token punctuation">:</span> MMMM YYYY <span class="token comment"># eg: YYYY年MM月</span>
    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span> <span class="token comment"># Sort of order. 1, asc for ascending; -1, desc for descending</span>
    <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">8</span> <span class="token comment"># if set 0 will show all</span>
    <span class="token key atrule">sort_order</span><span class="token punctuation">:</span> <span class="token comment"># Don't modify the setting unless you know how it works</span>
  <span class="token key atrule">card_webinfo</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">post_count</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">last_push_date</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">sort_order</span><span class="token punctuation">:</span> <span class="token comment"># Don't modify the setting unless you know how it works</span>

<span class="token comment"># busuanzi count for PV / UV in site</span>
<span class="token comment"># 訪問人數</span>
<span class="token key atrule">busuanzi</span><span class="token punctuation">:</span>
  <span class="token key atrule">site_uv</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">site_pv</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">page_pv</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># Time difference between publish date and now (網頁運行時間)</span>
<span class="token comment"># Formal: Month/Day/Year Time or Year/Month/Day Time</span>
<span class="token key atrule">runtimeshow</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">publish_date</span><span class="token punctuation">:</span> 8/21/2020 00<span class="token punctuation">:</span><span class="token datetime number">00:00</span> <span class="token comment">#发布时间</span>

<span class="token comment"># Aside widget - Newest Comments</span>
<span class="token key atrule">newest_comments</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">sort_order</span><span class="token punctuation">:</span> <span class="token comment"># Don't modify the setting unless you know how it works</span>
  <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">6</span>
  <span class="token key atrule">storage</span><span class="token punctuation">:</span> <span class="token number">10</span> <span class="token comment"># unit: mins, save data to localStorage</span>
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># Bottom right button (右下角按鈕)</span>
<span class="token comment"># --------------------------------------</span>

<span class="token comment"># Conversion between Traditional and Simplified Chinese (簡繁轉換)</span>
<span class="token key atrule">translate</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token comment"># The text of a button</span>
  <span class="token key atrule">default</span><span class="token punctuation">:</span> 繁
  <span class="token comment"># the language of website (1 - Traditional Chinese/ 2 - Simplified Chinese）</span>
  <span class="token key atrule">defaultEncoding</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token comment"># Time delay</span>
  <span class="token key atrule">translateDelay</span><span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token comment"># The text of the button when the language is Simplified Chinese</span>
  <span class="token key atrule">msgToTraditionalChinese</span><span class="token punctuation">:</span> <span class="token string">'繁'</span>
  <span class="token comment"># The text of the button when the language is Traditional Chinese</span>
  <span class="token key atrule">msgToSimplifiedChinese</span><span class="token punctuation">:</span> <span class="token string">'簡'</span>

<span class="token comment"># Read Mode (閲讀模式)</span>
<span class="token key atrule">readmode</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># dark mode</span>
<span class="token key atrule">darkmode</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token comment"># Toggle Button to switch dark/light mode</span>
  <span class="token key atrule">button</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token comment"># Switch dark/light mode automatically (自動切換 dark mode和 light mode)</span>
  <span class="token comment"># autoChangeMode: 1  Following System Settings, if the system doesn't support dark mode, it will switch dark mode between 6 pm to 6 am</span>
  <span class="token comment"># autoChangeMode: 2  Switch dark mode between 6 pm to 6 am</span>
  <span class="token comment"># autoChangeMode: false</span>
  <span class="token key atrule">autoChangeMode</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># Don't modify the following settings unless you know how they work (非必要請不要修改 )</span>
<span class="token comment"># Choose: readmode,translate,darkmode,hideAside,toc,chat,comment</span>
<span class="token comment"># Don't repeat 不要重複</span>
<span class="token key atrule">rightside_item_order</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">hide</span><span class="token punctuation">:</span> <span class="token comment"># readmode,translate,darkmode,hideAside</span>
  <span class="token key atrule">show</span><span class="token punctuation">:</span> <span class="token comment"># toc,chat,comment</span>

<span class="token comment"># Lightbox (圖片大圖查看模式)</span>
<span class="token comment"># --------------------------------------</span>
<span class="token comment"># You can only choose one, or neither (只能選擇一個 或者 兩個都不選)</span>

<span class="token comment"># medium-zoom</span>
<span class="token comment"># https://github.com/francoischalifour/medium-zoom</span>
<span class="token key atrule">medium_zoom</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># fancybox</span>
<span class="token comment"># http://fancyapps.com/fancybox/3/</span>
<span class="token key atrule">fancybox</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># Tag Plugins settings (標籤外掛)</span>
<span class="token comment"># --------------------------------------</span>

<span class="token comment"># mermaid</span>
<span class="token comment"># see https://github.com/mermaid-js/mermaid</span>
<span class="token key atrule">mermaid</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token comment"># built-in themes: default/forest/dark/neutral</span>
  <span class="token key atrule">theme</span><span class="token punctuation">:</span>
    <span class="token key atrule">light</span><span class="token punctuation">:</span> default
    <span class="token key atrule">dark</span><span class="token punctuation">:</span> dark

<span class="token comment"># Note (Bootstrap Callout)</span>
<span class="token key atrule">note</span><span class="token punctuation">:</span>
  <span class="token comment"># Note tag style values:</span>
  <span class="token comment">#  - simple    bs-callout old alert style. Default.</span>
  <span class="token comment">#  - modern    bs-callout new (v2-v3) alert style.</span>
  <span class="token comment">#  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span>
  <span class="token comment">#  - disabled  disable all CSS styles import of note tag.</span>
  <span class="token key atrule">style</span><span class="token punctuation">:</span> flat
  <span class="token key atrule">icons</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">border_radius</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token comment"># Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span>
  <span class="token comment"># Offset also applied to label tag variables. This option can work with disabled note tag.</span>
  <span class="token key atrule">light_bg_offset</span><span class="token punctuation">:</span> <span class="token number">0</span>

<span class="token comment"># other</span>
<span class="token comment"># --------------------------------------</span>

<span class="token comment"># Pjax</span>
<span class="token comment"># It may contain bugs and unstable, give feedback when you find the bugs.</span>
<span class="token comment"># https://github.com/MoOx/pjax</span>
<span class="token key atrule">pjax</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>
    <span class="token comment"># - xxxx</span>
    <span class="token comment"># - xxxx</span>

<span class="token comment"># Inject the css and script (aplayer/meting)</span>
<span class="token key atrule">aplayerInject</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">per_page</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># Snackbar (Toast Notification 彈窗)</span>
<span class="token comment"># https://github.com/polonel/SnackBar</span>
<span class="token comment"># position 彈窗位置</span>
<span class="token comment"># 可選 top-left / top-center / top-right / bottom-left / bottom-center / bottom-right</span>
<span class="token key atrule">snackbar</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">position</span><span class="token punctuation">:</span> bottom<span class="token punctuation">-</span>left
  <span class="token key atrule">bg_light</span><span class="token punctuation">:</span> <span class="token string">'#49b1f5'</span> <span class="token comment"># The background color of Toast Notification in light mode</span>
  <span class="token key atrule">bg_dark</span><span class="token punctuation">:</span> <span class="token string">'#1f1f1f'</span> <span class="token comment"># The background color of Toast Notification in dark mode</span>

<span class="token comment"># https://instant.page/</span>
<span class="token comment"># prefetch (預加載)</span>
<span class="token key atrule">instantpage</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># https://github.com/vinta/pangu.js</span>
<span class="token comment"># Insert a space between Chinese character and English character (中英文之間添加空格)</span>
<span class="token key atrule">pangu</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">field</span><span class="token punctuation">:</span> site <span class="token comment"># site/post</span>

<span class="token comment"># Lazyload (圖片懶加載)</span>
<span class="token comment"># https://github.com/verlok/vanilla-lazyload</span>
<span class="token key atrule">lazyload</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">field</span><span class="token punctuation">:</span> site <span class="token comment"># site/post</span>
  <span class="token key atrule">placeholder</span><span class="token punctuation">:</span>
  <span class="token key atrule">blur</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># PWA</span>
<span class="token comment"># See https://github.com/JLHwung/hexo-offline</span>
<span class="token comment"># ---------------</span>
<span class="token comment"># pwa:</span>
<span class="token comment">#   enable: false</span>
<span class="token comment">#   manifest: /pwa/manifest.json</span>
<span class="token comment">#   apple_touch_icon: /pwa/apple-touch-icon.png</span>
<span class="token comment">#   favicon_32_32: /pwa/32.png</span>
<span class="token comment">#   favicon_16_16: /pwa/16.png</span>
<span class="token comment">#   mask_icon: /pwa/safari-pinned-tab.svg</span>

<span class="token comment"># Open graph meta tags</span>
<span class="token comment"># https://developers.facebook.com/docs/sharing/webmasters/</span>
<span class="token key atrule">Open_Graph_meta</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">option</span><span class="token punctuation">:</span>
    <span class="token comment"># twitter_card:</span>
    <span class="token comment"># twitter_image:</span>
    <span class="token comment"># twitter_id:</span>
    <span class="token comment"># twitter_site:</span>
    <span class="token comment"># google_plus:</span>
    <span class="token comment"># fb_admins:</span>
    <span class="token comment"># fb_app_id:</span>

<span class="token comment"># Add the vendor prefixes to ensure compatibility</span>
<span class="token key atrule">css_prefix</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># Inject</span>
<span class="token comment"># Insert the code to head (before '&lt;/head>' tag) and the bottom (before '&lt;/body>' tag)</span>
<span class="token comment"># 插入代码到头部 &lt;/head> 之前 和 底部 &lt;/body> 之前</span>
<span class="token key atrule">inject</span><span class="token punctuation">:</span>
  <span class="token key atrule">head</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> &lt;link rel="preconnect" href="https<span class="token punctuation">:</span>//fonts.googleapis.com"<span class="token punctuation">></span>
    <span class="token punctuation">-</span> &lt;link rel="preconnect" href="https<span class="token punctuation">:</span>//fonts.gstatic.com" crossorigin<span class="token punctuation">></span>
    <span class="token punctuation">-</span> &lt;link href="https<span class="token punctuation">:</span>//fonts.loli.net/css2<span class="token punctuation">?</span>family=Noto+Serif+SC<span class="token punctuation">:</span>wght@400;500;700<span class="token important">&amp;display=swap"</span> rel="stylesheet"<span class="token punctuation">></span> <span class="token comment">#思源宋体</span>
    <span class="token punctuation">-</span> &lt;link href="https<span class="token punctuation">:</span>//fonts.loli.net/css2<span class="token punctuation">?</span>family=Ma+Shan+Zheng<span class="token punctuation">:</span>wght@400;500;700<span class="token important">&amp;display=swap"</span> rel="stylesheet"<span class="token punctuation">></span> <span class="token comment">#Mashanzheng</span>
    <span class="token comment"># - &lt;link rel="stylesheet" href="/xxx.css"></span>
  <span class="token key atrule">bottom</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> &lt;script type='text/javascript' src='https<span class="token punctuation">:</span>//ajax.loli.net/ajax/libs/jquery/3.2.1/jquery.min.js'<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>
    <span class="token punctuation">-</span> &lt;script id="dsq<span class="token punctuation">-</span>count<span class="token punctuation">-</span>scr" src="//https<span class="token punctuation">-</span>www<span class="token punctuation">-</span>dhndzwxj<span class="token punctuation">-</span>top.disqus.com/count.js" async<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>
    <span class="token comment"># - &lt;script src="xxxx">&lt;/script></span>

<span class="token comment"># CDN</span>
<span class="token comment"># Don't modify the following settings unless you know how they work</span>
<span class="token comment"># 非必要請不要修改</span>
<span class="token key atrule">CDN</span><span class="token punctuation">:</span>
  <span class="token comment"># The CDN provider of internal scripts (主題內部 js 的 cdn 配置)</span>
  <span class="token comment"># option: local/jsdelivr/unpkg/cdnjs/custom</span>
  <span class="token comment"># Dev version can only choose. ( dev版的主題只能設置為 local )</span>
  <span class="token key atrule">internal_provider</span><span class="token punctuation">:</span> local

  <span class="token comment"># The CDN provider of third party scripts (第三方 js 的 cdn 配置)</span>
  <span class="token comment"># option: local/jsdelivr/unpkg/cdnjs/custom</span>
  <span class="token comment"># when set it to local, you need to install hexo-butterfly-extjs</span>
  <span class="token key atrule">third_party_provider</span><span class="token punctuation">:</span> jsdelivr

  <span class="token comment"># Add version number to CDN, true or false  </span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

  <span class="token comment"># Custom format</span>
  <span class="token comment"># For example: https://cdn.staticfile.org/$&#123;cdnjs_name&#125;/$&#123;version&#125;/$&#123;min_cdnjs_file&#125;</span>
  <span class="token key atrule">custom_format</span><span class="token punctuation">:</span>

  <span class="token key atrule">option</span><span class="token punctuation">:</span>
    <span class="token comment"># main_css:</span>
    <span class="token comment"># main:</span>
    <span class="token comment"># utils:</span>
    <span class="token comment"># translate:</span>
    <span class="token comment"># local_search:</span>
    <span class="token comment"># algolia_js:</span>
    <span class="token comment"># algolia_search_v4:</span>
    <span class="token comment"># instantsearch_v4:</span>
    <span class="token comment"># pjax:</span>
    <span class="token comment"># gitalk:</span>
    <span class="token comment"># gitalk_css:</span>
    <span class="token comment"># blueimp_md5:</span>
    <span class="token comment"># valine:</span>
    <span class="token comment"># disqusjs:</span>
    <span class="token comment"># disqusjs_css:</span>
    <span class="token comment"># twikoo:</span>
    <span class="token comment"># waline_js:</span>
    <span class="token comment"># waline_css:</span>
    <span class="token comment"># sharejs:</span>
    <span class="token comment"># sharejs_css:</span>
    <span class="token comment"># mathjax:</span>
    <span class="token comment"># katex:</span>
    <span class="token comment"># katex_copytex:</span>
    <span class="token comment"># mermaid:</span>
    <span class="token comment"># canvas_ribbon:</span>
    <span class="token comment"># canvas_fluttering_ribbon:</span>
    <span class="token comment"># canvas_nest:</span>
    <span class="token comment"># lazyload:</span>
    <span class="token comment"># instantpage:</span>
    <span class="token comment"># typed:</span>
    <span class="token comment"># pangu:</span>
    <span class="token comment"># fancybox_css_v4:</span>
    <span class="token comment"># fancybox_v4:</span>
    <span class="token comment"># medium_zoom:</span>
    <span class="token comment"># snackbar_css:</span>
    <span class="token comment"># snackbar:</span>
    <span class="token comment"># activate_power_mode:</span>
    <span class="token comment"># fireworks:</span>
    <span class="token comment"># click_heart:</span>
    <span class="token comment"># ClickShowText:</span>
    <span class="token comment"># fontawesomeV6:</span>
    <span class="token comment"># flickr_justified_gallery_js:</span>
    <span class="token comment"># flickr_justified_gallery_css:</span>
    <span class="token comment"># aplayer_css:</span>
    <span class="token comment"># aplayer_js:</span>
    <span class="token comment"># meting_js:</span>
    <span class="token comment"># prismjs_js:</span>
    <span class="token comment"># prismjs_lineNumber_js:</span>
    <span class="token comment"># prismjs_autoloader:</span>
    <span class="token comment"># artalk_js:</span>
    <span class="token comment"># artalk_css:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</div></details>
<h2 id="7-git-教程及博客备份"><a class="markdownIt-Anchor" href="#7-git-教程及博客备份"></a> 7 Git 教程及博客备份</h2>
<p>这一步是要把我们本地的所有个人文件在网上进行备份——这很有必要，因为保不齐哪一天我们手残把电脑格式化了。不过想实现备份功能，要求我们对Git的一些内容有必要的了解，否则做起备份来往往会盲人摸象，反而自己把自己的文件用命令行代码清空了（这里有我的故事，有酒么？）。</p>
<p>Git教程：<a href='/584278389.html'>点这里</a>。</p>
<h3 id="71-生成-ssh-key"><a class="markdownIt-Anchor" href="#71-生成-ssh-key"></a> 7.1 生成 SSH Key</h3>
<p>本例以 Github 为例作为远程仓库，如果你没有 Github 可以在官网 <a target="_blank" rel="noopener" href="https://github.com/%E6%B3%A8%E5%86%8C%E3%80%82%E7%94%B1%E4%BA%8E%E4%BD%A0%E7%9A%84%E6%9C%AC%E5%9C%B0">https://github.com/注册。由于你的本地</a> Git 仓库和 GitHub 仓库之间的传输是通过SSH加密的，所以我们需要配置验证信息：</p>
<p>使用以下命令生成 SSH Key：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-C</span> <span class="token string">"youremail@example.com"</span>
ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-C</span> <span class="token string">"dhndzwxj@ruc.edu.cn"</span>
ssh-keygen <span class="token parameter variable">-t</span> ed25519 <span class="token parameter variable">-C</span> <span class="token string">"dhndzwxj@ruc.edu.cn"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>查看当前的远程库:(执行时加上<code>-v</code>参数，你还可以看到每个别名的实际链接地址。)</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> remote
backup
$ <span class="token function">git</span> remote <span class="token parameter variable">-v</span>
backup	git@github.com:dhndzwxj/hexo-backup.git <span class="token punctuation">(</span>fetch<span class="token punctuation">)</span>
backup	git@github.com:dhndzwxj/hexo-backup.git <span class="token punctuation">(</span>push<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="72-查看远程分支的更新状态"><a class="markdownIt-Anchor" href="#72-查看远程分支的更新状态"></a> 7.2 查看远程分支的更新状态</h3>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> remote show <span class="token punctuation">[</span>仓库别名<span class="token punctuation">]</span>
* remote backup
  Fetch URL: git@github.com:dhndzwxj/hexo-backup.git
  Push  URL: git@github.com:dhndzwxj/hexo-backup.git
  HEAD branch: master
  Remote branch:
    master tracked
  Local ref configured <span class="token keyword">for</span> <span class="token string">'git push'</span><span class="token builtin class-name">:</span>
    master pushes to master <span class="token punctuation">(</span>up to <span class="token function">date</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Fetch URL和Push  URL表示<code>fetch</code>和<code>push</code>的链接，<code>master tracked</code>表示本地和远程建立了连接。<code>up to date</code>表示本地和远程同步状态，<code>local out of date</code>表示本地落后于远程了。</p>
<h3 id="73-博客备份"><a class="markdownIt-Anchor" href="#73-博客备份"></a> 7.3 博客备份</h3>
<p>注意每次备份前，都需要commit一下~（<span style='font-family:kaiti'>回忆前面讲的内容，如果不commit就只是在本地有缓存，没有上传到缓存区</span>）然后下面一键三连：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">➜  dlog git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
➜  dlog git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'211023版本提交'</span>
➜  dlog git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">git</span> push backup master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>后面的<code>backup</code>是远程仓库名，<code>master</code>是backup这个远程仓库的默认分支名，这些名字都可以自己个性化命名，它们都不是代码中的<b>关键字</b>！</p>
<p>不过在提交的时候，往往出现主题文件无法commit的情况！为什么呢？<span style='color:red'>因为主题文件也是从仓库里拉取下来的，它被关联到了作者的git仓库，所以提交不上去</span>！</p>
<p>怎么解决呢？</p>
<p>①从暂存区删除该文件夹</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">rm</span> <span class="token parameter variable">--cache</span> themes/butterfly451<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>②把 <code>themes/主题名/.git</code>文件夹到放到别的位置，比方说桌面。记得把 <code>themes/主题名/.gitignore</code>里的 <code>_config</code>去掉</p>
<p>③<code>git status</code>查看当前状态</p>
<p>④直接按步骤提交就行了</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> themes/butterfly470/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>让后三连即可</p>
<p><span id='7-7' style='color:white'>标签</span></p>
<h3 id="74-多设备拉取-备份实战"><a class="markdownIt-Anchor" href="#74-多设备拉取-备份实战"></a> 7.4 多设备拉取、备份实战</h3>
<h4 id="741-往返于多个设备之间流程式"><a class="markdownIt-Anchor" href="#741-往返于多个设备之间流程式"></a> 7.4.1 往返于多个设备之间：流程式</h4>
<p>在家里上传代码</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> remote <span class="token function">add</span> <span class="token punctuation">[</span>远程仓库别名<span class="token punctuation">]</span> <span class="token punctuation">[</span>远程仓库地址<span class="token punctuation">]</span>
<span class="token function">git</span> push <span class="token punctuation">[</span>远程仓库别名<span class="token punctuation">]</span> <span class="token punctuation">[</span>分支<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>到公司新电脑上<span style='color:red'>第一次</span>获取代码</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone <span class="token punctuation">[</span>远程仓库地址<span class="token punctuation">]</span>
<span class="token comment"># 切换分支</span>
<span class="token function">git</span> checkout <span class="token punctuation">[</span>分支<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>在Windows下，如果仓库中的一个pdf文件的路径太长，导致clone到本地之后无法checkout，解决方法是：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> reset
<span class="token function">git</span> config core.protectNTFS <span class="token boolean">false</span>
<span class="token function">git</span> checkout<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>在公司进行开发(约定在dev分支进行开发)</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#切换到dev分支进行开发</span>
<span class="token function">git</span> checkout dev
<span class="token comment">#把master分支合并到dev【仅一次】</span>
<span class="token function">git</span> merge master
<span class="token comment">#修改代码</span>
<span class="token comment">#提交代码</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'记录信息'</span>
<span class="token function">git</span> push <span class="token punctuation">[</span>远程仓库别名<span class="token punctuation">]</span> dev<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>回到家中继续写代码</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#切换到dev分支进行开发</span>
<span class="token function">git</span> checkout dev
<span class="token comment">#拉代码</span>
<span class="token function">git</span> pull <span class="token punctuation">[</span>远程仓库别名<span class="token punctuation">]</span> dev
<span class="token comment">#继续开发</span>
<span class="token comment">#提交代码</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'记录信息'</span>
<span class="token function">git</span> push <span class="token punctuation">[</span>远程仓库别名<span class="token punctuation">]</span> dev<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>……以上流程循环往复。</p>
<p>开发完毕，要上线</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 把dev分支的代码合并到master分支上</span>
<span class="token function">git</span> checkout master
<span class="token function">git</span> merge dev
<span class="token function">git</span> push <span class="token punctuation">[</span>远程仓库别名<span class="token punctuation">]</span> master
<span class="token comment"># 把dev分支也推送到远程</span>
<span class="token function">git</span> checkout dev
<span class="token function">git</span> merge master
<span class="token function">git</span> push <span class="token punctuation">[</span>远程仓库别名<span class="token punctuation">]</span> dev<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="742-往返于多个设备之间分布式多设备共同开发-合并"><a class="markdownIt-Anchor" href="#742-往返于多个设备之间分布式多设备共同开发-合并"></a> 7.4.2 往返于多个设备之间：分布式（多设备共同开发、合并）</h4>
<p>在设备1和设备2共同开发，将代码合并的过程中可能会发生冲突。</p>
<p>怎么办？手动解决！</p>
<h3 id="75-上传超过100m的文件"><a class="markdownIt-Anchor" href="#75-上传超过100m的文件"></a> 7.5 上传超过100M的文件</h3>
<p>参考文章<a href='https://cloud.tencent.com/developer/article/1677003' target='_blank'>轻松上传超过100M的文件至GitHub</a></p>
<p>就需要借助<strong>Git LFS</strong>。首先下载git-lfs（<a target="_blank" rel="noopener" href="https://github.com/git-lfs/git-lfs">https://github.com/git-lfs/git-lfs</a>），安装好后进入本地仓库目录，执行下面的命令。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> lfs track <span class="token string">"file"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong>file</strong>是需要上传的大文件。执行完命令后会发现目录下生成了一个&quot;<strong>.gitattributes</strong>&quot;文件，文件内记录了我们要上传文件的信息。只有先把&quot;.gitattributes&quot;传上去，才可以上传大文件。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> .gitattributes
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">"submit file"</span>
<span class="token function">git</span> push <span class="token parameter variable">-u</span> origin master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>上传完毕后，开始上传大文件。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token function">file</span>
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">"add file"</span>
<span class="token function">git</span> push <span class="token parameter variable">-u</span> origin master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>如果发现自己空间不足，可以删去一些大文件或者购买更多的空间。</p>
<p>如果在上传过程中出现如下报错：</p>
<p><strong>batch response: Git LFS is disabled for this repository.</strong></p>
<p><strong>Uploading LFS objects:   0% (0/1), 0 B | 0 B/s, done</strong></p>
<p>就说明你的账号被冻结了，需要在GitHub后台提交解封申请。<a target="_blank" rel="noopener" href="https://support.github.com/contact">https://support.github.com/contact</a></p>
<p>工作日一般几个小时就会帮你把账号解封，解封后就可以继续上传大文件啦~</p>
<h2 id="8-将博客站点托管到vercel上"><a class="markdownIt-Anchor" href="#8-将博客站点托管到vercel上"></a> 8. 将博客站点托管到Vercel上！</h2>
<p>为什么使用Vercel托管网站？就我的个人使用体验而言，优点有以下几点：</p>
<ul>
<li>服务器在国内（据我查到的资料是在中国台湾），网页加载速度比Github Page快太多；</li>
<li>支持绑定Github账号，可以直接导入Github仓库</li>
<li>我看到的资料里，在Github上<code>hexo d</code>后，Vercel这边也会自动更新，比较省心。</li>
</ul>
<p>下面看看怎么做吧~首先上<a href='https://vercel.com/' target='_blank'>Vercel官网</a>，注册一个自己的账号（点击网页右上角的“Sign Up”），然后（如下图）用Github账号就可以！</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211027-31.jpg' width=400px>
</div>
<p>登陆成功后，我们下一步是在Vercel上新建一个项目（Project，如下图左），导入一个Git仓库（如下图右），点击Import就可以了</p>
<table align='center'>
  <tr>
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211027-32.png' width=400px></td>
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211027-33.png' width=400px></td>
  </tr>
</table>
<p>导入后便进入下面这个页面（下图左）。这里的意思是我们要不要建立一个开发团队，由于这项服务是收费的，所以我们当然就不需要啦，点击“Skip”即可跳过此步。然后进入下一个页面（下图右），直接点击“Deploy”，就可以将我们的Github项目部署到Vercel上面啦！做到这里，基本上就大功告成了！（<span style='font-family:kaiti'>下图右里面有一个选项叫做“PROJECT NAME”，也就是项目名称的意思，这个是能自己取名字的哦！</span>）</p>
<table align='center'>
  <tr>
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211027-34.png' width=400px></td>
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211027-35.png' width=400px></td>
  </tr>
</table>
<p>最后一步是要知道，我们生成的Vercel网页的网址是什么？</p>
<p>如下图1，先在自己的主页上打开自己刚刚部署好的项目，然后点击图2的“View Domains”，即查看自己的域名。在图3中点击“Edit”，即对自己的域名进行编辑，最后在图4红框处进行改名（<span style='font-family:kaiti'>后面的&quot;.vercel.app&quot;不能改，只能改前面的内容</span>），点击Save进行保存。</p>
<table align='center'>
  <tr>
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211027-36.png' width=400px><p align='center' style='font-family:kaiti'>图1</p></td>
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211027-37.jpg' width=400px><p align='center' style='font-family:kaiti'>图2</p></td>
  </tr>
  <tr>
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211027-38.png' width=400px><p align='center' style='font-family:kaiti'>图3</p></td>
    <td><img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20211027-39.png' width=400px><p align='center' style='font-family:kaiti'>图4</p></td>
  </tr>
</table>
<h2 id="9vercel绑定域名"><a class="markdownIt-Anchor" href="#9vercel绑定域名"></a> 9.Vercel绑定域名</h2>
<p>1- 在vercel的主界面，点击Setting。</p>
<p>2-点击domains设置</p>
<p>3-在域名添加界面，填入信息，点击add按钮</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20220624-40.png' width=500px>
</div>
<h2 id="10将github绑定自己的域名"><a class="markdownIt-Anchor" href="#10将github绑定自己的域名"></a> 10.将Github绑定自己的域名</h2>
<p>1-先买一个域名。</p>
<p>2-在github仓库里添加CNAME文件，并在文件中填写绑定的域名。</p>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20220624-41.png' width=600px>
</div>
<p><b>文件内容如下</b>：（文件里填写要绑定的域名且不要包含Http://和www） 说白了就是你购买的域名，前面不要 <code>http</code> 和 <code>www</code></p>
<p>进入设置，找到 <b>Custom domain</b>添加域名后保存即可（添加CNAME文件并在文件中填写绑定的域名后应该会自动保存，看看有没有自动保存）</p>
<p>3-ping你的http://github.io域名，得到一个IP；</p>
<p>4-然后在域名中添加两条A记录，使用刚刚得到的IP。一个主机记录为<code>www</code>，一个主机记录为<code>@</code>。</p>
<p>5-对DNS的配置不是立即生效的，过10分钟再去访问你的域名看看有没有配置成功 : )</p>
<h2 id="n-1-博客站点根目录文件配置"><a class="markdownIt-Anchor" href="#n-1-博客站点根目录文件配置"></a> N-1. 博客站点根目录文件配置</h2>
<p>对博客站点根目录进行个性化配置。这是我的个人设置，大家可以根据自己的需要更改。</p>
<details class="toggle" style="border: 1px solid black"><summary class="toggle-button" style="background-color: black;color: white">博客站点根目录文件配置</summary><div class="toggle-content"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Hexo Configuration</span>
<span class="token comment">## Docs: https://hexo.io/docs/configuration.html</span>
<span class="token comment">## Source: https://github.com/hexojs/hexo/</span>

<span class="token comment"># Site</span>
title: 小荷才露尖尖角
subtitle: 蜻蜓
description: <span class="token string">'随手写一写，揭晓这世界'</span>   <span class="token comment">#网站描述</span>
keywords: 马克思主义政治经济学
author: 揭晓                            <span class="token comment">#你的名字</span>
language: zh-CN                         <span class="token comment">#网站使用的语言</span>
timezone: Asia/Shanghai                 <span class="token comment">#网站时区</span>

<span class="token comment"># URL</span>
<span class="token comment">## Set your site url here. For example, if you use GitHub Page, set url as 'https://username.github.io/project'</span>
url: https://dhndzwxj.github.io <span class="token comment"># http://example.com</span>
root: /
permalink: :abbrlink.html <span class="token comment">#前面绝对不能加'/'</span>
permalink_defaults:
pretty_urls:
  trailing_index: <span class="token boolean">true</span> <span class="token comment"># Set to false to remove trailing 'index.html' from permalinks</span>
  trailing_html: <span class="token boolean">true</span> <span class="token comment"># Set to false to remove trailing '.html' from permalinks</span>

<span class="token comment">#abbrlink配置</span>
abbrlink:
  alg: crc32  <span class="token comment"># 算法：crc16(default) and crc32</span>
  rep: dec    <span class="token comment"># 进制：dec(default) and hex  </span>


<span class="token comment"># Directory 目录配置</span>
source_dir: <span class="token builtin class-name">source</span>    <span class="token comment">#资源文件夹，这个文件夹用来存放内容</span>
public_dir: public    <span class="token comment">#公共文件夹，这个文件夹用于存放生成的站点文件</span>
tag_dir: tags         <span class="token comment">#标签文件夹</span>
archive_dir: archives <span class="token comment">#归档文件夹</span>
category_dir: categories  <span class="token comment">#分类文件夹</span>
code_dir: downloads/code  <span class="token comment">#Include code 文件夹</span>
i18n_dir: :lang       <span class="token comment">#国际化文件夹</span>
skip_render:          <span class="token comment">#跳过指定文件的渲染，您可使用 glob 来配置路径</span>

<span class="token comment"># Writing 写作配置</span>
new_post_name: :title.md  <span class="token comment">#新文章的文件名称</span>
default_layout: post      <span class="token comment">#默认文章布局</span>
titlecase: <span class="token boolean">false</span> <span class="token comment"># Transform title into titlecase</span>
external_link: 
  enable: <span class="token boolean">true</span> <span class="token comment"># Open external links in new tab</span>
  field: site <span class="token comment"># Apply to the whole site</span>
  exclude: <span class="token string">''</span>
filename_case: <span class="token number">0</span>          <span class="token comment">#把文件名称转换为 (1) 小写或 (2) 大写</span>
render_drafts: <span class="token boolean">false</span>      <span class="token comment">#显示草稿</span>
post_asset_folder: <span class="token boolean">true</span>  <span class="token comment">#是否启动资源文件夹</span>
relative_link: <span class="token boolean">true</span>       <span class="token comment">#把链接改为与根目录的相对位址</span>
future: <span class="token boolean">true</span>
highlight:
  enable: <span class="token boolean">false</span>
  line_number: <span class="token boolean">false</span> <span class="token comment">#决定了代码块左侧是否有行数</span>
  auto_detect: <span class="token boolean">false</span>
  tab_replace: <span class="token string">''</span>
  wrap: <span class="token boolean">true</span>
  hljs: <span class="token boolean">true</span>
prismjs:
  enable: <span class="token boolean">true</span>
  preprocess: <span class="token boolean">true</span>
  line_number: <span class="token boolean">true</span> <span class="token comment">#决定了代码块左侧是否有行数</span>
  tab_replace: <span class="token string">''</span>

<span class="token comment"># Home page setting</span>
<span class="token comment"># path: Root path for your blogs index page. (default = '')</span>
<span class="token comment"># per_page: Posts displayed per page. (0 = disable pagination)</span>
<span class="token comment"># order_by: Posts order. (Order by date descending by default)</span>
index_generator:
  path: <span class="token string">''</span>
  per_page: <span class="token number">10</span>
  order_by: <span class="token parameter variable">-date</span>
<span class="token comment"># 归档页面</span>
archive_generator:
  per_page: <span class="token number">50</span>
  yearly: <span class="token boolean">true</span>
  monthly: <span class="token boolean">true</span>
<span class="token comment">#效果，首页每间隔10篇文章就分页，归档页每间隔50篇文章才分页。</span>

<span class="token comment"># Category &amp; Tag</span>
default_category: <span class="token comment">#uncategorized</span>
category_map:
tag_map:

<span class="token comment"># Metadata elements</span>
<span class="token comment">## https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta</span>
meta_generator: <span class="token boolean">true</span>

<span class="token comment"># Date / Time format</span>
<span class="token comment">## Hexo uses Moment.js to parse and display date</span>
<span class="token comment">## You can customize the date format as defined in</span>
<span class="token comment">## http://momentjs.com/docs/#/displaying/format/</span>
date_format: YYYY-MM-DD
time_format: HH:mm:ss
<span class="token comment">## updated_option supports 'mtime', 'date', 'empty'</span>
updated_option: <span class="token string">'mtime'</span>

<span class="token comment"># Pagination</span>
<span class="token comment">## Set per_page to 0 to disable pagination</span>
per_page: <span class="token number">10</span>
pagination_dir: page

<span class="token comment"># Include / Exclude file(s)</span>
<span class="token comment">## include:/exclude: options only apply to the 'source/' folder</span>
include:
exclude:
ignore:

<span class="token comment">#搜索功能</span>
search:
  path: search.xml
  field: post
  content: <span class="token boolean">true</span>
  format: html
<span class="token comment"># #搜索功能2</span>
<span class="token comment"># algolia:</span>
<span class="token comment">#   applicationID: 'applicationID'</span>
<span class="token comment">#   apiKey: 'apiKey'</span>
<span class="token comment">#   indexName: '...'</span>
<span class="token comment"># # 文章加密</span>
encrypt: <span class="token comment"># hexo-blog-encrypt</span>
  abstract: 有东西被加密了, 请输入密码查看.
  message: 您好, 这里需要密码.
  tags:
  - <span class="token punctuation">&#123;</span>name: tagName, password: 密码A<span class="token punctuation">&#125;</span>
  - <span class="token punctuation">&#123;</span>name: tagName, password: 密码B<span class="token punctuation">&#125;</span>
  wrong_pass_message: 抱歉, 这个密码看着不太对, 请再试试.
  wrong_hash_message: 抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.

<span class="token comment"># # mermaid chart</span>
<span class="token comment"># mermaid: ## mermaid url https://github.com/knsv/mermaid</span>
<span class="token comment">#   enable: true  # default true</span>
<span class="token comment">#   version: "9.2.2" # default v7.1.2</span>
<span class="token comment">#   options:  # find more api options from https://github.com/knsv/mermaid/blob/master/src/mermaidAPI.js</span>
<span class="token comment">#     #startOnload: true  // default true</span>


<span class="token comment"># # math</span>
<span class="token comment"># math:</span>
<span class="token comment">#   engine: 'mathjax' </span>
<span class="token comment">#   mathjax:  </span>
<span class="token comment"># _config.yml</span>
math:
  katex:
    css: <span class="token string">'https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css'</span>
    options:
      throwOnError: <span class="token boolean">false</span>
  mathjax:
    css: <span class="token string">'https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css'</span>
    options:
      conversion:
        display: <span class="token boolean">false</span>
      tex:
      svg:

<span class="token comment"># electric_clock</span>
<span class="token comment"># see https://akilar.top/posts/4e39cf4a/</span>
electric_clock:
  enable: <span class="token boolean">true</span> <span class="token comment"># 开关</span>
  priority: <span class="token number">5</span> <span class="token comment">#过滤器优先权</span>
  enable_page: all <span class="token comment"># 应用页面</span>
  exclude:
    - /posts/
    - /about/
  layout: <span class="token comment"># 挂载容器类型</span>
    type: class
    name: sticky_layout
    index: <span class="token number">0</span>
  loading: https://npm.elemecdn.com/hexo-butterfly-clock/lib/loading.gif <span class="token comment">#加载动画自定义</span>
  clock_css: https://npm.elemecdn.com/hexo-butterfly-clock/lib/clock.min.css <span class="token comment">#电子钟样式CDN资源</span>
  clock_js: https://npm.elemecdn.com/hexo-butterfly-clock/lib/clock.min.js <span class="token comment">#电子钟执行脚本CDN资源</span>
  ip_api: https://pv.sohu.com/cityjson?ie<span class="token operator">=</span>utf-8 <span class="token comment">#获取时钟IP的API</span>

<span class="token comment"># Deployment</span>
<span class="token comment">## Docs: https://hexo.io/docs/one-command-deployment</span>
deploy:
  type: <span class="token function">git</span>
  <span class="token comment"># repo: git@gitee.com:dhndzwxj/dhndzwxj.gitee.io.git</span>
  repo: git@github.com:dhndzwxj/dhndzwxj.github.io.git
  branch: master
<span class="token comment"># Extensions</span>
<span class="token comment">## Plugins: https://hexo.io/plugins/</span>
plugins:
  <span class="token comment"># - hexo-footnote</span>
<span class="token comment">## Themes: https://hexo.io/themes/</span>
theme: butterfly451
<span class="token comment"># theme: lanscape</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</div></details>
<h2 id="n-拓展知识"><a class="markdownIt-Anchor" href="#n-拓展知识"></a> N. 拓展知识</h2>
<h3 id="1-css预处理器"><a class="markdownIt-Anchor" href="#1-css预处理器"></a> 1. CSS预处理器</h3>
<p>CSS指的是层叠样式表(<em>C</em>ascading <em>S</em>tyle <em>S</em>heets)，描述了如何在屏幕、纸张或其他媒体上显示 HTML 元素。可以同时控制多张网页的<span style='color:red'>布局</span>，外部样式存储在css文件中。<span style='font-family:kaiti'>一句话，css的目的是对html中每一个组块（如<code>&lt;a&gt;</code>，<code>&lt;p&gt;</code>，<code>&lt;i&gt;</code>，<code>&lt;h1&gt;</code>）进行个性化定制！</span></p>
<p><span id='selection' style='color:white'>选择器</span></p>
<p>CSS 规则集（rule-set）由<span style='color:red'>选择器</span>和<span style='color:red'>声明块</span>组成：</p>
<ul>
<li>选择器<u>指向</u>您需要设置样式的<span style='color:red'> HTML 元素</span>。(<span style='font-family:kaiti'>css是对html中各种元素进行个性化定制的服务！</span>)</li>
<li>声明块包含一条或多条用分号分隔的声明。每条声明都包含一个 CSS 属性名称和一个值，以冒号分隔。多条 CSS 声明用分号分隔，声明块用花括号括起来。</li>
</ul>
<div align='center'>
  <img src='/../../images/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/image-20210727-42.png' width=400px>
</div>
返回<a href='/1830845253.html#before6-7'>前面</a>。
<p>例子：</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">p</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>例子解释</p>
<ul>
<li><code>p</code> 是 <code>CSS</code> 中的选择器（它指向要设置样式的 <code>HTML</code> 元素：<code>&lt;p&gt;</code>）。</li>
<li><code>color</code> 是属性，<code>red</code> 是属性值</li>
<li><code>text-align</code> 是属性，<code>center</code> 是属性值</li>
</ul>
<p>CSS（Cascading Style Sheet-级联样式表）的缺陷也很明显。这种「面向命名语言」，不太友好，格式死板，低复制效率。css 预处理器就是这样被创造出来，弥补了直接写 css 的一些缺憾：</p>
<ul>
<li>语法不够强大，比如无法嵌套书写导致模块化开发中需要书写很多重复的选择器；</li>
<li>没有变量和合理的样式复用机制，使得逻辑上相关的属性值必须以字面量的形式重复输出，导致难以维护。</li>
</ul>
<p><b>Stylus</b>：2010年产生，来自Node.js社区，主要用来给Node项目进行CSS预处理支持，在此社区之内有一定支持者。<a href='https://link.zhihu.com/?target=http%3A//wiki.jikexueyuan.com/project/harp-doc/Stylus.html' target='_blank'>Stylus 中文文档</a>。</p>
<p>Stylus 是一个高效、动态以及丰富的 CSS 预处理器。它同时支持缩进的和通俗的两种风格的 CSS 语法风格。Stylus 扩展名为「 *.styl 」，<a href='https://link.zhihu.com/?target=https%3A//tj.github.io/nib/' target='_blank'>Nib</a>是 Stylus 的应用的类库。给你的「* .styl 」添加 Nib 的最快方式是克隆 Nib 的 Git 版本库并引入，因为有了 Nib，Stylus 的高效性才更为突出。Stylus 在容错性上的突出特性也十分吸引我，你可以在一个 Stylus 文件里这样写，且它们都会被编译成标准 css：</p>
<pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token selector"><span class="token comment">/*style.styl*/</span>
<span class="token comment">/*类似于CSS标准语法*/</span>
h1 <span class="token punctuation">&#123;</span></span>
  <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode">#963</span><span class="token punctuation">;</span></span>
  <span class="token property-declaration"><span class="token property">background-color</span><span class="token punctuation">:</span><span class="token hexcode">#333</span><span class="token punctuation">;</span></span>
<span class="token punctuation">&#125;</span>
<span class="token selector"><span class="token comment">/*省略大括号（｛｝）*/</span>
h1 </span>
  <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode">#963</span><span class="token punctuation">;</span></span>
  <span class="token property-declaration"><span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#333</span><span class="token punctuation">;</span></span>
<span class="token selector"><span class="token comment">/*省略大括号（｛｝）和分号（;）*/</span>
h1</span>
  <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span><span class="token hexcode">#963</span></span>
  <span class="token property-declaration"><span class="token property">background-color</span><span class="token punctuation">:</span><span class="token hexcode">#333</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><b>Try Stylus！</b></p>
<p>这一部分参考知乎<a href='https://zhuanlan.zhihu.com/p/27431427' target='_blank'>徐小七七</a>。</p>
<pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token selector">body<span class="token punctuation">,</span>html</span>
    <span class="token property-declaration"><span class="token property">margin</span><span class="token punctuation">:</span><span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">padding</span><span class="token punctuation">:</span><span class="token number">0</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>编译成：</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body,
html</span> <span class="token punctuation">&#123;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>stylus : 强大的功能丰富的语言</p>
<pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token func"><span class="token function">-pos</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> args<span class="token punctuation">)</span></span>
  <span class="token variable-declaration"><span class="token variable">i</span> <span class="token operator">=</span> <span class="token number">0</span></span>
  <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span> <span class="token func"><span class="token function">unquote</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span></span></span>
  <span class="token property-declaration"><span class="token property"><span class="token interpolation variable"><span class="token delimiter punctuation">&#123;</span>args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token delimiter punctuation">&#125;</span></span></span><span class="token punctuation">:</span> args<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">is a</span> <span class="token string">'unit'</span> <span class="token operator">?</span> args<span class="token punctuation">[</span>i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token number">0</span></span>
  <span class="token property-declaration"><span class="token property">&#123;args[i</span> <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">:</span> args<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">is a</span> <span class="token string">'unit'</span> <span class="token operator">?</span> args<span class="token punctuation">[</span>i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token number">0</span></span>

<span class="token func"><span class="token function">absolute</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
  <span class="token func"><span class="token function">-pos</span><span class="token punctuation">(</span><span class="token string">'absolute'</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span></span>

<span class="token func"><span class="token function">fixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
  <span class="token func"><span class="token function">-pos</span><span class="token punctuation">(</span><span class="token string">'fixed'</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span></span>

<span class="token selector">#prompt</span>
  <span class="token property-declaration"><span class="token property">absolute</span><span class="token punctuation">:</span> top <span class="token number">150</span><span class="token unit">px</span> left <span class="token number">5</span><span class="token unit">px</span></span>
  <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">200</span><span class="token unit">px</span></span>
  <span class="token property-declaration"><span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token func"><span class="token function">-</span><span class="token punctuation">(</span>@width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span></span></span>

<span class="token selector">#logo</span>
  <span class="token property-declaration"><span class="token property">fixed</span><span class="token punctuation">:</span> top left</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>编译成</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">#prompt</span> <span class="token punctuation">&#123;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> -100px<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">#logo</span> <span class="token punctuation">&#123;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>stylus：nibstylus插件</p>
<pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token atrule-declaration"><span class="token atrule">@import</span> <span class="token string">'nib'</span></span>
<span class="token selector">body</span>
  <span class="token property-declaration"><span class="token property">background</span><span class="token punctuation">:</span> <span class="token func"><span class="token function">linear-gradient</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token unit">px</span> top<span class="token punctuation">,</span> <span class="token color">white</span><span class="token punctuation">,</span> <span class="token color">black</span><span class="token punctuation">)</span> </span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>编译成</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">-webkit-linear-gradient</span><span class="token punctuation">(</span>20px top<span class="token punctuation">,</span> #fff<span class="token punctuation">,</span> #000<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">-moz-linear-gradient</span><span class="token punctuation">(</span>20px top<span class="token punctuation">,</span> #fff<span class="token punctuation">,</span> #000<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">-o-linear-gradient</span><span class="token punctuation">(</span>20px top<span class="token punctuation">,</span> #fff<span class="token punctuation">,</span> #000<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">-ms-linear-gradient</span><span class="token punctuation">(</span>20px top<span class="token punctuation">,</span> #fff<span class="token punctuation">,</span> #000<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>20px top<span class="token punctuation">,</span> #fff<span class="token punctuation">,</span> #000<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2javascript-实例"><a class="markdownIt-Anchor" href="#2javascript-实例"></a> 2.JavaScript 实例</h3>
<p><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/js/js_examples.asp">https://www.w3school.com.cn/js/js_examples.asp</a></p>
<p>前面的<code>html</code>是网页页面的主要内容，<code>css</code>是格式化定制页面外观的代码。而<code>JavaScript</code>的作用让上面的内容“动起来”，是让页面内容发生改变的代码。</p>
<blockquote>
<p>JavaScript是一种脚本语言。脚本语言又被称为扩建的语言，或者动态语言，是一种编程语言，用来控制软件应用程序，脚本通常以文本（如ASCII)保存，只在被调用时进行解释或编译。</p>
</blockquote>
<p>根据我的理解，JavaScript就是网页代码中的“函数”（function），它可以根据开发者的目的对网页内容、属性进行一些改变。</p>
<h3 id="语法结构"><a class="markdownIt-Anchor" href="#语法结构"></a> 语法结构</h3>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
	<span class="token operator">...</span>  
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>弹框的脚本：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>无标题文档<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Welcome! Can I help you?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    ..
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果将JavaScript代码写在body内，需要这么写：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>无标题文档<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
      document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;h1>Welcome!&lt;/h1>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;h3>Can I help you?&lt;/h3>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>复杂一点的代码：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>无标题文档<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>中国图书网<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>do<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>社科类图书<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>DIV<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>军事类图书<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">Function</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>
        单击
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">function</span> <span class="token function">Function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"do"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">"计算机类图书"</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"DIV"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">"历史类图书"</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span>red</span><span class="token punctuation">'</span></span></span><span class="token punctuation">></span></span>
      单击按钮，改变显示内容。
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="tags/Hexo/">Hexo</a><a class="post-meta__tags" href="tags/%E5%8D%9A%E5%AE%A2/">博客</a></div><div class="post_share"><div class="social-share" data-image="/private_img/banner2.gif" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/private_img/wechat.png" target="_blank"><img class="post-qr-code-img" src="/private_img/wechat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/private_img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/private_img/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="3127454572.html" title="什么是“温特制”？工作为什么越来越不稳定？"><img class="cover" src="/private_img/banner2.gif" onerror="onerror=null;src='/private_img/banner.gif'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">什么是“温特制”？工作为什么越来越不稳定？</div></div></a></div><div class="next-post pull-right"><a href="3262086267.html" title="拉沃《后凯恩斯主义》"><img class="cover" src="/private_img/banner2.gif" onerror="onerror=null;src='/private_img/banner.gif'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">拉沃《后凯恩斯主义》</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/private_img/yuyingnan.jpg" onerror="this.onerror=null;this.src='/private_img/404.gif'" alt="avatar"/></div><div class="author-info__name">揭晓</div><div class="author-info__description">随手写一写，揭晓这世界</div></div><a id="card-info-btn" href="/"><i class="fas fa-home"></i><span>回到首页</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83"><span class="toc-text"> 1. 搭建环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-windows"><span class="toc-text"> 1.1 Windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-mac"><span class="toc-text"> 1.2 Mac</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-nas"><span class="toc-text"> 1.3 Nas</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%AB%99%E7%82%B9"><span class="toc-text"> 2. 搭建博客站点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-windows"><span class="toc-text"> 2.1 Windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-mac"><span class="toc-text"> 2.2 Mac</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-%E9%83%A8%E7%BD%B2hexo%E5%8D%9A%E5%AE%A2"><span class="toc-text"> 2.3 部署hexo博客</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-nas"><span class="toc-text"> 2.4 Nas</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%8D%9A%E5%AE%A2%E4%BB%A3%E7%A0%81%E9%83%A8%E7%BD%B2"><span class="toc-text"> 3. 博客代码部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#31-github"><span class="toc-text"> 3.1 Github</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#31a-%E9%83%A8%E7%BD%B2%E6%84%8F%E5%A4%96%E6%83%85%E5%86%B5"><span class="toc-text"> 3.1a 部署意外情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#32-gitee"><span class="toc-text"> 3.2 Gitee</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%92%B0%E5%86%99%E5%8D%9A%E5%AE%A2"><span class="toc-text"> 4. 撰写博客</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#41-%E5%8D%9A%E5%AE%A2%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-text"> 4.1 博客文件夹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#42-%E6%96%B0%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%96%87%E4%BB%B6"><span class="toc-text"> 4.2 新建博客文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#43-typora-markdown%E8%AF%AD%E6%B3%95"><span class="toc-text"> 4.3 Typora-Markdown语法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%8F%92%E4%BB%B6"><span class="toc-text"> 5. 插件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#51-%E6%B0%B8%E4%B9%85%E9%93%BE%E6%8E%A5"><span class="toc-text"> 5.1 永久链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#52-latex"><span class="toc-text"> 5.2 LaTeX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#53-%E8%A1%8C%E5%86%85%E5%85%AC%E5%BC%8Fbug"><span class="toc-text"> 5.3 行内公式bug</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#54-%E8%84%9A%E6%B3%A8"><span class="toc-text"> 5.4 脚注</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#55-%E6%96%87%E7%AB%A0%E5%8A%A0%E5%AF%86%E5%8A%9F%E8%83%BD"><span class="toc-text"> 5.5 文章加密功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#56-%E4%B8%8A%E4%BC%A0%E6%9C%AC%E5%9C%B0pdf%E5%B9%B6%E5%9C%A8%E7%BA%BF%E9%A2%84%E8%A7%88"><span class="toc-text"> 5.6 上传本地pdf并在线预览</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#57-%E5%BC%95%E7%94%A8%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E7%9A%84%E9%93%BE%E6%8E%A5"><span class="toc-text"> 5.7 引用本地文件的链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#58-%E5%BD%92%E6%A1%A3%E8%AE%A1%E6%95%B0"><span class="toc-text"> 5.8 归档计数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#59-mermaid"><span class="toc-text"> 5.9 mermaid</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#510-%E6%8F%92%E5%85%A5%E8%A7%86%E9%A2%91"><span class="toc-text"> 5.10 插入视频</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-butterfly%E4%B8%BB%E9%A2%98"><span class="toc-text"> 6 butterfly主题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#61-%E4%B8%BB%E9%A2%98%E4%B8%8B%E8%BD%BD"><span class="toc-text"> 6.1 主题下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#61a-%E7%BD%91%E7%AB%99%E4%B8%BB%E9%A2%98%E7%9A%84%E6%9B%B4%E6%96%B0"><span class="toc-text"> 6.1a 网站主题的更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#62-%E7%BD%91%E7%AB%99%E8%83%8C%E6%99%AF"><span class="toc-text"> 6.2 网站背景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#63-%E5%AD%97%E6%95%B0%E7%BB%9F%E8%AE%A1"><span class="toc-text"> 6.3 字数统计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#63a-%E6%96%87%E7%AB%A0meta%E4%BF%A1%E6%81%AF"><span class="toc-text"> 6.3a 文章meta信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#64-%E4%B8%BB%E9%A1%B5%E5%92%8C%E6%96%87%E7%AB%A0%E9%A1%B5%E9%9D%A2%E4%BE%A7%E8%BE%B9%E6%A0%8F"><span class="toc-text"> 6.4 主页和文章页面侧边栏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#65-%E6%96%87%E7%AB%A0%E7%BD%AE%E9%A1%B6"><span class="toc-text"> 6.5 文章置顶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#66-%E7%9B%AE%E5%BD%95%E6%8A%98%E5%8F%A0"><span class="toc-text"> 6.6 目录折叠</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#67-%E6%9C%AC%E5%9C%B0%E6%90%9C%E7%B4%A2"><span class="toc-text"> 6.7 本地搜索</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#671-%E4%B8%BB%E9%A2%98v451%E5%8E%9F%E7%94%9F%E5%8A%9F%E8%83%BD"><span class="toc-text"> 6.7.1 主题v4.5.1原生功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#672-%E5%8E%9F%E7%94%9F%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD%E8%A7%A3%E8%AF%BB"><span class="toc-text"> 6.7.2 原生搜索功能解读</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#673-%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C%E5%AF%B9%E8%AF%9D%E6%A1%86%E6%98%BE%E7%A4%BA%E6%A0%87%E7%AD%BE"><span class="toc-text"> 6.7.3 搜索结果对话框显示标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#674-%E6%8C%89%E7%85%A7%E6%A0%87%E7%AD%BE%E6%90%9C%E7%B4%A2"><span class="toc-text"> 6.7.4 按照标签搜索</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#67a-3-hexo%E4%B8%BB%E9%A2%98%E7%9A%84%E6%9C%AC%E5%9C%B0%E6%90%9C%E7%B4%A2"><span class="toc-text"> 6.7a 3-hexo主题的本地搜索</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#68-%E5%8D%9A%E5%AE%A2%E9%A6%96%E9%A1%B5pagination%E6%94%BE%E5%9C%A8%E6%9C%80%E8%BF%91%E6%96%87%E7%AB%A0%E7%9A%84%E9%A1%B6%E7%AB%AF%E4%BE%BF%E4%BA%8E%E7%BF%BB%E9%A1%B5"><span class="toc-text"> 6.8 博客首页pagination放在最近文章的顶端，便于翻页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#68a-tag-hide"><span class="toc-text"> 6.8a tag-hide</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#69-%E5%AD%97%E4%BD%93%E4%BF%AE%E6%94%B9"><span class="toc-text"> 6.9 字体修改</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E5%BA%94%E7%94%A8-api"><span class="toc-text"> 高级应用 API</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#610-%E7%BD%91%E9%A1%B5%E4%BE%A7%E8%BE%B9%E6%A0%8F%E5%8D%A1%E7%89%87"><span class="toc-text"> 6.10 网页侧边栏卡片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#611-%E6%97%B6%E9%92%9F"><span class="toc-text"> 6.11 时钟</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6n-%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text"> 6.n 主题配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-git-%E6%95%99%E7%A8%8B%E5%8F%8A%E5%8D%9A%E5%AE%A2%E5%A4%87%E4%BB%BD"><span class="toc-text"> 7 Git 教程及博客备份</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#71-%E7%94%9F%E6%88%90-ssh-key"><span class="toc-text"> 7.1 生成 SSH Key</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#72-%E6%9F%A5%E7%9C%8B%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E7%9A%84%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81"><span class="toc-text"> 7.2 查看远程分支的更新状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#73-%E5%8D%9A%E5%AE%A2%E5%A4%87%E4%BB%BD"><span class="toc-text"> 7.3 博客备份</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#74-%E5%A4%9A%E8%AE%BE%E5%A4%87%E6%8B%89%E5%8F%96-%E5%A4%87%E4%BB%BD%E5%AE%9E%E6%88%98"><span class="toc-text"> 7.4 多设备拉取、备份实战</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#741-%E5%BE%80%E8%BF%94%E4%BA%8E%E5%A4%9A%E4%B8%AA%E8%AE%BE%E5%A4%87%E4%B9%8B%E9%97%B4%E6%B5%81%E7%A8%8B%E5%BC%8F"><span class="toc-text"> 7.4.1 往返于多个设备之间：流程式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#742-%E5%BE%80%E8%BF%94%E4%BA%8E%E5%A4%9A%E4%B8%AA%E8%AE%BE%E5%A4%87%E4%B9%8B%E9%97%B4%E5%88%86%E5%B8%83%E5%BC%8F%E5%A4%9A%E8%AE%BE%E5%A4%87%E5%85%B1%E5%90%8C%E5%BC%80%E5%8F%91-%E5%90%88%E5%B9%B6"><span class="toc-text"> 7.4.2 往返于多个设备之间：分布式（多设备共同开发、合并）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#75-%E4%B8%8A%E4%BC%A0%E8%B6%85%E8%BF%87100m%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-text"> 7.5 上传超过100M的文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E5%B0%86%E5%8D%9A%E5%AE%A2%E7%AB%99%E7%82%B9%E6%89%98%E7%AE%A1%E5%88%B0vercel%E4%B8%8A"><span class="toc-text"> 8. 将博客站点托管到Vercel上！</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9vercel%E7%BB%91%E5%AE%9A%E5%9F%9F%E5%90%8D"><span class="toc-text"> 9.Vercel绑定域名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E5%B0%86github%E7%BB%91%E5%AE%9A%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9F%9F%E5%90%8D"><span class="toc-text"> 10.将Github绑定自己的域名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#n-1-%E5%8D%9A%E5%AE%A2%E7%AB%99%E7%82%B9%E6%A0%B9%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE"><span class="toc-text"> N-1. 博客站点根目录文件配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#n-%E6%8B%93%E5%B1%95%E7%9F%A5%E8%AF%86"><span class="toc-text"> N. 拓展知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-css%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-text"> 1. CSS预处理器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2javascript-%E5%AE%9E%E4%BE%8B"><span class="toc-text"> 2.JavaScript 实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E7%BB%93%E6%9E%84"><span class="toc-text"> 语法结构</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="2511924152.html" title="博士论文手稿">博士论文手稿</a><time datetime="2023-03-31T01:25:16.046Z" title="更新于 2023-03-31 09:25:16">2023-03-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="2581857377.html" title="兰小欢置身事内">兰小欢置身事内</a><time datetime="2023-03-31T01:25:16.043Z" title="更新于 2023-03-31 09:25:16">2023-03-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="3667980037.html" title="第四章第五章材料摘抄">第四章第五章材料摘抄</a><time datetime="2023-03-30T02:54:48.886Z" title="更新于 2023-03-30 10:54:48">2023-03-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="344386454.html" title="布伦纳全球动荡的经济学">布伦纳全球动荡的经济学</a><time datetime="2023-03-30T02:50:53.741Z" title="更新于 2023-03-30 10:50:53">2023-03-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="92400472.html" title="金融学常识">金融学常识</a><time datetime="2023-03-29T03:46:57.807Z" title="更新于 2023-03-29 11:46:57">2023-03-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="228544763.html" title="第6章“再平衡”谬论：2008年及其后果">第6章“再平衡”谬论：2008年及其后果</a><time datetime="2023-03-29T03:46:57.792Z" title="更新于 2023-03-29 11:46:57">2023-03-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="595459505.html" title="厦门大学常用网站">厦门大学常用网站</a><time datetime="2023-03-29T03:46:57.780Z" title="更新于 2023-03-29 11:46:57">2023-03-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="2140013107.html" title="第5章中国的崛起2[2001-2008]">第5章中国的崛起2[2001-2008]</a><time datetime="2023-03-24T17:15:37.425Z" title="更新于 2023-03-25 01:15:37">2023-03-25</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/private_img/banner2.gif')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 揭晓</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="js/utils.js"></script><script src="js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container').forEach(node => {
            if (node.hasAttribute('display')) {
              btf.wrap(node, 'div', { class: 'mathjax-overflow' })
            } else {
              btf.wrap(node, 'span', { class: 'mathjax-overflow' })
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'https://dhndzwxj.github.io/3276806131.html'
    this.page.identifier = ''
    this.page.title = '博客搭建日志'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://https-www-dhndzwxj-top.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }

  document.getElementById('darkmode').addEventListener('click', () => {
    setTimeout(() => window.disqusReset(), 200)
  })
}

if ('Disqus' === 'Disqus' || !true) {
  if (true) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script></div><script type='text/javascript' src='https://ajax.loli.net/ajax/libs/jquery/3.2.1/jquery.min.js'></script><script id="dsq-count-scr" src="//https-www-dhndzwxj-top.disqus.com/count.js" async></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="js/search/local-search.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var qweather_key = 'b16a1fa0e63c46a4b8f28abfb06ae3fe';
  var gaud_map_key = 'e2b04289e870b005374ee030148d64fd&s=rsv3';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '112.982279,28.19409';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><!-- hexo injector body_end end --></body></html>